"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4873],{3274:(M,b,l)=>{l.d(b,{K:()=>g});var u=l(177),c=l(3953);let g=(()=>{var _;class p{}return(_=p).\u0275fac=function(d){return new(d||_)},_.\u0275mod=c.$C({type:_}),_.\u0275inj=c.G2t({imports:[u.MD]}),p})()},5603:(M,b,l)=>{l.d(b,{P:()=>_});var u=l(177),c=l(9417),g=l(3953);let _=(()=>{var p;class f{}return(p=f).\u0275fac=function(e){return new(e||p)},p.\u0275mod=g.$C({type:p}),p.\u0275inj=g.G2t({imports:[u.MD,c.YN]}),f})()},3895:(M,b,l)=>{l.d(b,{b:()=>f});var u=l(177),c=l(9417),g=l(9465),_=l(3955),p=l(3953);let f=(()=>{var d;class e{}return(d=e).\u0275fac=function(x){return new(x||d)},d.\u0275mod=p.$C({type:d}),d.\u0275inj=p.G2t({imports:[u.MD,c.YN,g.bv,_.h]}),e})()},9066:(M,b,l)=>{l.d(b,{K:()=>_});var u=l(177),c=l(9465),g=l(3953);let _=(()=>{var p;class f{}return(p=f).\u0275fac=function(e){return new(e||p)},p.\u0275mod=g.$C({type:p}),p.\u0275inj=g.G2t({imports:[u.MD,c.bv]}),f})()},4873:(M,b,l)=>{l.r(b),l.d(b,{SettingsPageModule:()=>ye});var u=l(177),c=l(9417),g=l(9465),_=l(3895),p=l(5603),f=l(5188),d=l(467),e=l(3953),C=l(2081),x=l(4501),T=l(9710),E=l(5970),I=l(1296),R=l(8397),y=l(1213),S=l(8129);function B(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",14),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.onClickAutoLeadInboxEmailAccount(o))}),e.j41(1,"div",15)(2,"div",16),e.nrm(3,"div",17),e.j41(4,"div",18),e.EFF(5),e.k0s()()(),e.j41(6,"div",19)(7,"div",20),e.nrm(8,"i",21),e.k0s(),e.j41(9,"div",22),e.bIt("click",function(o){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.deleteAutoLeadInboxEmailAccount(o,null==i?null:i.id))}),e.nrm(10,"i",23),e.k0s()()()}if(2&s){const t=a.$implicit;e.R7$(5),e.SpI(" ",null==t?null:t.email," ")}}function F(s,a){1&s&&(e.j41(0,"div",5),e.EFF(1," A\xfan no hay cuentas de correo Inbound "),e.k0s())}let N=(()=>{var s;class a{constructor(n,o,i,r,m,h,v,Se){this.api=n,this.headerService=o,this.route=i,this.modalsService=r,this.popoversService=m,this.tableService=h,this.toastService=v,this.byvaroState=Se,this.autoLeadInboxEmailAccounts=[],this.newEmailAccount="",this.loadingButton=!1}ngOnInit(){this.getState()}getState(){return this.byvaroState.getState().subscribe(n=>{this.stateData=n})}ionViewWillEnter(){this.headerService.setConfig({title:"settings"}),this.getData()}getData(){var n=this;return(0,d.A)(function*(){yield n.api.createDefaultAutoLeadInboxEmailAccounts();const i=yield n.api.getAutoLeadInboxEmailAccounts(null,null,null);i.success?n.autoLeadInboxEmailAccounts=i.success.data:n.toastService.showErrorToast("Error getting data")})()}onClickAutoLeadInboxEmailAccount(n){var o=this;return(0,d.A)(function*(){const i=yield o.modalsService.onShowAutoLeadModal(n);console.log("Popover result:",i),o.getData()})()}createAutoLeadInboxEmailAccount(){var n=this;return(0,d.A)(function*(){if(!n.newEmailAccount)return void n.toastService.showErrorToast("Email is required");n.loadingButton=!0;const o=n.stateData.agency||n.stateData.promoter;n.newEmailAccount=n.newEmailAccount.trim(),n.newEmailAccount=n.newEmailAccount.toLowerCase(),n.newEmailAccount=n.newEmailAccount.replace(/[^a-zA-Z0-9]/g,"");const i="leads."+n.newEmailAccount+"."+o.byvaroId+"@leads.byvaro.com";if(!/^[a-zA-Z0-9]{4,20}$/.test(n.newEmailAccount))return n.toastService.showErrorToast("Email must be between 4 and 20 characters and only contain letters and numbers"),void(n.loadingButton=!1);const r=yield n.api.createAutoLeadInboxEmailAccounts({email:i});n.loadingButton=!1,r.success?(n.toastService.showSuccessToast("Email account created"),n.newEmailAccount="",n.getData()):n.toastService.showErrorToast("Error creating email account:"+r.error.errorMessage)})()}deleteAutoLeadInboxEmailAccount(n,o){var i=this;return(0,d.A)(function*(){n.stopPropagation(),n.preventDefault();const r=yield i.api.deleteAutoLeadInboxEmailAccountsById(o);r.success?(i.toastService.showSuccessToast("Email account deleted"),i.getData()):i.toastService.showErrorToast("Error deleting email account:"+r.error.errorMessage)})()}goToImapList(){window.location.href="/settings/imap-accounts"}goToAccessRoles(){window.location.href="/settings/access-roles"}goToPdfTemplates(){window.location.href="/settings/pdf-templates"}}return(s=a).\u0275fac=function(n){return new(n||s)(e.rXU(C.i),e.rXU(x.d),e.rXU(f.nX),e.rXU(T.M),e.rXU(E.m),e.rXU(I.a),e.rXU(R.f),e.rXU(y.c))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-settings"]],decls:27,vars:6,consts:[[3,"fullscreen","scrollY"],[1,"crm-block-content"],[1,"crm-block-body",2,"padding","20px"],[1,"crm-section-smaller-title","crm-section-margin-top"],[1,"crm-item-associated-user",2,"width","400px","margin-top","10px","cursor","pointer"],[1,"crm-text"],[1,"crm-input",2,"width","400px"],[1,"crm-input-label"],[1,"crm-input-input"],["placeholder","introduce el nombre del correo",3,"ngModelChange","ngModel"],[1,"crm-input-input-symbol"],[1,"crm-buttons-group"],[1,"crm-button",3,"click","appLoadingButton"],[2,"padding","50px","cursor","pointer",3,"click"],[1,"crm-item-associated-user",2,"width","400px","margin-top","10px","cursor","pointer",3,"click"],[1,"crm-item-associated-user-left"],[1,"crm-item-associated-user-left-info"],[1,"crm-item-associated-user-left-info-name"],[1,"crm-item-associated-user-left-info-email"],[1,"crm-section-buttons-group"],[1,"crm-item-option-edit",2,"margin-right","5px"],[1,"fas","fa-edit"],[1,"crm-item-option-remove",3,"click"],[1,"fas","fa-trash"]],template:function(n,o){1&n&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),e.EFF(4," Cuentas de correo Inbound "),e.k0s(),e.nrm(5,"br"),e.Z7z(6,B,11,1,"div",4,e.fX1),e.DNE(8,F,2,0,"div",5),e.nrm(9,"br"),e.j41(10,"div",6)(11,"div",7),e.EFF(12,"Nombre del correo"),e.k0s(),e.j41(13,"div",8)(14,"input",9),e.mxI("ngModelChange",function(r){return e.DH7(o.newEmailAccount,r)||(o.newEmailAccount=r),r}),e.k0s(),e.j41(15,"div",10),e.EFF(16),e.k0s()()(),e.nrm(17,"br"),e.j41(18,"div",11)(19,"button",12),e.bIt("click",function(){return o.createAutoLeadInboxEmailAccount()}),e.EFF(20," Crear cuenta de correo "),e.k0s()()(),e.j41(21,"a",13),e.bIt("click",function(){return o.goToImapList()}),e.EFF(22," Ver cuentas IMAP configuradas "),e.k0s(),e.j41(23,"a",13),e.bIt("click",function(){return o.goToAccessRoles()}),e.EFF(24," Crear y asignar roles "),e.k0s(),e.j41(25,"a",13),e.bIt("click",function(){return o.goToPdfTemplates()}),e.EFF(26," Plantillas de PDF "),e.k0s()()()),2&n&&(e.Y8G("fullscreen",!0)("scrollY",!1),e.R7$(6),e.Dyx(o.autoLeadInboxEmailAccounts),e.R7$(2),e.vxM(0==o.autoLeadInboxEmailAccounts.length?8:-1),e.R7$(6),e.R50("ngModel",o.newEmailAccount),e.R7$(2),e.JRh("@leads.byvaro.com"),e.R7$(3),e.Y8G("appLoadingButton",o.loadingButton))},dependencies:[c.me,c.BC,c.vS,g.W9,S.K]}),a})();const k=s=>({"has-error":s});function V(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",9),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.openImapAccountModal(o))}),e.j41(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),e.EFF(5,"Email"),e.k0s(),e.j41(6,"div",14),e.EFF(7),e.k0s()(),e.j41(8,"div",12)(9,"div",13),e.EFF(10,"Host"),e.k0s(),e.j41(11,"div",14),e.EFF(12),e.k0s()(),e.j41(13,"div",12)(14,"div",13),e.EFF(15,"TLS"),e.k0s(),e.j41(16,"div",14)(17,"ion-checkbox",15),e.mxI("ngModelChange",function(o){const i=e.eBV(t).$implicit;return e.DH7(i.tls,o)||(i.tls=o),e.Njj(o)}),e.k0s()()(),e.j41(18,"div",12)(19,"div",13),e.EFF(20,"Port"),e.k0s(),e.j41(21,"div",14),e.EFF(22),e.k0s()()()(),e.j41(23,"div",16),e.bIt("click",function(o){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.deleteImapAccount(o,i.id))}),e.nrm(24,"i",17),e.k0s()(),e.nrm(25,"br")}if(2&s){const t=a.$implicit;e.R7$(7),e.SpI(" ",t.email," "),e.R7$(5),e.SpI(" ",t.host," "),e.R7$(5),e.R50("ngModel",t.tls),e.R7$(5),e.SpI(" ",t.port," ")}}function G(s,a){1&s&&(e.j41(0,"div",18)(1,"p"),e.EFF(2,"No hay cuentas de correo configuradas."),e.k0s()())}function D(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addingImapConnection=!0)}),e.nrm(1,"i",20),e.EFF(2," A\xf1adir cuenta correo Imap "),e.k0s()}}function U(s,a){if(1&s){const t=e.RV6();e.j41(0,"form",21,0),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addImapConnection())}),e.j41(2,"div",22)(3,"div",23)(4,"div",24),e.nrm(5,"i",25),e.k0s(),e.j41(6,"div",26),e.EFF(7,"Integraci\xf3n del buz\xf3n"),e.k0s()()(),e.nrm(8,"br"),e.j41(9,"div",27)(10,"div",28),e.EFF(11,"E-mail"),e.k0s(),e.j41(12,"div",29)(13,"input",30),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.imapConnection.email,o)||(i.imapConnection.email=o),e.Njj(o)}),e.k0s()()(),e.nrm(14,"br"),e.j41(15,"div",27)(16,"div",28),e.EFF(17,"Direcci\xf3n del servidor IMAP"),e.k0s(),e.j41(18,"div",29)(19,"input",31),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.imapConnection.host,o)||(i.imapConnection.host=o),e.Njj(o)}),e.k0s()()(),e.nrm(20,"br"),e.j41(21,"div",27)(22,"div",28),e.EFF(23,"Puerto"),e.k0s(),e.j41(24,"div",29)(25,"input",32),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.imapConnection.port,o)||(i.imapConnection.port=o),e.Njj(o)}),e.k0s()()(),e.nrm(26,"br"),e.j41(27,"div",33)(28,"div",34)(29,"div",35)(30,"ion-checkbox",36),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.imapConnection.tls,o)||(i.imapConnection.tls=o),e.Njj(o)}),e.k0s(),e.j41(31,"div",37),e.EFF(32,"Usar SSL"),e.k0s()()()(),e.nrm(33,"br"),e.j41(34,"div",27)(35,"div",28),e.EFF(36,"Contrase\xf1a"),e.k0s(),e.j41(37,"div",29)(38,"input",38),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.imapConnection.password,o)||(i.imapConnection.password=o),e.Njj(o)}),e.k0s()()(),e.nrm(39,"br"),e.j41(40,"div",39)(41,"button",40),e.nrm(42,"i",41),e.EFF(43," Guardar configuraci\xf3n "),e.k0s(),e.j41(44,"button",42),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addingImapConnection=!1)}),e.EFF(45," Cancelar "),e.k0s()()()}if(2&s){const t=e.sdS(1),n=e.XpG();e.R7$(9),e.Y8G("ngClass",e.eq3(9,k,t.submitted&&!n.imapConnection.email)),e.R7$(4),e.R50("ngModel",n.imapConnection.email),e.R7$(2),e.Y8G("ngClass",e.eq3(11,k,t.submitted&&!n.imapConnection.host)),e.R7$(4),e.R50("ngModel",n.imapConnection.host),e.R7$(2),e.Y8G("ngClass",e.eq3(13,k,t.submitted&&!n.imapConnection.port)),e.R7$(4),e.R50("ngModel",n.imapConnection.port),e.R7$(5),e.R50("ngModel",n.imapConnection.tls),e.R7$(4),e.Y8G("ngClass",e.eq3(15,k,t.submitted&&!n.imapConnection.password)),e.R7$(4),e.R50("ngModel",n.imapConnection.password)}}let z=(()=>{var s;class a{constructor(n,o,i,r){this.api=n,this.toastService=o,this.popoversService=i,this.modalsService=r,this.imapConnection={email:"",password:"",host:"",port:993,tls:!0},this.imapAccounts=[],this.addingImapConnection=!1}ngOnInit(){this.getImapAccounts()}addImapConnection(){var n=this;return(0,d.A)(function*(){if(n.imapConnection.email&&n.imapConnection.password&&n.imapConnection.host&&n.imapConnection.port)try{yield n.api.addImapConnection(n.imapConnection),n.toastService.showSuccessToast("Buz\xf3n IMAP guardado correctamente."),n.imapConnection={email:"",password:"",host:"",port:993,tls:!0},n.addingImapConnection=!1,n.getImapAccounts()}catch(o){n.toastService.showErrorToast("Error al guardar el buz\xf3n IMAP."+(null==o?void 0:o.toString()))}else n.toastService.showErrorToast("Por favor, complete todos los campos obligatorios.")})()}getImapAccounts(){var n=this;return(0,d.A)(function*(){try{const o=yield n.api.getImapAccounts();console.log(o),n.imapAccounts=null!=o&&o.success?null==o?void 0:o.success.data:[]}catch(o){n.toastService.showErrorToast("Error al obtener las cuentas IMAP."+(null==o?void 0:o.toString()))}})()}deleteImapAccount(n,o){var i=this;return(0,d.A)(function*(){if(n.preventDefault(),n.stopPropagation(),"delete"===(yield i.popoversService.onShowMenuPopover(n,"delete")).data)try{const h=yield i.api.deleteImapAccount(o);var m;if(null==h||!h.success)return void i.toastService.showErrorToast("Error al eliminar el buz\xf3n IMAP."+(null==h||null===(m=h.error)||void 0===m?void 0:m.errorMessage));i.toastService.showSuccessToast("Buz\xf3n IMAP eliminado correctamente."),i.getImapAccounts()}catch(h){i.toastService.showErrorToast("Error al eliminar el buz\xf3n IMAP."+(null==h?void 0:h.toString()))}})()}openImapAccountModal(n){var o=this;return(0,d.A)(function*(){yield o.modalsService.onShowImapAccountModal(n)})()}}return(s=a).\u0275fac=function(n){return new(n||s)(e.rXU(C.i),e.rXU(R.f),e.rXU(E.m),e.rXU(T.M))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-imap-connections"]],decls:13,vars:5,consts:[["imapForm","ngForm"],[3,"fullscreen","scrollY"],[1,"crm-block-content"],[1,"crm-block-body",2,"padding","20px"],[1,"crm-title"],[2,"max-height","300px","overflow-y","auto"],["class","crm-text","style","margin-top: 20px;",4,"ngIf"],["class","crm-button",3,"click",4,"ngIf"],["style","max-width: 500px;",3,"ngSubmit",4,"ngIf"],[1,"crm-item-operation",3,"click"],[1,"crm-item-operation-center"],[1,"crm-block-info-horizontal"],[1,"crm-info"],[1,"crm-info-title"],[1,"crm-info-content"],["name","tls","disabled","",3,"ngModelChange","ngModel"],[1,"crm-item-operation-right",2,"position","relative",3,"click"],[1,"fas","fa-ellipsis-v"],[1,"crm-text",2,"margin-top","20px"],[1,"crm-button",3,"click"],[1,"fas","fa-plus"],[2,"max-width","500px",3,"ngSubmit"],[1,"crm-header-icon",2,"margin-bottom","20px"],[1,"crm-header-icon-left"],[1,"crm-square-icon"],[1,"fas","fa-envelope"],[1,"crm-header-icon-title"],[1,"crm-input",3,"ngClass"],[1,"crm-input-label"],[1,"crm-input-input"],["type","email","name","email","placeholder","info@example.com","required","",3,"ngModelChange","ngModel"],["type","text","name","host","placeholder","imap.example.com","required","",3,"ngModelChange","ngModel"],["type","number","name","port","placeholder","993","required","",3,"ngModelChange","ngModel"],[1,"crm-input"],[1,"crm-input-checkboxes"],[1,"crm-input-checkbox"],["name","tls",3,"ngModelChange","ngModel"],[1,"crm-input-checkbox-label"],["type","password","name","password","placeholder","Contrase\xf1a","required","",3,"ngModelChange","ngModel"],[2,"margin-top","20px"],["type","submit",1,"crm-button","crm-button-success"],[1,"fas","fa-check"],[1,"crm-button","crm-button-secondary",2,"margin-top","10px",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"ion-content",1)(1,"div",2)(2,"div",3)(3,"div",4),e.EFF(4,"Lista de cuentas de correo"),e.k0s(),e.nrm(5,"br"),e.j41(6,"div",5),e.Z7z(7,V,26,4,null,null,e.fX1),e.DNE(9,G,3,0,"div",6),e.k0s(),e.nrm(10,"br"),e.DNE(11,D,3,0,"button",7)(12,U,46,17,"form",8),e.k0s()()()),2&n&&(e.Y8G("fullscreen",!0)("scrollY",!1),e.R7$(7),e.Dyx(o.imapAccounts),e.R7$(2),e.Y8G("ngIf",0===o.imapAccounts.length),e.R7$(2),e.Y8G("ngIf",!o.addingImapConnection),e.R7$(),e.Y8G("ngIf",o.addingImapConnection))},dependencies:[u.YU,u.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,g.eY,g.W9,g.hB]}),a})();var w=l(7376);const L=()=>[];function X(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"span",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModals())}),e.nrm(3,"i",17),e.k0s(),e.nrm(4,"br"),e.j41(5,"div",18)(6,"div",19),e.EFF(7," Nombre del rol "),e.k0s(),e.j41(8,"div",20)(9,"input",21),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.modalRoleName,o)||(i.modalRoleName=o),e.Njj(o)}),e.k0s()()(),e.nrm(10,"br"),e.j41(11,"button",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.saveRole())}),e.EFF(12,"Crear"),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(9),e.R50("ngModel",t.modalRoleName)}}function H(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"div",23)(3,"span",24)(4,"i",25),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModals())}),e.k0s()(),e.j41(5,"span",24)(6,"i",26),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.deleteRole(o.activeRole))}),e.k0s()()(),e.nrm(7,"br"),e.j41(8,"div",18)(9,"div",19),e.EFF(10," Nuevo nombre del rol "),e.k0s(),e.j41(11,"div",20)(12,"input",21),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.modalRoleName,o)||(i.modalRoleName=o),e.Njj(o)}),e.k0s()()(),e.nrm(13,"br"),e.j41(14,"button",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.saveRole())}),e.EFF(15,"Guardar"),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(12),e.R50("ngModel",t.modalRoleName)}}function $(s,a){if(1&s&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name||t.email," ")}}function Y(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"span",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModals())}),e.nrm(3,"i",17),e.k0s(),e.nrm(4,"br"),e.j41(5,"div",5),e.EFF(6),e.k0s(),e.nrm(7,"br"),e.j41(8,"select",27),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.selectedUserId,o)||(i.selectedUserId=o),e.Njj(o)}),e.j41(9,"option",28),e.EFF(10,"Selecciona usuario"),e.k0s(),e.DNE(11,$,2,2,"option",29),e.k0s(),e.nrm(12,"br")(13,"br"),e.j41(14,"button",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.linkUser())}),e.EFF(15,"Agregar rol al usuario"),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(6),e.SpI("Vincular usuario al rol ",null==t.activeRole?null:t.activeRole.name,""),e.R7$(2),e.R50("ngModel",t.selectedUserId),e.R7$(3),e.Y8G("ngForOf",t.selectableUsers)}}function W(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35),e.nrm(4,"img",36),e.k0s(),e.j41(5,"div",37)(6,"div",38),e.EFF(7),e.k0s(),e.j41(8,"div",39),e.EFF(9),e.k0s()()(),e.j41(10,"div",40),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.unlinkUser(o))}),e.nrm(11,"i",41),e.k0s()(),e.nrm(12,"br"),e.k0s()}if(2&s){const t=a.$implicit;e.R7$(4),e.FS9("src",t.photoUrl,e.B4B),e.R7$(3),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.email," ")}}function K(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"span",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModals())}),e.nrm(3,"i",17),e.k0s(),e.nrm(4,"br"),e.j41(5,"div",5),e.EFF(6),e.k0s(),e.nrm(7,"br"),e.DNE(8,W,13,3,"div",31),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(6),e.SpI("Usuarios vinculados al rol ",null==t.activeRole?null:t.activeRole.name,""),e.R7$(2),e.Y8G("ngForOf",(null==t.activeRole?null:t.activeRole.users)||e.lJ4(2,L))}}function Q(s,a){if(1&s){const t=e.RV6();e.j41(0,"span",49),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,i=e.XpG();return e.Njj(i.openUsersLinkedToRoleModal(o))}),e.EFF(1),e.k0s()}if(2&s){const t=e.XpG().$implicit;e.R7$(),e.Lme("",null==t||null==t.users?null:t.users.length," Usuario",(null==t||null==t.users?null:t.users.length)>1?"s":"","")}}function J(s,a){if(1&s){const t=e.RV6();e.j41(0,"span")(1,"span",42),e.EFF(2),e.j41(3,"span",43),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.openEditRoleModal(o))}),e.nrm(4,"i",44),e.k0s()(),e.j41(5,"div",45),e.DNE(6,Q,2,2,"span",46),e.j41(7,"button",47),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.openLinkUserToRole(o))}),e.j41(8,"span",48),e.EFF(9,"\uff0b"),e.k0s()()()()}if(2&s){const t=a.$implicit;e.R7$(2),e.SpI(" ",t.name," "),e.R7$(4),e.Y8G("ngIf",(null==t||null==t.users?null:t.users.length)>0)}}function Z(s,a){1&s&&(e.j41(0,"div")(1,"div",50),e.nrm(2,"i",51),e.EFF(3," No hay roles creados, crea un rol para continuar "),e.k0s()())}function q(s,a){if(1&s&&(e.j41(0,"th",55),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function ee(s,a){if(1&s){const t=e.RV6();e.j41(0,"td",59)(1,"label",60)(2,"input",61),e.bIt("ngModelChange",function(o){const i=e.eBV(t).$implicit,r=e.XpG().$implicit,m=e.XpG(3);return e.Njj(m.onPermissionChange(o,i,r))}),e.k0s(),e.nrm(3,"span",62),e.k0s()()}if(2&s){const t=a.$implicit,n=e.XpG().$implicit;e.R7$(2),e.Y8G("ngModel",t[n])}}function te(s,a){if(1&s&&(e.j41(0,"tr")(1,"td",57),e.EFF(2),e.k0s(),e.DNE(3,ee,4,1,"td",58),e.k0s()),2&s){const t=a.$implicit,n=e.XpG(3);e.R7$(2),e.JRh(n.toHuman(t)),e.R7$(),e.Y8G("ngForOf",n.roles)}}function ne(s,a){if(1&s&&(e.qex(0),e.j41(1,"tr")(2,"td",56),e.EFF(3),e.k0s()(),e.DNE(4,te,4,2,"tr",11),e.bVm()),2&s){const t=a.$implicit;e.R7$(3),e.SpI(" ",t.title," "),e.R7$(),e.Y8G("ngForOf",t.keys)}}function oe(s,a){if(1&s&&(e.j41(0,"table",52)(1,"thead")(2,"tr"),e.nrm(3,"th",53),e.DNE(4,q,2,1,"th",54),e.k0s()(),e.j41(5,"tbody"),e.DNE(6,ne,5,2,"ng-container",11),e.k0s()()),2&s){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.roles),e.R7$(2),e.Y8G("ngForOf",t.permissionSections)}}let ie=(()=>{var s;class a{constructor(n){this.api=n,this.roles=[],this.usersInRole=[],this.selectableUsers=[],this.selectedUserId="",this.loading=!1,this.showCreateRoleModal=!1,this.showEditRoleModal=!1,this.showLinkUserToRoleModal=!1,this.showUsersLinkedToRoleModal=!1,this.modalRoleName="",this.permissionSections=[{title:"Contactos",keys:["contactsViewCreateEditOwn","contactsViewAll","contactsEditAll","contactsAssign","contactsAssignAgency","contactsCreateTags","contactsViewEditAllTags","contactsViewClientEmails","contactsDelete"],keys_es:{contactsViewCreateEditOwn:"Ver y editar contactos propios",contactsViewAll:"Ver todos los contactos",contactsEditAll:"Editar todos los contactos",contactsAssign:"Asignar contactos",contactsAssignAgency:"Asignar agencia a contacto",contactsCreateTags:"Crear etiquetas de contacto",contactsViewEditAllTags:"Ver y editar todas las etiquetas de contacto",contactsViewClientEmails:"Ver correos electr\xf3nicos de clientes",contactsDelete:"Eliminar contactos"}},{title:"Promociones",keys:["promotionsViewCreateEditOwn","promotionsViewAll","promotionsEditAll","promotionsAcceptInvitations","promotionsEditDeliveryDate","promotionsEditPaymentMethod","promotionsEditAgencyCommissions","promotionsEditCommissionPaymentMethod","promotionsEditRecords","promotionsAddFiles","promotionsModifyTables","promotionsBulkEditColumns","promotionsCreateTags","promotionsViewEditAllTags"],keys_es:{promotionsViewCreateEditOwn:"Ver y editar promociones propias",promotionsViewAll:"Ver todas las promociones",promotionsEditAll:"Editar todas las promociones",promotionsAcceptInvitations:"Aceptar invitaciones de promociones",promotionsEditDeliveryDate:"Editar fecha de entrega de promociones",promotionsEditPaymentMethod:"Editar m\xe9todo de pago de promociones",promotionsEditAgencyCommissions:"Editar comisiones de agencia de promociones",promotionsEditCommissionPaymentMethod:"Editar m\xe9todo de pago de comisiones de promociones",promotionsEditRecords:"Editar registros de promociones",promotionsAddFiles:"Agregar archivos a promociones",promotionsModifyTables:"Modificar tablas de promociones",promotionsBulkEditColumns:"Editar columnas en bloque de promociones",promotionsCreateTags:"Crear etiquetas de promoci\xf3n",promotionsViewEditAllTags:"Ver y editar todas las etiquetas de promoci\xf3n"}},{title:"Agencias",keys:["agenciesViewCollaborators","agenciesInviteNew","agenciesViewDocumentation","agenciesUploadEditDocuments"],keys_es:{agenciesViewCollaborators:"Ver colaboradores de agencias",agenciesInviteNew:"Invitar nuevas agencias",agenciesViewDocumentation:"Ver documentaci\xf3n de agencias",agenciesUploadEditDocuments:"Subir y editar documentos de agencias"}},{title:"Registros",keys:["recordsViewAll","recordsViewOwnPromotionRecords","recordsAcceptReject"],keys_es:{recordsViewAll:"Ver todos los registros",recordsViewOwnPromotionRecords:"Ver registros de promociones propias",recordsAcceptReject:"Aceptar o rechazar registros"}},{title:"Operaciones",keys:["operationsViewCreateEditOwn","operationsViewAll","operationsEditAll","operationsAssign","operationsDelete"],keys_es:{operationsViewCreateEditOwn:"Ver y editar operaciones propias",operationsViewAll:"Ver todas las operaciones",operationsEditAll:"Editar todas las operaciones",operationsAssign:"Asignar operaciones",operationsDelete:"Eliminar operaciones"}},{title:"Ventas",keys:["salesViewCreateEditOwn","salesFullAccess"],keys_es:{salesViewCreateEditOwn:"Ver y editar ventas propias",salesFullAccess:"Acceso completo a ventas"}},{title:"General",keys:["generalCreateEditUsers","generalCreateEditOffices","generalEditCompanyPage","generalEmailConfiguration"],keys_es:{generalCreateEditUsers:"Crear y editar usuarios",generalCreateEditOffices:"Crear y editar oficinas",generalEditCompanyPage:"Editar p\xe1gina de la empresa",generalEmailConfiguration:"Configuraci\xf3n de correo electr\xf3nico"}},{title:"Calendario",keys:["calendarViewAll","calendarManageAll","calendarDeleteEvents"],keys_es:{calendarViewAll:"Ver todos los eventos del calendario",calendarManageAll:"Gestionar todos los eventos del calendario",calendarDeleteEvents:"Eliminar eventos del calendario"}}]}ngOnInit(){var n=this;return(0,d.A)(function*(){n.getData()})()}getData(){var n=this;return(0,d.A)(function*(){yield n.loadRoles(),yield n.loadAllUsers()})()}loadRoles(){var n=this;return(0,d.A)(function*(){n.loading=!0;const o=yield n.api.getAccessRole({},{},{});n.loading=!1,console.log("AAAAAAAAAAAAAA"),n.roles=o.success.data})()}loadAllUsers(){var n=this;return(0,d.A)(function*(){const o=yield n.api.getUser({},{},{});n.selectableUsers=o.success.data})()}setActiveRole(n){this.activeRole=n,this.usersInRole=this.selectableUsers.filter(o=>o.accessRoleId===n.id)}createNewRole(){const o={id:void 0,name:this.modalRoleName,createdAt:void 0,updatedAt:void 0,...this.permissionSections.flatMap(i=>i.keys).reduce((i,r)=>({...i,[r]:!1}),{})};this.setActiveRole(o)}saveRole(){var n=this;return(0,d.A)(function*(){var o;if(n.loading=!0,null!==(o=n.activeRole)&&void 0!==o&&o.id){n.activeRole.name=n.modalRoleName;let i=w.cloneDeep(n.activeRole);delete i.users,yield n.api.updateAccessRoleById(n.activeRole.id,i)}else{n.createNewRole();const i=yield n.api.createAccessRole(n.activeRole);n.activeRole.id=i.success.data.id}n.loading=!1,n.closeModals(),n.getData()})()}onPermissionChange(n,o,i){var r=this;return(0,d.A)(function*(){o[i]=n;let m=w.cloneDeep(o);delete m.users,yield r.api.updateAccessRoleById(o.id,m)})()}linkUser(){var n=this;return(0,d.A)(function*(){var o;if(!n.selectedUserId||null===(o=n.activeRole)||void 0===o||!o.id)return;yield n.api.linkAccessRoleToUser(n.selectedUserId,n.activeRole.id);const i=n.selectableUsers.find(r=>r.id===n.selectedUserId);i.accessRoleId=n.activeRole.id,n.usersInRole.push(i),n.selectedUserId="",n.closeModals(),n.getData()})()}unlinkUser(n){var o=this;return(0,d.A)(function*(){var i;if(n.id&&null!==(i=o.activeRole)&&void 0!==i&&i.id){yield o.api.unlinkAccessRoleToUser(n.id,o.activeRole.id),o.getData();try{o.activeRole.users=o.activeRole.users.filter(r=>r.id!==n.id)}catch{}}})()}deleteRole(n){var o=this;return(0,d.A)(function*(){n.id&&(yield o.api.deleteAccessRoleById(n.id),o.closeModals(),o.getData())})()}toHuman(n){let o="";for(const r of this.permissionSections)if(r.keys.includes(n)){var i;o=(null===(i=r.keys_es)||void 0===i?void 0:i[n])||n;break}return o||n.replace(/([A-Z])/g," $1").replace(/^./,r=>r.toUpperCase())}openCreateRoleModal(){this.showCreateRoleModal=!0,this.modalRoleName=""}openEditRoleModal(n){this.showEditRoleModal=!0,this.modalRoleName=n.name,this.activeRole=n}openLinkUserToRole(n){this.showLinkUserToRoleModal=!0,this.activeRole=n}openUsersLinkedToRoleModal(n){this.showUsersLinkedToRoleModal=!0,this.activeRole=n}closeModals(){this.showCreateRoleModal=!1,this.showEditRoleModal=!1,this.showLinkUserToRoleModal=!1,this.showUsersLinkedToRoleModal=!1,this.activeRole={},this.modalRoleName=""}}return(s=a).\u0275fac=function(n){return new(n||s)(e.rXU(C.i))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-access-role"]],decls:22,vars:9,consts:[[3,"fullscreen","scrollY"],[1,"crm-block-content"],[1,"crm-block-body",2,"padding","20px"],["class","modal",4,"ngIf"],[1,"access-permissions"],[1,"crm-title"],[1,"roles-card"],[1,"roles-header"],[1,"links"],[2,"cursor","pointer",3,"click"],[1,"role-tabs"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","tasks-table",4,"ngIf"],[1,"modal"],[1,"modal-content"],[1,"crm-toast-close",3,"click"],[1,"fas","fa-times"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input","crm-input-input-error"],["type","text","placeholder","Nombre del rol",3,"ngModelChange","ngModel"],[1,"crm-button",3,"click"],[2,"display","flex","justify-content","space-between"],[1,"crm-toast-close"],[1,"fas","fa-times",3,"click"],[1,"fas","fa-trash",3,"click"],[2,"margin-right","6px","padding","2px 4px",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["style","width: 400px;overflow-y: auto;",4,"ngFor","ngForOf"],[2,"width","400px","overflow-y","auto"],[1,"crm-item-associated-user"],[1,"crm-item-associated-user-left"],[1,"crm-item-associated-user-left-image"],["alt","",3,"src"],[1,"crm-item-associated-user-left-info"],[1,"crm-item-associated-user-left-info-name"],[1,"crm-item-associated-user-left-info-email"],[1,"crm-item-associated-user-right",3,"click"],[1,"fas","fa-unlink"],[1,"tab",2,"width","120px!important"],[1,"edit-icon",3,"click"],[1,"fa-solid","fa-pencil",2,"cursor","pointer"],[1,"user-cell"],["class","user-pill crm-item-chip crm-item-chip-primary ng-star-inserted","style","margin: 0 4px; cursor: pointer","title","Desvincular",3,"click",4,"ngIf"],["title","Vincular",1,"icon-btn","sm",2,"margin-top","5px",3,"click"],[1,"plus"],["title","Desvincular",1,"user-pill","crm-item-chip","crm-item-chip-primary","ng-star-inserted",2,"margin","0 4px","cursor","pointer",3,"click"],[1,"crm-text"],[1,"fas","fa-exclamation-triangle"],[1,"tasks-table"],[1,"task-col"],["class","role-col","style","text-align: center",4,"ngFor","ngForOf"],[1,"role-col",2,"text-align","center"],[2,"background","#fafafa","font-weight","600","padding","6px 8px","border-top","1px solid #eee"],[1,"task-label"],["class","toggle-cell","style","text-align: center",4,"ngFor","ngForOf"],[1,"toggle-cell",2,"text-align","center"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"slider"]],template:function(n,o){1&n&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"div",2),e.DNE(3,X,13,1,"div",3)(4,H,16,1,"div",3)(5,Y,16,3,"div",3)(6,K,9,3,"div",3),e.j41(7,"div",4)(8,"div",5),e.EFF(9,"Roles"),e.k0s(),e.nrm(10,"br"),e.j41(11,"section",6)(12,"div",7)(13,"div",8)(14,"a",9),e.bIt("click",function(){return o.openCreateRoleModal()}),e.EFF(15,"Crear rol"),e.k0s()()(),e.j41(16,"div",10),e.DNE(17,J,10,2,"span",11),e.k0s()(),e.j41(18,"div",5),e.EFF(19,"Permisos"),e.k0s(),e.DNE(20,Z,4,0,"div",12)(21,oe,7,2,"table",13),e.k0s()()()()),2&n&&(e.Y8G("fullscreen",!0)("scrollY",!1),e.R7$(3),e.Y8G("ngIf",o.showCreateRoleModal),e.R7$(),e.Y8G("ngIf",o.showEditRoleModal),e.R7$(),e.Y8G("ngIf",o.showLinkUserToRoleModal),e.R7$(),e.Y8G("ngIf",o.showUsersLinkedToRoleModal),e.R7$(11),e.Y8G("ngForOf",o.roles),e.R7$(3),e.Y8G("ngIf",0===(null==o.roles?null:o.roles.length)),e.R7$(),e.Y8G("ngIf",(null==o.roles?null:o.roles.length)>0))},dependencies:[u.Sq,u.bT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.vS,g.W9],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{box-sizing:border-box}.access-permissions[_ngcontent-%COMP%]{font-family:Inter,Helvetica Neue,Arial,sans-serif;background:#f3f7fb;padding:16px 24px}.access-permissions[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin:0 0 24px;font-size:1.375rem;font-weight:600}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0d111b14;padding:20px;margin-bottom:40px;overflow-x:auto}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{font-size:.85rem}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#22caff;text-decoration:none;font-weight:500}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin:0 6px;color:#c5c5c5}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .role-tabs[_ngcontent-%COMP%]{display:flex;gap:22px;margin-top:14px}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .role-tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1 1 0;text-align:center;padding:8px;font-size:.9rem;line-height:1.8;border-radius:22px;background:#e6f7ff;color:#22caff;font-weight:500}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .employees-box[_ngcontent-%COMP%]{margin-top:18px;padding:14px;border:1px dashed #e5eef5;border-radius:6px;background:#f7fafc;display:flex;flex-wrap:wrap;gap:18px;align-items:flex-start}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .employees-box[_ngcontent-%COMP%]   .emp-label[_ngcontent-%COMP%]{font-size:.88rem;font-weight:600;color:#2e2e2e}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .employees-box[_ngcontent-%COMP%]   .role-users[_ngcontent-%COMP%]{flex:1 1 0;display:flex;gap:12px}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .employees-box[_ngcontent-%COMP%]   .role-users[_ngcontent-%COMP%]   .user-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .employees-box[_ngcontent-%COMP%]   .role-users[_ngcontent-%COMP%]   .user-cell[_ngcontent-%COMP%]   .user-pill[_ngcontent-%COMP%]{background:#e6f7ff;color:#22caff;font-size:.75rem;padding:2px 8px;border-radius:12px;font-weight:500}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;padding:0;border-radius:22px;background:#fff;border:1px solid #e5eef5;cursor:pointer;font-size:1.1rem;line-height:1}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#e6f7ff}.access-permissions[_ngcontent-%COMP%]   .roles-card[_ngcontent-%COMP%]   .icon-btn.sm[_ngcontent-%COMP%]{width:26px;height:26px;font-size:.95rem}.access-permissions[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1.125rem;font-weight:600}.access-permissions[_ngcontent-%COMP%]   .tasks-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #0d111b0d}.access-permissions[_ngcontent-%COMP%]   .tasks-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;padding:10px 16px;text-align:center;background:#f2f7fb;border-bottom:1px solid #e5eef5}.access-permissions[_ngcontent-%COMP%]   .tasks-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.task-col[_ngcontent-%COMP%]{text-align:left;width:55%}.access-permissions[_ngcontent-%COMP%]   .tasks-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#fafcfe}.access-permissions[_ngcontent-%COMP%]   .tasks-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 20px;border-bottom:1px solid #e5eef5;vertical-align:middle;font-size:.87rem}.access-permissions[_ngcontent-%COMP%]   .tasks-table[_ngcontent-%COMP%]   td.toggle-cell[_ngcontent-%COMP%]{width:120px;text-align:center}.access-permissions[_ngcontent-%COMP%]   .tasks-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:24px}.access-permissions[_ngcontent-%COMP%]   .tasks-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.access-permissions[_ngcontent-%COMP%]   .tasks-table[_ngcontent-%COMP%]   .task-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:4px;font-size:.85rem;color:#878787}.access-permissions[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:38px;height:20px}.access-permissions[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.access-permissions[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:#22caff}.access-permissions[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(18px)}.access-permissions[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;background:#d3d8de;border-radius:20px;transition:background .2s}.access-permissions[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{content:"";position:absolute;width:16px;height:16px;left:2px;top:2px;border-radius:50%;background:#fff;box-shadow:0 1px 2px #00000040;transition:transform .2s}.modal[_ngcontent-%COMP%]{z-index:100000000000000000000000000;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease-in-out,visibility .2s ease-in-out;background:#00000080}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:auto;padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 1px 3px #0d111b14}']}),a})();var se=l(1626),re=l(345);const P=["*"];function ae(s,a){if(1&s&&(e.qex(0),e.qSk(),e.j41(1,"svg"),e.nrm(2,"use"),e.k0s(),e.bVm()),2&s){const t=e.XpG();e.R7$(2),e.BMQ("href","assets/ae-icons/icons.svg#"+t.iconName)("href","assets/ae-icons/icons.svg#"+t.iconName,null,"xlink")}}function le(s,a){1&s&&e.SdG(0)}const ce=["labelButton"],de=s=>({"ae-expanded":s}),ue=(s,a)=>({selected:s,focused:a});function pe(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(o){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.optionSelect(i,o))}),e.EFF(1),e.k0s()}if(2&s){const t=a.$implicit,n=a.index,o=e.XpG();e.Y8G("ngClass",e.l_i(2,ue,t.value===o.value,n===o.optionId)),e.R7$(),e.SpI(" ",t.label," ")}}function me(s,a){1&s&&(e.j41(0,"span",7),e.EFF(1,"No items for select"),e.k0s())}const ge=["fileInput"];function _e(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",5)(1,"ae-select",37),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG(2);return e.DH7(i.customClassId,o)||(i.customClassId=o),e.Njj(o)}),e.bIt("change",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.setCustomClass(o.customClassId))}),e.k0s()()}if(2&s){const t=e.XpG(2);e.R7$(),e.Y8G("options",t.customClassList),e.R50("ngModel",t.customClassId),e.Y8G("disabled",t.htmlMode)("hidden",t.isButtonHidden("customClasses"))}}function he(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"button",6),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("undo"))}),e.k0s(),e.j41(3,"button",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("redo"))}),e.k0s()(),e.j41(4,"div",5)(5,"button",8),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("bold"))}),e.k0s(),e.j41(6,"button",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("italic"))}),e.k0s(),e.j41(7,"button",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("underline"))}),e.k0s(),e.j41(8,"button",11),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("strikeThrough"))}),e.k0s(),e.j41(9,"button",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("subscript"))}),e.k0s(),e.j41(10,"button",13),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("superscript"))}),e.k0s()(),e.j41(11,"div",5)(12,"button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("justifyLeft"))}),e.k0s(),e.j41(13,"button",15),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("justifyCenter"))}),e.k0s(),e.j41(14,"button",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("justifyRight"))}),e.k0s(),e.j41(15,"button",17),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("justifyFull"))}),e.k0s()(),e.j41(16,"div",5)(17,"button",18),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("indent"))}),e.k0s(),e.j41(18,"button",19),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("outdent"))}),e.k0s()(),e.j41(19,"div",5)(20,"button",20),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("insertUnorderedList"))}),e.k0s(),e.j41(21,"button",21),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("insertOrderedList"))}),e.k0s()(),e.j41(22,"div",5)(23,"ae-select",22),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.block,o)||(i.block=o),e.Njj(o)}),e.bIt("change",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand(o.block))}),e.k0s()(),e.j41(24,"div",5)(25,"ae-select",23),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.fontName,o)||(i.fontName=o),e.Njj(o)}),e.bIt("change",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.setFontName(o.fontName))}),e.k0s()(),e.j41(26,"div",5)(27,"ae-select",24),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.fontSize,o)||(i.fontSize=o),e.Njj(o)}),e.bIt("change",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.setFontSize(o.fontSize))}),e.k0s()(),e.j41(28,"div",5)(29,"input",25,0),e.bIt("change",function(){e.eBV(t);const o=e.sdS(30),i=e.XpG();return e.Njj(i.insertColor(o.value,"textColor"))}),e.k0s(),e.j41(31,"button",26),e.bIt("click",function(){e.eBV(t);const o=e.sdS(30);return e.XpG().focus(),e.Njj(o.click())}),e.k0s(),e.j41(32,"input",25,1),e.bIt("change",function(){e.eBV(t);const o=e.sdS(33),i=e.XpG();return e.Njj(i.insertColor(o.value,"backgroundColor"))}),e.k0s(),e.j41(34,"button",27),e.bIt("click",function(){e.eBV(t);const o=e.sdS(33);return e.XpG().focus(),e.Njj(o.click())}),e.k0s()(),e.DNE(35,_e,2,4,"div",28),e.j41(36,"div",5)(37,"button",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.insertUrl())}),e.k0s(),e.j41(38,"button",30),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("unlink"))}),e.k0s(),e.j41(39,"input",31,2),e.bIt("change",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.onFileChanged(o))}),e.k0s(),e.j41(41,"button",32),e.bIt("click",function(){e.eBV(t);const o=e.sdS(40);return e.XpG().focus(),e.Njj(o.click())}),e.k0s(),e.j41(42,"button",33),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.insertVideo())}),e.k0s(),e.j41(43,"button",34),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("insertHorizontalRule"))}),e.k0s()(),e.j41(44,"div",5)(45,"button",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("removeFormat"))}),e.k0s()(),e.j41(46,"div",5)(47,"button",36),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triggerCommand("toggleEditorMode"))}),e.k0s()(),e.SdG(48),e.k0s()}if(2&s){const t=e.XpG();e.R7$(2),e.Y8G("hidden",t.isButtonHidden("undo")),e.R7$(),e.Y8G("hidden",t.isButtonHidden("redo")),e.R7$(2),e.Y8G("id","bold-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("bold")),e.R7$(),e.Y8G("id","italic-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("italic")),e.R7$(),e.Y8G("id","underline-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("underline")),e.R7$(),e.Y8G("id","strikeThrough-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("strikeThrough")),e.R7$(),e.Y8G("id","subscript-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("subscript")),e.R7$(),e.Y8G("id","superscript-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("superscript")),e.R7$(2),e.Y8G("id","justifyLeft-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("justifyLeft")),e.R7$(),e.Y8G("id","justifyCenter-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("justifyCenter")),e.R7$(),e.Y8G("id","justifyRight-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("justifyRight")),e.R7$(),e.Y8G("id","justifyFull-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("justifyFull")),e.R7$(2),e.Y8G("id","indent-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("indent")),e.R7$(),e.Y8G("id","outdent-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("outdent")),e.R7$(2),e.Y8G("id","insertUnorderedList-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("insertUnorderedList")),e.R7$(),e.Y8G("id","insertOrderedList-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("insertOrderedList")),e.R7$(2),e.Y8G("options",t.headings),e.R50("ngModel",t.block),e.Y8G("disabled",t.htmlMode)("hidden",t.isButtonHidden("heading")),e.R7$(2),e.Y8G("options",t.fonts),e.R50("ngModel",t.fontName),e.Y8G("disabled",t.htmlMode)("hidden",t.isButtonHidden("fontName")),e.R7$(2),e.Y8G("options",t.fontSizes),e.R50("ngModel",t.fontSize),e.Y8G("disabled",t.htmlMode)("hidden",t.isButtonHidden("fontSize")),e.R7$(4),e.Y8G("id","foregroundColorPicker-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("textColor")),e.R7$(3),e.Y8G("id","backgroundColorPicker-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("backgroundColor")),e.R7$(),e.Y8G("ngIf",t._customClasses),e.R7$(2),e.Y8G("id","link-"+t.id)("disabled",t.isLinkButtonDisabled)("hidden",t.isButtonHidden("link")),e.R7$(),e.Y8G("id","unlink-"+t.id)("disabled",t.htmlMode||!t.linkSelected)("hidden",t.isButtonHidden("unlink")),e.R7$(3),e.Y8G("id","insertImage-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("insertImage")),e.R7$(),e.Y8G("id","insertVideo-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("insertVideo")),e.R7$(),e.Y8G("id","insertHorizontalRule-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("insertHorizontalRule")),e.R7$(2),e.Y8G("id","clearFormatting-"+t.id)("disabled",t.htmlMode)("hidden",t.isButtonHidden("removeFormat")),e.R7$(2),e.Y8G("id","toggleEditorMode-"+t.id)("hidden",t.isButtonHidden("toggleEditorMode"))}}const fe=["customButtons"],be=["editor"],Ce=["editorWrapper"],ve=["editorToolbar"],Me=s=>({bottom:s}),ke=s=>({executeCommandFn:s});let O=(()=>{class s{constructor(t,n){this.http=t,this.doc=n,this.saveSelection=()=>{if(this.doc.getSelection){const o=this.doc.getSelection();o.getRangeAt&&o.rangeCount&&(this.savedSelection=o.getRangeAt(0),this.selectedText=o.toString())}else this.savedSelection=this.doc.getSelection&&this.doc.createRange?document.createRange():null}}executeCommand(t,n){["h1","h2","h3","h4","h5","h6","p","pre"].includes(t)?this.doc.execCommand("formatBlock",!1,t):this.doc.execCommand(t,!1,n)}createLink(t){t.includes("http")?this.insertHtml('<a href="'+t+'" target="_blank">'+this.selectedText+"</a>"):this.doc.execCommand("createlink",!1,t)}insertColor(t,n){this.restoreSelection()&&this.doc.execCommand("textColor"===n?"foreColor":"hiliteColor",!1,t)}setFontName(t){this.doc.execCommand("fontName",!1,t)}setFontSize(t){this.doc.execCommand("fontSize",!1,t)}insertHtml(t){if(!this.doc.execCommand("insertHTML",!1,t))throw new Error("Unable to perform the operation")}restoreSelection(){if(!this.savedSelection)return!1;if(this.doc.getSelection){const t=this.doc.getSelection();return t.removeAllRanges(),t.addRange(this.savedSelection),!0}return!!this.doc.getSelection||void 0}executeInNextQueueIteration(t,n=100){setTimeout(t,n)}checkSelection(){if(0===this.savedSelection.toString().length)throw new Error("No Selection Made");return!0}uploadImage(t){const n=new FormData;return n.append("file",t,t.name),this.http.post(this.uploadUrl,n,{reportProgress:!0,observe:"events",withCredentials:this.uploadWithCredentials})}insertImage(t){this.doc.execCommand("insertImage",!1,t)}setDefaultParagraphSeparator(t){this.doc.execCommand("defaultParagraphSeparator",!1,t)}createCustomClass(t){let n=this.selectedText;if(t){const o=t.tag?t.tag:"span";n="<"+o+' class="'+t.class+'">'+this.selectedText+"</"+o+">"}this.insertHtml(n)}insertVideo(t){t.match("www.youtube.com")&&this.insertYouTubeVideoTag(t),t.match("vimeo.com")&&this.insertVimeoVideoTag(t)}insertYouTubeVideoTag(t){const o=`https://img.youtube.com/vi/${t.split("v=")[1]}/0.jpg`;this.insertHtml(`\n      <div style='position: relative'>\n        <a href='${t}' target='_blank'>\n          <img src="${o}" alt="click to watch"/>\n          <img style='position: absolute; left:200px; top:140px'\n          src="https://img.icons8.com/color/96/000000/youtube-play.png"/>\n        </a>\n      </div>`)}insertVimeoVideoTag(t){const n=this.http.get(`https://vimeo.com/api/oembed.json?url=${t}`).subscribe(o=>{this.insertHtml(`<div>\n        <a href='${t}' target='_blank'>\n          <img src="${o.thumbnail_url_with_play_button}" alt="${o.title}"/>\n        </a>\n      </div>`),n.unsubscribe()})}nextNode(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null}getRangeSelectedNodes(t,n){let o=t.startContainer;const i=t.endContainer;let r=[];if(o===i)r=[o];else{for(;o&&o!==i;)r.push(o=this.nextNode(o));for(o=t.startContainer;o&&o!==t.commonAncestorContainer;)r.unshift(o),o=o.parentNode}if(n)for(o=t.commonAncestorContainer;o;)r.push(o),o=o.parentNode;return r}getSelectedNodes(){const t=[];if(this.doc.getSelection){const n=this.doc.getSelection();for(let o=0,i=n.rangeCount;o<i;++o)t.push.apply(t,this.getRangeSelectedNodes(n.getRangeAt(o),!0))}return t}replaceWithOwnChildren(t){const n=t.parentNode;for(;t.hasChildNodes();)n.insertBefore(t.firstChild,t);n.removeChild(t)}removeSelectedElements(t){const n=t.toLowerCase().split(",");this.getSelectedNodes().forEach(o=>{1===o.nodeType&&n.indexOf(o.tagName.toLowerCase())>-1&&this.replaceWithOwnChildren(o)})}}return s.\u0275fac=function(t){return new(t||s)(e.KVO(se.Qq),e.KVO(u.qQ))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac}),s})();const A={editable:!0,spellcheck:!0,height:"auto",minHeight:"0",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!0,toolbarPosition:"top",outline:!0};function j(s){return null!=s}let xe=(()=>{class s{constructor(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["ae-toolbar-set"],["","aeToolbarSet",""]],hostAttrs:[1,"angular-editor-toolbar-set"],ngContentSelectors:P,decls:1,vars:0,template:function(t,n){1&t&&(e.NAR(),e.SdG(0))},styles:["a[_ngcontent-%COMP%]{cursor:pointer}.angular-editor-toolbar-set[_nghost-%COMP%]{display:flex;gap:1px;width:fit-content;vertical-align:baseline}"]}),s})(),Pe=(()=>{class s{constructor(){this.iconName=""}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["ae-button"],["button","aeButton",""]],hostAttrs:[1,"angular-editor-button"],hostVars:2,hostBindings:function(t,n){2&t&&e.Mr5("tabIndex",-1)("type","button")},inputs:{iconName:"iconName"},ngContentSelectors:P,decls:3,vars:2,consts:[["contentTemplate",""],[4,"ngIf","ngIfElse"]],template:function(t,n){if(1&t&&(e.NAR(),e.DNE(0,ae,3,2,"ng-container",1)(1,le,1,0,"ng-template",null,0,e.C5r)),2&t){const o=e.sdS(2);e.Y8G("ngIf",n.iconName)("ngIfElse",o)}},dependencies:[u.bT],styles:["a[_ngcontent-%COMP%]{cursor:pointer}.angular-editor-button[_nghost-%COMP%]{background-color:var(--ae-button-bg-color, white);vertical-align:middle;border:var(--ae-button-border, 1px solid #ddd);border-radius:var(--ae-button-radius, 4px);padding:.4rem;float:left;width:2rem;height:2rem}.angular-editor-button[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.angular-editor-button[_nghost-%COMP%]:hover{cursor:pointer;background-color:var(--ae-button-hover-bg-color, #f1f1f1);transition:.2s ease}.angular-editor-button[_nghost-%COMP%]:focus, .angular-editor-button.focus[_nghost-%COMP%]{outline:0}.angular-editor-button[_nghost-%COMP%]:disabled{background-color:var(--ae-button-disabled-bg-color, #f5f5f5);pointer-events:none;cursor:not-allowed}.angular-editor-button[_nghost-%COMP%]:disabled > .color-label[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}.angular-editor-button[_nghost-%COMP%]:disabled > .color-label.foreground[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background:#555555}.angular-editor-button[_nghost-%COMP%]:disabled > .color-label.background[_ngcontent-%COMP%]{background:#555555}.angular-editor-button.active[_nghost-%COMP%]{background:var(--ae-button-active-bg-color, #fffbd3)}.angular-editor-button.active[_nghost-%COMP%]:hover{background-color:var(--ae-button-active-hover-bg-color, #fffaad)}"]}),s})(),Oe=(()=>{class s{constructor(t,n){this.elRef=t,this.r=n,this.options=[],this.disabled=!1,this.optionId=0,this.opened=!1,this.hidden="inline-block",this.changeEvent=new e.bkB,this.onChange=()=>{},this.onTouched=()=>{}}get label(){return this.selectedOption&&this.selectedOption.hasOwnProperty("label")?this.selectedOption.label:"Select"}get value(){return this.selectedOption.value}ngOnInit(){this.selectedOption=this.options[0],j(this.isHidden)&&this.isHidden&&this.hide()}hide(){this.hidden="none"}optionSelect(t,n){n.stopPropagation(),this.setValue(t.value),this.onChange(this.selectedOption.value),this.changeEvent.emit(this.selectedOption.value),this.onTouched(),this.opened=!1}toggleOpen(t){this.disabled||(this.opened=!this.opened)}onClick(t){this.elRef.nativeElement.contains(t.target)||this.close()}close(){this.opened=!1}get isOpen(){return this.opened}writeValue(t){!t||"string"!=typeof t||this.setValue(t)}setValue(t){let n=0;const o=this.options.find((i,r)=>(n=r,i.value===t));o&&(this.selectedOption=o,this.optionId=n)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.labelButton.nativeElement.disabled=t,this.r[t?"addClass":"removeClass"](this.labelButton.nativeElement,"disabled"),this.disabled=t}handleKeyDown(t){if(this.opened)switch(t.key){case"ArrowDown":this._handleArrowDown(t);break;case"ArrowUp":this._handleArrowUp(t);break;case"Space":this._handleSpace(t);break;case"Enter":this._handleEnter(t);break;case"Tab":this._handleTab(t);break;case"Escape":this.close(),t.preventDefault();break;case"Backspace":this._handleBackspace()}}_handleArrowDown(t){this.optionId<this.options.length-1&&this.optionId++}_handleArrowUp(t){this.optionId>=1&&this.optionId--}_handleSpace(t){}_handleEnter(t){this.optionSelect(this.options[this.optionId],t)}_handleTab(t){}_handleBackspace(){}}return s.\u0275fac=function(t){return new(t||s)(e.rXU(e.aKT),e.rXU(e.sFG))},s.\u0275cmp=e.VBU({type:s,selectors:[["ae-select"]],viewQuery:function(t,n){if(1&t&&e.GBs(ce,7),2&t){let o;e.mGM(o=e.lsd())&&(n.labelButton=o.first)}},hostVars:2,hostBindings:function(t,n){1&t&&e.bIt("click",function(i){return n.onClick(i)},!1,e.EBC)("keydown",function(i){return n.handleKeyDown(i)}),2&t&&e.xc7("display",n.hidden)},inputs:{options:"options",isHidden:[0,"hidden","isHidden"]},outputs:{changeEvent:"change"},features:[e.Jv_([{provide:c.kq,useExisting:(0,e.Rfq)(()=>s),multi:!0}])],decls:9,vars:9,consts:[["labelButton",""],[1,"ae-picker",3,"ngClass"],["tabindex","-1","type","button","role","button",1,"ae-picker-label",3,"click","tabIndex"],[1,"ae-picker-options"],["tabindex","-1","type","button","role","button","class","ae-picker-item",3,"ngClass","click",4,"ngFor","ngForOf"],["class","dropdown-item",4,"ngIf"],["tabindex","-1","type","button","role","button",1,"ae-picker-item",3,"click","ngClass"],[1,"dropdown-item"]],template:function(t,n){if(1&t){const o=e.RV6();e.j41(0,"span",1)(1,"button",2,0),e.bIt("click",function(r){return e.eBV(o),e.Njj(n.toggleOpen(r))}),e.EFF(3),e.qSk(),e.j41(4,"svg"),e.nrm(5,"use"),e.k0s()(),e.joV(),e.j41(6,"span",3),e.DNE(7,pe,2,5,"button",4)(8,me,2,0,"span",5),e.k0s()()}2&t&&(e.Y8G("ngClass",e.eq3(7,de,n.isOpen)),e.R7$(),e.Y8G("tabIndex",-1),e.R7$(2),e.SpI("",n.label," "),e.R7$(2),e.BMQ("href","assets/ae-icons/icons.svg#sort")("href","assets/ae-icons/icons.svg#sort",null,"xlink"),e.R7$(2),e.Y8G("ngForOf",n.options),e.R7$(),e.Y8G("ngIf",!n.options.length))},dependencies:[u.YU,u.Sq,u.bT],styles:['a[_ngcontent-%COMP%]{cursor:pointer}svg[_ngcontent-%COMP%]{width:100%;height:100%}.ae-picker[_ngcontent-%COMP%]{color:var(--ae-picker-color, #444);display:inline-block;float:left;width:100%;position:relative;vertical-align:middle}.ae-picker-label[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;padding-left:8px;padding-right:10px;position:relative;width:100%;line-height:1.8rem;vertical-align:middle;font-size:85%;text-align:left;background-color:var(--ae-picker-label-color, white);min-width:2rem;float:left;border:1px solid #ddd;border-radius:var(--ae-button-radius, 4px);text-overflow:clip;overflow:hidden;white-space:nowrap;height:2rem}.ae-picker-label[_ngcontent-%COMP%]:before{content:"";position:absolute;right:0;top:0;width:20px;height:100%;background:linear-gradient(to right,var(--ae-picker-label-color, white),var(--ae-picker-label-color, white) 100%)}.ae-picker-label[_ngcontent-%COMP%]:focus{outline:none}.ae-picker-label[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f1f1f1;transition:.2s ease}.ae-picker-label[_ngcontent-%COMP%]:hover:before{background:linear-gradient(to right,#f5f5f5 100%,#ffffff 100%)}.ae-picker-label[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;pointer-events:none;cursor:not-allowed}.ae-picker-label[_ngcontent-%COMP%]:disabled:before{background:linear-gradient(to right,#f5f5f5 100%,#ffffff 100%)}.ae-picker-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;right:0;width:1rem}.ae-picker-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:not(:root){overflow:hidden}.ae-picker-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .ae-stroke[_ngcontent-%COMP%]{fill:none;stroke:#444;stroke-linecap:round;stroke-linejoin:round;stroke-width:2}.ae-picker-options[_ngcontent-%COMP%]{background-color:var(--ae-picker-option-bg-color, #fff);display:none;min-width:100%;position:absolute;white-space:nowrap;z-index:3;border:1px solid transparent;box-shadow:#0003 0 2px 8px}.ae-picker-options[_ngcontent-%COMP%]   .ae-picker-item[_ngcontent-%COMP%]{cursor:pointer;display:block;padding-bottom:5px;padding-top:5px;padding-left:5px;z-index:3;text-align:left;background-color:transparent;min-width:2rem;width:100%;border:0 solid #ddd}.ae-picker-options[_ngcontent-%COMP%]   .ae-picker-item.selected[_ngcontent-%COMP%]{color:#06c;background-color:var(--ae-picker-option-active-bg-color, #fff4c2)}.ae-picker-options[_ngcontent-%COMP%]   .ae-picker-item.focused[_ngcontent-%COMP%]{background-color:var(--ae-picker-option-focused-bg-color, #fbf9b0)}.ae-picker-options[_ngcontent-%COMP%]   .ae-picker-item[_ngcontent-%COMP%]:hover{background-color:var(--ae-picker-option-hover-bg-color, #fffa98)}.ae-expanded[_ngcontent-%COMP%]{display:block;margin-top:-1px;z-index:1}.ae-expanded[_ngcontent-%COMP%]   .ae-picker-label[_ngcontent-%COMP%]{color:#ccc;z-index:2}.ae-expanded[_ngcontent-%COMP%]   .ae-picker-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ccc;z-index:2}.ae-expanded[_ngcontent-%COMP%]   .ae-picker-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .ae-stroke[_ngcontent-%COMP%]{stroke:#ccc}.ae-expanded[_ngcontent-%COMP%]   .ae-picker-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:-1px;top:100%;z-index:3;border-color:#ccc}']}),s})(),Ae=(()=>{class s{constructor(t,n,o,i){this.r=t,this.editorService=n,this.er=o,this.doc=i,this.htmlMode=!1,this.linkSelected=!1,this.block="default",this.fontName="Times New Roman",this.fontSize="3",this.headings=[{label:"Heading 1",value:"h1"},{label:"Heading 2",value:"h2"},{label:"Heading 3",value:"h3"},{label:"Heading 4",value:"h4"},{label:"Heading 5",value:"h5"},{label:"Heading 6",value:"h6"},{label:"Heading 7",value:"h7"},{label:"Paragraph",value:"p"},{label:"Predefined",value:"pre"},{label:"Standard",value:"div"},{label:"default",value:"default"}],this.fontSizes=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"}],this.customClassId="-1",this.customClassList=[{label:"",value:""}],this.tagMap={BLOCKQUOTE:"indent",A:"link"},this.select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"],this.buttons=["bold","italic","underline","strikeThrough","subscript","superscript","justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent","insertUnorderedList","insertOrderedList","link"],this.fonts=[{label:"",value:""}],this.execute=new e.bkB}set customClasses(t){t&&(this._customClasses=t,this.customClassList=this._customClasses.map((n,o)=>({label:n.name,value:o.toString()})),this.customClassList.unshift({label:"Clear Class",value:"-1"}))}set defaultFontName(t){t&&(this.fontName=t)}set defaultFontSize(t){t&&(this.fontSize=t)}get isLinkButtonDisabled(){return this.htmlMode||!this.editorService.selectedText}triggerCommand(t){this.execute.emit(t)}triggerButtons(){this.showToolbar&&this.buttons.forEach(t=>{const n=this.doc.queryCommandState(t),o=this.doc.getElementById(t+"-"+this.id);n?this.r.addClass(o,"active"):this.r.removeClass(o,"active")})}triggerBlocks(t){if(!this.showToolbar)return;this.linkSelected=t.findIndex(o=>"A"===o.nodeName)>-1;let n=!1;this.select.forEach(o=>{const i=t.find(r=>r.nodeName===o);void 0!==i&&o===i.nodeName?!1===n&&(this.block=i.nodeName.toLowerCase(),n=!0):!1===n&&(this.block="default")}),n=!1,this._customClasses&&this._customClasses.forEach((o,i)=>{void 0!==t.find(m=>{if(m instanceof Element)return m.className===o.class})?!1===n&&(this.customClassId=i.toString(),n=!0):!1===n&&(this.customClassId="-1")}),Object.keys(this.tagMap).map(o=>{const i=this.doc.getElementById(this.tagMap[o]+"-"+this.id),r=t.find(m=>m.nodeName===o);void 0!==r&&o===r.nodeName?this.r.addClass(i,"active"):this.r.removeClass(i,"active")}),this.foreColour=this.doc.queryCommandValue("ForeColor"),this.fontSize=this.doc.queryCommandValue("FontSize"),this.fontName=this.doc.queryCommandValue("FontName").replace(/"/g,""),this.backColor=this.doc.queryCommandValue("backColor")}insertUrl(){let t="https://";const n=this.editorService.savedSelection;if(n&&"A"===n.commonAncestorContainer.parentElement.nodeName){const o=n.commonAncestorContainer.parentElement;""!==o.href&&(t=o.href)}t=prompt("Insert URL link",t),t&&""!==t&&"https://"!==t&&this.editorService.createLink(t)}insertVideo(){this.execute.emit("");const t=prompt("Insert Video link","https://");t&&""!==t&&"https://"!==t&&this.editorService.insertVideo(t)}insertColor(t,n){this.editorService.insertColor(t,n),this.execute.emit("")}setFontName(t){this.editorService.setFontName(t),this.execute.emit("")}setFontSize(t){this.editorService.setFontSize(t),this.execute.emit("")}setEditorMode(t){const n=this.doc.getElementById("toggleEditorMode-"+this.id);t?this.r.addClass(n,"active"):this.r.removeClass(n,"active"),this.htmlMode=t}onFileChanged(t){const n=t.target.files[0];if(n.type.includes("image/"))if(this.upload)this.upload(n).subscribe(o=>this.watchUploadImage(o,t));else if(this.uploadUrl)this.editorService.uploadImage(n).subscribe(o=>this.watchUploadImage(o,t));else{const o=new FileReader;o.onload=i=>{this.editorService.insertImage(i.currentTarget.result.toString())},o.readAsDataURL(n)}}watchUploadImage(t,n){const{imageUrl:o}=t.body;this.editorService.insertImage(o),n.srcElement.value=null}setCustomClass(t){"-1"===t?this.execute.emit("clear"):this.editorService.createCustomClass(this._customClasses[+t])}isButtonHidden(t){if(!(t&&this.hiddenButtons instanceof Array))return!1;let n;for(const o of this.hiddenButtons)if(o instanceof Array&&(n=o.find(i=>i===t)),n)break;return void 0!==n}focus(){this.execute.emit("focus"),console.log("focused")}}return s.\u0275fac=function(t){return new(t||s)(e.rXU(e.sFG),e.rXU(O),e.rXU(e.aKT),e.rXU(u.qQ))},s.\u0275cmp=e.VBU({type:s,selectors:[["angular-editor-toolbar"],["ae-toolbar"],["div","aeToolbar",""]],viewQuery:function(t,n){if(1&t&&e.GBs(ge,7),2&t){let o;e.mGM(o=e.lsd())&&(n.myInputFile=o.first)}},inputs:{id:"id",uploadUrl:"uploadUrl",upload:"upload",showToolbar:"showToolbar",fonts:"fonts",customClasses:"customClasses",defaultFontName:"defaultFontName",defaultFontSize:"defaultFontSize",hiddenButtons:"hiddenButtons"},outputs:{execute:"execute"},ngContentSelectors:P,decls:1,vars:1,consts:[["fgInput",""],["bgInput",""],["fileInput",""],["class","angular-editor-toolbar",4,"ngIf"],[1,"angular-editor-toolbar"],["aeToolbarSet",""],["aeButton","","title","Undo","iconName","undo",3,"click","hidden"],["aeButton","","title","Redo","iconName","redo",3,"click","hidden"],["aeButton","","title","Bold","iconName","bold",3,"click","id","disabled","hidden"],["aeButton","","iconName","italic","title","Italic",3,"click","id","disabled","hidden"],["aeButton","","title","Underline","iconName","underline",3,"click","id","disabled","hidden"],["aeButton","","iconName","strikeThrough","title","Strikethrough",3,"click","id","disabled","hidden"],["aeButton","","title","Subscript","iconName","subscript",3,"click","id","disabled","hidden"],["aeButton","","iconName","superscript","title","Superscript",3,"click","id","disabled","hidden"],["aeButton","","iconName","justifyLeft","title","Justify Left",3,"click","id","disabled","hidden"],["aeButton","","iconName","justifyCenter","title","Justify Center",3,"click","id","disabled","hidden"],["aeButton","","iconName","justifyRight","title","Justify Right",3,"click","id","disabled","hidden"],["aeButton","","iconName","justifyFull","title","Justify Full",3,"click","id","disabled","hidden"],["aeButton","","iconName","indent","title","Indent",3,"click","id","disabled","hidden"],["aeButton","","iconName","outdent","title","Outdent",3,"click","id","disabled","hidden"],["aeButton","","iconName","unorderedList","title","Unordered List",3,"click","id","disabled","hidden"],["aeButton","","iconName","orderedList","title","Ordered List",3,"click","id","disabled","hidden"],["tabindex","-1",1,"select-heading",3,"ngModelChange","change","options","ngModel","disabled","hidden"],["tabindex","-1",1,"select-font",3,"ngModelChange","change","options","ngModel","disabled","hidden"],["tabindex","-1",1,"select-font-size",3,"ngModelChange","change","options","ngModel","disabled","hidden"],["type","color",2,"display","none",3,"change"],["aeButton","","iconName","textColor","title","Text Color",3,"click","id","disabled","hidden"],["aeButton","","iconName","backgroundColor","title","Background Color",3,"click","id","disabled","hidden"],["aeToolbarSet","",4,"ngIf"],["aeButton","","iconName","link","title","Insert Link",3,"click","id","disabled","hidden"],["aeButton","","iconName","unlink","title","Unlink",3,"click","id","disabled","hidden"],["accept","image/*","type","file",2,"display","none",3,"change"],["aeButton","","iconName","image","title","Insert Image",3,"click","id","disabled","hidden"],["aeButton","","iconName","video","title","Insert Video",3,"click","id","disabled","hidden"],["aeButton","","iconName","horizontalLine","title","Horizontal Line",3,"click","id","disabled","hidden"],["aeButton","","iconName","removeFormat","title","Clear Formatting",1,"angular-editor-button",3,"click","id","disabled","hidden"],["aeButton","","iconName","htmlCode","title","HTML Code",3,"click","id","hidden"],["tabindex","-1",1,"select-custom-style",3,"ngModelChange","change","options","ngModel","disabled","hidden"]],template:function(t,n){1&t&&(e.NAR(),e.DNE(0,he,49,83,"div",3)),2&t&&e.Y8G("ngIf",n.showToolbar)},dependencies:[xe,Pe,Oe,u.bT,c.BC,c.vS],styles:['a[_ngcontent-%COMP%]{cursor:pointer}.angular-editor-toolbar[_ngcontent-%COMP%]{font:100 14px/15px Roboto,Arial,sans-serif;background-color:var(--ae-toolbar-bg-color, #f5f5f5);font-size:.8rem;padding:var(--ae-toolbar-padding, .2rem);border:var(--ae-toolbar-border-radius, 1px solid #ddd);display:flex;flex-wrap:wrap;gap:4px}.select-heading[_ngcontent-%COMP%]{display:inline-block;width:90px}@supports not (-moz-appearance: none){.select-heading[_ngcontent-%COMP%]   optgroup[_ngcontent-%COMP%]{font-size:12px;background-color:#f4f4f4;padding:5px}.select-heading[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{border:1px solid;background-color:#fff}.select-heading[_ngcontent-%COMP%]   .default[_ngcontent-%COMP%]{font-size:16px}.select-heading[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:24px}.select-heading[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}.select-heading[_ngcontent-%COMP%]   .h3[_ngcontent-%COMP%]{font-size:16px}.select-heading[_ngcontent-%COMP%]   .h4[_ngcontent-%COMP%]{font-size:15px}.select-heading[_ngcontent-%COMP%]   .h5[_ngcontent-%COMP%]{font-size:14px}.select-heading[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%]{font-size:13px}.select-heading[_ngcontent-%COMP%]   .div[_ngcontent-%COMP%], .select-heading[_ngcontent-%COMP%]   .pre[_ngcontent-%COMP%]{font-size:12px}}.select-heading[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;pointer-events:none;cursor:not-allowed}.select-heading[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f1f1f1;transition:.2s ease}.select-font[_ngcontent-%COMP%]{display:inline-block;width:90px}@supports not (-moz-appearance: none){.select-font[_ngcontent-%COMP%]   optgroup[_ngcontent-%COMP%]{font-size:12px;background-color:#f4f4f4;padding:5px}.select-font[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{border:1px solid;background-color:#fff}}.select-font[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;pointer-events:none;cursor:not-allowed}.select-font[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f1f1f1;transition:.2s ease}.select-font-size[_ngcontent-%COMP%]{display:inline-block;width:50px}@supports not (-moz-appearance: none){.select-font-size[_ngcontent-%COMP%]   optgroup[_ngcontent-%COMP%]{font-size:12px;background-color:#f4f4f4;padding:5px}.select-font-size[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{border:1px solid;background-color:#fff}.select-font-size[_ngcontent-%COMP%]   .size1[_ngcontent-%COMP%]{font-size:10px}.select-font-size[_ngcontent-%COMP%]   .size2[_ngcontent-%COMP%]{font-size:12px}.select-font-size[_ngcontent-%COMP%]   .size3[_ngcontent-%COMP%]{font-size:14px}.select-font-size[_ngcontent-%COMP%]   .size4[_ngcontent-%COMP%]{font-size:16px}.select-font-size[_ngcontent-%COMP%]   .size5[_ngcontent-%COMP%]{font-size:18px}.select-font-size[_ngcontent-%COMP%]   .size6[_ngcontent-%COMP%]{font-size:20px}.select-font-size[_ngcontent-%COMP%]   .size7[_ngcontent-%COMP%]{font-size:22px}}.select-font-size[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;pointer-events:none;cursor:not-allowed}.select-font-size[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f1f1f1;transition:.2s ease}.select-custom-style[_ngcontent-%COMP%]{display:inline-block;width:90px}@supports not (-moz-appearance: none){.select-custom-style[_ngcontent-%COMP%]   optgroup[_ngcontent-%COMP%]{font-size:12px;background-color:#f4f4f4;padding:5px}.select-custom-style[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{border:1px solid;background-color:#fff}}.select-custom-style[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;pointer-events:none;cursor:not-allowed}.select-custom-style[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f1f1f1;transition:.2s ease}.color-label[_ngcontent-%COMP%]{position:relative;cursor:pointer}.background[_ngcontent-%COMP%]{font-size:smaller;background:#1b1b1b;color:#fff;padding:3px}.foreground[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{position:absolute;content:"";inset:auto auto -3px -1px;width:15px;height:2px;z-index:0;background:#1b1b1b}']}),s})(),Te=(()=>{class s{constructor(t,n,o,i,r,m,h){this.r=t,this.editorService=n,this.doc=o,this.sanitizer=i,this.cdRef=r,this.autoFocus=h,this.modeVisual=!0,this.showPlaceholder=!1,this.disabled=!1,this.focused=!1,this.touched=!1,this.changed=!1,this.id="",this.config=A,this.placeholder="",this.executeCommandFn=this.executeCommand.bind(this),this.viewMode=new e.bkB,this.blurEvent=new e.bkB,this.focusEvent=new e.bkB,this.tabindex=-1;const v=Number(m);this.tabIndex=v||0===v?v:null}onFocus(){this.focus()}ngOnInit(){this.config.toolbarPosition=this.config.toolbarPosition?this.config.toolbarPosition:A.toolbarPosition}ngAfterViewInit(){j(this.autoFocus)&&this.focus()}onPaste(t){if(this.config.rawPaste){t.preventDefault();const n=t.clipboardData.getData("text/plain");return document.execCommand("insertHTML",!1,n),n}}executeCommand(t,n){this.focus(),"focus"!==t&&("toggleEditorMode"===t?this.toggleEditorMode(this.modeVisual):""!==t&&("clear"===t?(this.editorService.removeSelectedElements(this.getCustomTags()),this.onContentChange(this.textArea.nativeElement)):"default"===t?(this.editorService.removeSelectedElements("h1,h2,h3,h4,h5,h6,p,pre"),this.onContentChange(this.textArea.nativeElement)):this.editorService.executeCommand(t,n),this.exec()))}onTextAreaFocus(t){this.focused?t.stopPropagation():(this.focused=!0,this.focusEvent.emit(t),(!this.touched||!this.changed)&&this.editorService.executeInNextQueueIteration(()=>{this.configure(),this.touched=!0}))}onTextAreaMouseOut(t){this.editorService.saveSelection()}onTextAreaBlur(t){if(this.editorService.executeInNextQueueIteration(this.editorService.saveSelection),"function"==typeof this.onTouched&&this.onTouched(),null!==t.relatedTarget){const n=t.relatedTarget.parentElement;!n.classList.contains("angular-editor-toolbar-set")&&!n.classList.contains("ae-picker")&&(this.blurEvent.emit(t),this.focused=!1)}}focus(){this.modeVisual?this.textArea.nativeElement.focus():(this.doc.getElementById("sourceText"+this.id).focus(),this.focused=!0)}onContentChange(t){let n="";n=this.modeVisual?t.innerHTML:t.innerText,(!n||"<br>"===n)&&(n=""),"function"==typeof this.onChange&&(this.onChange(this.config.sanitize||void 0===this.config.sanitize?this.sanitizer.sanitize(e.WPN.HTML,n):n),!n!==this.showPlaceholder&&this.togglePlaceholder(this.showPlaceholder)),this.changed=!0}registerOnChange(t){this.onChange=n=>t("<br>"===n?"":n)}registerOnTouched(t){this.onTouched=t}writeValue(t){(!t||"<br>"===t||""===t)!==this.showPlaceholder&&this.togglePlaceholder(this.showPlaceholder),(void 0===t||""===t||"<br>"===t)&&(t=null),this.refreshView(t)}refreshView(t){this.r.setProperty(this.textArea.nativeElement,"innerHTML",null===t?"":t)}togglePlaceholder(t){t?(this.r.removeClass(this.editorWrapper.nativeElement,"show-placeholder"),this.showPlaceholder=!1):(this.r.addClass(this.editorWrapper.nativeElement,"show-placeholder"),this.showPlaceholder=!0)}setDisabledState(t){this.r[t?"addClass":"removeClass"](this.textArea.nativeElement,"disabled"),this.disabled=t}toggleEditorMode(t){let n;const o=this.textArea.nativeElement;if(t){n=this.r.createText(o.innerHTML),this.r.setProperty(o,"innerHTML",""),this.r.setProperty(o,"contentEditable",!1);const i=this.r.createElement("pre");this.r.setStyle(i,"margin","0"),this.r.setStyle(i,"outline","none");const r=this.r.createElement("code");this.r.setProperty(r,"id","sourceText"+this.id),this.r.setStyle(r,"display","block"),this.r.setStyle(r,"white-space","pre-wrap"),this.r.setStyle(r,"word-break","keep-all"),this.r.setStyle(r,"outline","none"),this.r.setStyle(r,"margin","0"),this.r.setStyle(r,"background-color","#fff5b9"),this.r.setProperty(r,"contentEditable",!0),this.r.appendChild(r,n),this.focusInstance=this.r.listen(r,"focus",m=>this.onTextAreaFocus(m)),this.blurInstance=this.r.listen(r,"blur",m=>this.onTextAreaBlur(m)),this.r.appendChild(i,r),this.r.appendChild(o,i),this.doc.execCommand("defaultParagraphSeparator",!1,"div"),this.modeVisual=!1,this.viewMode.emit(!1),r.focus()}else this.doc.querySelectorAll?this.r.setProperty(o,"innerHTML",o.innerText):(n=this.doc.createRange(),n.selectNodeContents(o.firstChild),this.r.setProperty(o,"innerHTML",n.toString())),this.r.setProperty(o,"contentEditable",!0),this.modeVisual=!0,this.viewMode.emit(!0),this.onContentChange(o),o.focus();this.editorToolbar.setEditorMode(!this.modeVisual)}exec(){let t;this.editorToolbar.triggerButtons(),this.doc.getSelection&&(t=this.doc.getSelection(),this.editorService.executeInNextQueueIteration(this.editorService.saveSelection));let n=t.focusNode;const o=[];for(;n&&"editor"!==n.id;)o.unshift(n),n=n.parentNode;this.editorToolbar.triggerBlocks(o)}configure(){this.editorService.uploadUrl=this.config.uploadUrl,this.editorService.uploadWithCredentials=this.config.uploadWithCredentials,this.config.defaultParagraphSeparator&&this.editorService.setDefaultParagraphSeparator(this.config.defaultParagraphSeparator),this.config.defaultFontName&&this.editorService.setFontName(this.config.defaultFontName),this.config.defaultFontSize&&this.editorService.setFontSize(this.config.defaultFontSize)}getFonts(){return(this.config.fonts?this.config.fonts:A.fonts).map(n=>({label:n.name,value:n.name}))}getCustomTags(){const t=["span"];return this.config.customClasses.forEach(n=>{void 0!==n.tag&&(t.includes(n.tag)||t.push(n.tag))}),t.join(",")}ngOnDestroy(){this.blurInstance&&this.blurInstance(),this.focusInstance&&this.focusInstance()}filterStyles(t){return t.replace("position: fixed;","")}}return s.\u0275fac=function(t){return new(t||s)(e.rXU(e.sFG),e.rXU(O),e.rXU(u.qQ),e.rXU(re.up),e.rXU(e.gRc),e.kS0("tabindex"),e.kS0("autofocus"))},s.\u0275cmp=e.VBU({type:s,selectors:[["angular-editor"]],contentQueries:function(t,n,o){if(1&t&&e.wni(o,fe,5),2&t){let i;e.mGM(i=e.lsd())&&(n.customButtonsTemplateRef=i.first)}},viewQuery:function(t,n){if(1&t&&(e.GBs(be,7),e.GBs(Ce,7),e.GBs(ve,5)),2&t){let o;e.mGM(o=e.lsd())&&(n.textArea=o.first),e.mGM(o=e.lsd())&&(n.editorWrapper=o.first),e.mGM(o=e.lsd())&&(n.editorToolbar=o.first)}},hostVars:1,hostBindings:function(t,n){1&t&&e.bIt("focus",function(){return n.onFocus()}),2&t&&e.BMQ("tabindex",n.tabindex)},inputs:{id:"id",config:"config",placeholder:"placeholder",tabIndex:"tabIndex"},outputs:{html:"html",viewMode:"viewMode",blurEvent:"blur",focusEvent:"focus"},features:[e.Jv_([{provide:c.kq,useExisting:(0,e.Rfq)(()=>s),multi:!0},O])],decls:11,vars:33,consts:[["angularEditor",""],["editorToolbar",""],["editorWrapper",""],["editor",""],[1,"angular-editor",3,"ngClass"],[3,"execute","id","uploadUrl","upload","showToolbar","fonts","customClasses","defaultFontName","defaultFontSize","hiddenButtons"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"angular-editor-wrapper"],[1,"angular-editor-textarea",3,"input","focus","blur","click","keyup","mouseout","paste"],[1,"angular-editor-placeholder"]],template:function(t,n){if(1&t){const o=e.RV6();e.j41(0,"div",4,0)(2,"angular-editor-toolbar",5,1),e.bIt("execute",function(r){return e.eBV(o),e.Njj(n.executeCommand(r))}),e.eu8(4,6),e.k0s(),e.j41(5,"div",7,2)(7,"div",8,3),e.bIt("input",function(r){return e.eBV(o),e.Njj(n.onContentChange(r.target))})("focus",function(r){return e.eBV(o),e.Njj(n.onTextAreaFocus(r))})("blur",function(r){return e.eBV(o),e.Njj(n.onTextAreaBlur(r))})("click",function(){return e.eBV(o),e.Njj(n.exec())})("keyup",function(){return e.eBV(o),e.Njj(n.exec())})("mouseout",function(r){return e.eBV(o),e.Njj(n.onTextAreaMouseOut(r))})("paste",function(r){return e.eBV(o),e.Njj(n.onPaste(r))}),e.k0s(),e.j41(9,"span",9),e.EFF(10),e.k0s()()()}2&t&&(e.xc7("width",n.config.width)("min-width",n.config.minWidth),e.Y8G("ngClass",e.eq3(29,Me,"bottom"===n.config.toolbarPosition)),e.R7$(2),e.Y8G("id",n.id)("uploadUrl",n.config.uploadUrl)("upload",n.config.upload)("showToolbar",void 0===n.config.showToolbar||n.config.showToolbar)("fonts",n.getFonts())("customClasses",n.config.customClasses)("defaultFontName",n.config.defaultFontName)("defaultFontSize",n.config.defaultFontSize)("hiddenButtons",n.config.toolbarHiddenButtons),e.R7$(2),e.Y8G("ngTemplateOutlet",n.customButtonsTemplateRef)("ngTemplateOutletContext",e.eq3(31,ke,n.executeCommandFn)),e.R7$(3),e.xc7("height",n.config.height)("min-height",n.config.minHeight)("max-height",n.config.maxHeight)("outline",!1===n.config.outline?"none":void 0),e.BMQ("contenteditable",n.config.editable)("tabindex",n.disabled?-1:n.tabIndex)("translate",n.config.translate)("spellcheck",n.config.spellcheck),e.R7$(3),e.JRh(n.placeholder||n.config.placeholder))},dependencies:[Ae,u.YU,u.T3],styles:['a[_ngcontent-%COMP%]{cursor:pointer}.angular-editor[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--ae-gap, 5px)}.angular-editor.bottom[_ngcontent-%COMP%]{flex-direction:column-reverse}.angular-editor[_ngcontent-%COMP%]     [contenteditable=true]:empty:before{content:attr(placeholder);color:#868e96;opacity:1}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper[_ngcontent-%COMP%]{position:relative}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper[_ngcontent-%COMP%]   .angular-editor-textarea[_ngcontent-%COMP%]{min-height:150px;overflow:auto;resize:vertical}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper[_ngcontent-%COMP%]   .angular-editor-textarea[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;right:0;display:block;width:8px;height:8px;cursor:nwse-resize;background-color:#ffffff80}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper[_ngcontent-%COMP%]   .angular-editor-textarea[_ngcontent-%COMP%]{min-height:5rem;padding:.5rem .8rem 1rem;border-radius:var(--ae-text-area-border-radius, .3rem);border:var(--ae-text-area-border, 1px solid #ddd);background-color:transparent;overflow-x:hidden;overflow-y:auto;position:relative}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper[_ngcontent-%COMP%]   .angular-editor-textarea[_ngcontent-%COMP%]:focus, .angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper[_ngcontent-%COMP%]   .angular-editor-textarea.focus[_ngcontent-%COMP%]{outline:var(--ae-focus-outline-color, -webkit-focus-ring-color auto 1px)}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper[_ngcontent-%COMP%]   .angular-editor-textarea[_ngcontent-%COMP%]     blockquote{margin-left:1rem;border-left:.2em solid #dfe2e5;padding-left:.5rem}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper[_ngcontent-%COMP%]     p{margin-bottom:0}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper[_ngcontent-%COMP%]   .angular-editor-placeholder[_ngcontent-%COMP%]{display:none;position:absolute;top:0;padding:.6rem .8rem 1rem .9rem;color:#6c757d;opacity:.75}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper.show-placeholder[_ngcontent-%COMP%]   .angular-editor-placeholder[_ngcontent-%COMP%]{display:block}.angular-editor[_ngcontent-%COMP%]   .angular-editor-wrapper.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5;pointer-events:none}']}),s})(),Ee=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[[u.MD,c.YN,c.X1]]}),s})();const Re=[{path:"",component:N},{path:"imap-accounts",component:z},{path:"access-roles",component:ie},{path:"pdf-templates",component:(()=>{var s;class a{constructor(){this.htmlContent="<p>pdf-templates works!</p>"}ngOnInit(){}}return(s=a).\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-pdf-templates"]],decls:3,vars:2,consts:[[2,"padding","40px"],[2,"width","70%!important"],[3,"ngModelChange","placeholder","ngModel"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"angular-editor",2),e.mxI("ngModelChange",function(r){return e.DH7(o.htmlContent,r)||(o.htmlContent=r),r}),e.k0s()()()),2&n&&(e.R7$(2),e.Y8G("placeholder","Enter text here..."),e.R50("ngModel",o.htmlContent))},dependencies:[c.BC,c.vS,Te]}),a})()}];let we=(()=>{var s;class a{}return(s=a).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[f.iI.forChild(Re),f.iI]}),a})();var je=l(3274),Ie=l(9066);let ye=(()=>{var s;class a{}return(s=a).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[u.MD,c.YN,g.bv,we,_.b,p.P,je.K,Ie.K,Ee]}),a})()}}]);