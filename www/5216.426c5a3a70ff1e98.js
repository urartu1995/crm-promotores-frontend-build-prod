"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5216],{5216:(j,u,c)=>{c.r(u),c.d(u,{LoginPageModule:()=>G});var g=c(177),i=c(9417),m=c(9465),l=c(5188),v=c(467),o=c(3953),f=c(2081),F=c(8397);const p=e=>({"crm-input-input-error":e}),h=()=>["/auth/register"];function L(e,t){1&e&&(o.qex(0),o.EFF(1,"Este campo es requerido"),o.bVm())}function E(e,t){1&e&&(o.qex(0),o.EFF(1,"Correo electr\xf3nico no v\xe1lido"),o.bVm())}function I(e,t){if(1&e&&(o.j41(0,"div",19),o.DNE(1,L,2,0,"ng-container",20)(2,E,2,0,"ng-container",20),o.k0s()),2&e){const a=o.XpG();o.R7$(),o.Y8G("ngIf",a.loginForm.get("email").hasError("required")),o.R7$(),o.Y8G("ngIf",a.loginForm.get("email").hasError("email"))}}function P(e,t){1&e&&(o.qex(0),o.EFF(1,"Este campo es requerido"),o.bVm())}function k(e,t){1&e&&(o.qex(0),o.EFF(1," La contrase\xf1a debe tener al menos 8 caracteres "),o.bVm())}function C(e,t){if(1&e&&(o.j41(0,"div",19),o.DNE(1,P,2,0,"ng-container",20)(2,k,2,0,"ng-container",20),o.k0s()),2&e){const a=o.XpG();o.R7$(),o.Y8G("ngIf",a.loginForm.get("password").hasError("required")),o.R7$(),o.Y8G("ngIf",a.loginForm.get("password").hasError("minlength"))}}const b=[{path:"",component:(()=>{var e;class t{constructor(n,r,s){this.router=n,this.api=r,this.toastService=s}ngOnInit(){this.initializeForm()}initializeForm(){this.loginForm=new i.gE({email:new i.MJ("",[i.k0.required,i.k0.email]),password:new i.MJ("",[i.k0.required,i.k0.minLength(8)])})}isControlInvalid(n){const r=this.loginForm.get(n);return r&&r.invalid&&(r.touched||r.dirty)}onSubmit(){var n=this;return(0,v.A)(function*(){if(n.loginForm.valid){const r=n.loginForm.value;console.log("Form submitted successfully:",r);try{const s=yield n.api.login(r.email,r.password);null!=s&&s.success?(console.log("Login response:",s),localStorage.setItem("token",s.success.data.token),window.location.href="/"):n.toastService.showToast({text:s.error.errorMessage,theme:"red",time:2e3})}catch(s){console.error("Error logging in:",s),n.toastService.showToast({text:"Error al hacer login",theme:"red",time:2e3})}}else n.toastService.showToast({text:"El formulario no es v\xe1lido",theme:"red",time:2e3})})()}}return(e=t).\u0275fac=function(n){return new(n||e)(o.rXU(l.Ix),o.rXU(f.i),o.rXU(F.f))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"crm-box","crm-section","crm-section-center-content","crm-section-margin-top",2,"margin-top","80px"],[1,"crm-header-icon","no-padding","no-line","bottom-margin"],[1,"crm-header-icon-left"],[1,"crm-square-icon"],[1,"fas","fa-key"],[1,"crm-header-icon-title"],[1,"crm-header-icon-right"],[1,"crm-section-inputs",3,"ngSubmit","formGroup"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["type","text","placeholder","Introduce el correo electr\xf3nico","formControlName","email"],["class","crm-input-error",4,"ngIf"],["type","password","placeholder","Introduce la contrase\xf1a","formControlName","password"],[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-buttons-group"],[1,"crm-button","crm-button-secondary",3,"routerLink"],["type","submit",1,"crm-button"],["href","/auth/change-password"],[1,"crm-input-error"],[4,"ngIf"]],template:function(n,r){1&n&&(o.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),o.nrm(5,"i",4),o.k0s(),o.j41(6,"div",5),o.EFF(7," Iniciar sesi\xf3n "),o.k0s()(),o.nrm(8,"div",6),o.k0s(),o.j41(9,"form",7),o.bIt("ngSubmit",function(){return r.onSubmit()}),o.j41(10,"div",8)(11,"div",9),o.EFF(12,"Correo electr\xf3nico"),o.k0s(),o.j41(13,"div",10),o.nrm(14,"input",11),o.k0s(),o.DNE(15,I,3,2,"div",12),o.k0s(),o.j41(16,"div",8)(17,"div",9),o.EFF(18,"Contrase\xf1a"),o.k0s(),o.j41(19,"div",10),o.nrm(20,"input",13),o.k0s(),o.DNE(21,C,3,2,"div",12),o.k0s(),o.j41(22,"div",14),o.nrm(23,"div"),o.j41(24,"div",15)(25,"button",16),o.EFF(26," Registrarse "),o.k0s(),o.j41(27,"button",17),o.EFF(28," Iniciar sesi\xf3n "),o.k0s()()(),o.j41(29,"a",18),o.EFF(30,"Me he olvidado de la contrase\xf1a"),o.k0s()()()()),2&n&&(o.R7$(9),o.Y8G("formGroup",r.loginForm),o.R7$(4),o.Y8G("ngClass",o.eq3(6,p,r.isControlInvalid("email"))),o.R7$(2),o.Y8G("ngIf",r.isControlInvalid("email")),o.R7$(4),o.Y8G("ngClass",o.eq3(8,p,r.isControlInvalid("password"))),o.R7$(2),o.Y8G("ngIf",r.isControlInvalid("password")),o.R7$(4),o.Y8G("routerLink",o.lJ4(10,h)))},dependencies:[g.YU,g.bT,i.qT,i.me,i.BC,i.cb,m.W9,m.N7,l.Wk,i.j4,i.JD]}),t})()}];let y=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[l.iI.forChild(b),l.iI]}),t})(),G=(()=>{var e;class t{}return(e=t).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[g.MD,i.YN,m.bv,y,i.X1]}),t})()}}]);