"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3070],{3070:(gn,X,l)=>{l.r(X),l.d(X,{PromotionDetailsPageModule:()=>pn});var u=l(177),m=l(9417),g=l(9465),F=l(5188),P=l(467),o=l(3953),V=l(2081),so=l(4501),N=l(8397),E=l(6552),S=l(1213),ao=l(9710),$=l(2606),ro=l(2465),lo=l(9604),mo=l(4821),co=l(4426),po=l(8323),uo=l(5180),U=l(293),A=l(8857),w=l(7221),y=l(7376),T=l(1792),D=l(8129);const _o=e=>({"crm-section-disabled-inputs":e}),go=(e,a)=>({"fa-solid fa-chevron-down":e,"fa-solid fa-chevron-up":a});function vo(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",7),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onEdit())}),o.nrm(1,"i",8),o.EFF(2," Editar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function yo(e,a){if(1&e&&o.DNE(0,vo,3,1,"button",6),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function Co(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",10),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSave())}),o.nrm(1,"i",11),o.EFF(2," Guardar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function Po(e,a){if(1&e&&o.DNE(0,Co,3,1,"button",9),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function fo(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",30)(1,"ion-checkbox",31),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(3);return o.DH7(s.promotion.freeSell,n)||(s.promotion.freeSell=n),o.Njj(n)}),o.k0s()()}if(2&e){const t=o.XpG(3);o.R7$(),o.R50("ngModel",t.promotion.freeSell)}}function ho(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",32),o.bIt("click",function(){o.eBV(t);const n=o.XpG(3);return o.Njj(n.promotion.freeSell=!n.promotion.freeSell)}),o.j41(1,"div",1),o.EFF(2," Venta libre "),o.k0s()()}}function Do(e,a){1&e&&(o.j41(0,"div",33),o.nrm(1,"i",34),o.j41(2,"div",35),o.EFF(3," Si marcas esta opci\xf3n, tu promoci\xf3n ser\xe1 visible para todos los usuarios de Byvaro y, en cada registro, deber\xe1s reconocer los honorarios de los colaboradores. "),o.k0s()())}function bo(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",15),o.EFF(1," Comisi\xf3n de intermediaci\xf3n por venta de propiedades cccc\n"),o.k0s(),o.j41(2,"div",16)(3,"div",17)(4,"div",18),o.EFF(5," Comisi\xf3n de venta "),o.k0s(),o.j41(6,"div",19)(7,"input",20),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.sellCommissionPercentage,n)||(s.promotion.sellCommissionPercentage=n),o.Njj(n)}),o.k0s(),o.j41(8,"div",21),o.EFF(9," % "),o.k0s()()(),o.j41(10,"div",17)(11,"div",18),o.EFF(12," IVA "),o.k0s(),o.j41(13,"div",19)(14,"select",22),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.sellCommissionTaxes,n)||(s.promotion.sellCommissionTaxes=n),o.Njj(n)}),o.j41(15,"option",23),o.EFF(16,"IVA incluido"),o.k0s(),o.j41(17,"option",24),o.EFF(18,"IVA no incluido"),o.k0s()()()()(),o.j41(19,"div",25)(20,"div",26),o.DNE(21,fo,2,1,"div",27)(22,ho,3,0,"div",28),o.k0s()(),o.DNE(23,Do,4,0,"div",29)}if(2&e){const t=o.XpG(2);o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.sellCommissionPercentage),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.sellCommissionPercentage),o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.sellCommissionTaxes),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.sellCommissionTaxes),o.R7$(7),o.Y8G("ngIf",!t.isDisabled),o.R7$(),o.Y8G("ngIf",t.isDisabled&&t.promotion.freeSell||!t.isDisabled),o.R7$(),o.Y8G("ngIf",(null==t.promotion?null:t.promotion.freeSell)&&!t.isDisabled)}}function Fo(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",36),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.showAdvancedOptions=!n.showAdvancedOptions)}),o.nrm(1,"i",12),o.EFF(2," Mostrar opciones avanzadas\n"),o.k0s()}if(2&e){const t=o.XpG(2);o.R7$(),o.Y8G("ngClass",o.l_i(1,go,!t.showAdvancedOptions,t.showAdvancedOptions))}}function xo(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",15),o.EFF(1," Comisi\xf3n de venta para clientes nacionales "),o.k0s(),o.j41(2,"div",16)(3,"div",17)(4,"div",18),o.EFF(5," Comisi\xf3n de venta "),o.k0s(),o.j41(6,"div",19)(7,"input",20),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(3);return o.DH7(s.promotion.nationalCustomersComissionPercentage,n)||(s.promotion.nationalCustomersComissionPercentage=n),o.Njj(n)}),o.k0s(),o.j41(8,"div",21),o.EFF(9," % "),o.k0s()()(),o.j41(10,"div",17)(11,"div",18),o.EFF(12," IVA "),o.k0s(),o.j41(13,"div",19)(14,"select",22),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(3);return o.DH7(s.promotion.nationalCustomersComissionTaxes,n)||(s.promotion.nationalCustomersComissionTaxes=n),o.Njj(n)}),o.j41(15,"option",37),o.EFF(16,"M\xe1s IVA"),o.k0s(),o.j41(17,"option",24),o.EFF(18,"IVA no inclu\xeddo"),o.k0s()()()()()}if(2&e){const t=o.XpG(3);o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.nationalCustomersComissionPercentage),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.nationalCustomersComissionPercentage),o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.nationalCustomersComissionTaxes),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.nationalCustomersComissionTaxes)}}function Ro(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",38),o.EFF(1," Comisi\xf3n de venta para clientes internacionales\n"),o.k0s(),o.j41(2,"div",16)(3,"div",17)(4,"div",18),o.EFF(5," Comisi\xf3n de venta "),o.k0s(),o.j41(6,"div",19)(7,"input",20),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(3);return o.DH7(s.promotion.internationalCustomersComissionPercentage,n)||(s.promotion.internationalCustomersComissionPercentage=n),o.Njj(n)}),o.k0s(),o.j41(8,"div",21),o.EFF(9," % "),o.k0s()()(),o.j41(10,"div",17)(11,"div",18),o.EFF(12," IVA "),o.k0s(),o.j41(13,"div",19)(14,"select",22),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(3);return o.DH7(s.promotion.internationalCustomersComissionTaxes,n)||(s.promotion.internationalCustomersComissionTaxes=n),o.Njj(n)}),o.j41(15,"option",37),o.EFF(16,"M\xe1s IVA"),o.k0s(),o.j41(17,"option",24),o.EFF(18,"IVA no inclu\xeddo"),o.k0s()()()()()}if(2&e){const t=o.XpG(3);o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.internationalCustomersComissionPercentage),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.internationalCustomersComissionPercentage),o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.internationalCustomersComissionTaxes),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.internationalCustomersComissionTaxes)}}function Mo(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",38),o.EFF(1," Comision de venta para colaboradores que no acompa\xf1an al cliente a la visita\n"),o.k0s(),o.j41(2,"div",16)(3,"div",17)(4,"div",18),o.EFF(5," Comisi\xf3n de venta "),o.k0s(),o.j41(6,"div",19)(7,"input",20),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(3);return o.DH7(s.promotion.collaboratorsNoAccompanyingCustomersToVisitPercentage,n)||(s.promotion.collaboratorsNoAccompanyingCustomersToVisitPercentage=n),o.Njj(n)}),o.k0s(),o.j41(8,"div",21),o.EFF(9," % "),o.k0s()()(),o.j41(10,"div",17)(11,"div",18),o.EFF(12," IVA "),o.k0s(),o.j41(13,"div",19)(14,"select",22),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(3);return o.DH7(s.promotion.collaboratorsNoAccompanyingCustomersToVisitTaxes,n)||(s.promotion.collaboratorsNoAccompanyingCustomersToVisitTaxes=n),o.Njj(n)}),o.j41(15,"option",37),o.EFF(16,"M\xe1s IVA"),o.k0s(),o.j41(17,"option",24),o.EFF(18,"IVA no inclu\xeddo"),o.k0s()()()()()}if(2&e){const t=o.XpG(3);o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.collaboratorsNoAccompanyingCustomersToVisitPercentage),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.collaboratorsNoAccompanyingCustomersToVisitPercentage),o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.collaboratorsNoAccompanyingCustomersToVisitTaxes),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.collaboratorsNoAccompanyingCustomersToVisitTaxes)}}function jo(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",38),o.EFF(1," Comision de venta de cliente referido\n"),o.k0s(),o.j41(2,"div",16)(3,"div",17)(4,"div",18),o.EFF(5," Comisi\xf3n de venta "),o.k0s(),o.j41(6,"div",19)(7,"input",20),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(3);return o.DH7(s.promotion.referralCommissionPercentage,n)||(s.promotion.referralCommissionPercentage=n),o.Njj(n)}),o.k0s(),o.j41(8,"div",21),o.EFF(9," % "),o.k0s()()(),o.j41(10,"div",17)(11,"div",18),o.EFF(12," IVA "),o.k0s(),o.j41(13,"div",19)(14,"select",22),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(3);return o.DH7(s.promotion.referralCommissionTaxes,n)||(s.promotion.referralCommissionTaxes=n),o.Njj(n)}),o.j41(15,"option",37),o.EFF(16,"M\xe1s IVA"),o.k0s(),o.j41(17,"option",24),o.EFF(18,"IVA no inclu\xeddo"),o.k0s()()()()()}if(2&e){const t=o.XpG(3);o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.referralCommissionPercentage),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.referralCommissionPercentage),o.R7$(6),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.referralCommissionTaxes),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.referralCommissionTaxes)}}function Io(e,a){if(1&e&&(o.j41(0,"div"),o.DNE(1,xo,19,8)(2,Ro,19,8)(3,Mo,19,8)(4,jo,19,8),o.k0s()),2&e){const t=o.XpG(2);o.R7$(),o.vxM(t.isDisabled&&t.promotion.nationalCustomersComissionPercentage||!t.isDisabled?1:-1),o.R7$(),o.vxM(t.isDisabled&&t.promotion.internationalCustomersComissionPercentage||!t.isDisabled?2:-1),o.R7$(),o.vxM(t.isDisabled&&t.promotion.collaboratorsNoAccompanyingCustomersToVisitPercentage||!t.isDisabled?3:-1),o.R7$(),o.vxM(t.isDisabled&&t.promotion.referralCommissionPercentage||!t.isDisabled?4:-1)}}function ko(e,a){if(1&e&&(o.j41(0,"div",12),o.DNE(1,bo,24,11)(2,Fo,3,4,"button",13)(3,Io,5,4,"div",14),o.k0s()),2&e){const t=o.XpG();o.Y8G("ngClass",o.eq3(4,_o,t.isDisabled)),o.R7$(),o.vxM(t.isDisabled&&(!t.isDisabled||null!=t.promotion&&t.promotion.nationalCustomersComissionPercentage||null!=t.promotion&&t.promotion.internationalCustomersComissionPercentage||null!=t.promotion&&t.promotion.collaboratorsNoAccompanyingCustomersToVisitPercentage||null!=t.promotion&&t.promotion.referralCommissionPercentage)?-1:1),o.R7$(),o.Y8G("ngIf",!t.isDisabled),o.R7$(),o.Y8G("ngIf",!t.isDisabled&&t.showAdvancedOptions||t.isDisabled)}}let O=(()=>{var e;class a{constructor(){this.promotionUpdated=new o.bkB,this.loadingButton=!1,this.isDisabled=!0,this.showAdvancedOptions=!1}ngOnInit(){}set promotionData(i){this.promotion=i}onEdit(){this.isDisabled=!this.isDisabled}onSave(){this.savePromotion(),this.isDisabled=!0}savePromotion(){this.promotionUpdated.emit({sellCommissionPercentage:this.promotion.sellCommissionPercentage,sellCommissionTaxes:this.promotion.sellCommissionTaxes,freeSell:this.promotion.freeSell,nationalCustomersComissionPercentage:this.promotion.nationalCustomersComissionPercentage,nationalCustomersComissionTaxes:this.promotion.nationalCustomersComissionTaxes,internationalCustomersComissionPercentage:this.promotion.internationalCustomersComissionPercentage,internationalCustomersComissionTaxes:this.promotion.internationalCustomersComissionTaxes,collaboratorsNoAccompanyingCustomersToVisitPercentage:this.promotion.collaboratorsNoAccompanyingCustomersToVisitPercentage,collaboratorsNoAccompanyingCustomersToVisitTaxes:this.promotion.collaboratorsNoAccompanyingCustomersToVisitTaxes,referralCommissionPercentage:this.promotion.referralCommissionPercentage,referralCommissionTaxes:this.promotion.referralCommissionTaxes})}}return(e=a).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-payments-details-commission"]],inputs:{currentUser:"currentUser"},outputs:{promotionUpdated:"promotionUpdated"},decls:6,vars:2,consts:[[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-section-smaller-title"],[1,"crm-buttons-group"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"appLoadingButton"],[1,"crm-button","crm-button-success",3,"appLoadingButton"],[3,"ngClass",4,"ngIf"],["class","crm-button-secondary crm-button-secondary-primary",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click","appLoadingButton"],[1,"fa-solid","fa-edit"],["class","crm-button crm-button-success",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button","crm-button-success",3,"click","appLoadingButton"],[1,"fa-solid","fa-check"],[3,"ngClass"],["class","crm-button-secondary crm-button-secondary-primary crm-section-margin-top crm-section-margin-bottom",3,"click",4,"ngIf"],[4,"ngIf"],[1,"crm-title-14"],[1,"crm-section-inputs-double-input","crm-section-margin-top"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"appInputViewMode","externalInputValue"],["type","number","placeholder","Nombre",3,"ngModelChange","disabled","ngModel"],[1,"crm-input-input-symbol"],["placeholder","Seleccione",3,"ngModelChange","disabled","ngModel"],["value","iva"],["value","no_iva"],[1,"crm-section-inline-checkboxes","crm-section-margin-top",2,"margin-top","24px"],[1,"crm-card-user-header"],["class","crm-input-checkbox",4,"ngIf"],["class","crm-card-user-header-data",3,"click",4,"ngIf"],["class","crm-info-banner red-icon",4,"ngIf"],[1,"crm-input-checkbox"],[3,"ngModelChange","ngModel"],[1,"crm-card-user-header-data",3,"click"],[1,"crm-info-banner","red-icon"],[1,"fa-solid","fa-triangle-exclamation"],[1,"crm-text"],[1,"crm-button-secondary","crm-button-secondary-primary","crm-section-margin-top","crm-section-margin-bottom",3,"click"],["value","iva","default",""],[1,"crm-title-14","crm-section-margin-top"]],template:function(i,n){1&i&&(o.j41(0,"div",0),o.nrm(1,"div",1),o.j41(2,"div",2),o.DNE(3,yo,1,1,"button",3)(4,Po,1,1,"button",4),o.k0s()(),o.DNE(5,ko,4,6,"div",5)),2&i&&(o.R7$(3),o.vxM(n.isDisabled?3:4),o.R7$(2),o.Y8G("ngIf",n.promotion))},dependencies:[u.YU,u.bT,m.xH,m.y7,m.me,m.Q0,m.wz,m.BC,m.vS,g.eY,g.hB,T.M,D.K],styles:[".crm-header-modal-empty[_ngcontent-%COMP%]{padding-right:0;padding-left:0}"]}),a})();const Eo=e=>({"crm-section-disabled-inputs":e}),L=e=>({"crm-section-invisible":e}),W=e=>({opacity:e}),G=e=>({"crm-input-input-error":e});function To(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",7),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onEdit())}),o.nrm(1,"i",8),o.EFF(2," Editar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function Go(e,a){if(1&e&&o.DNE(0,To,3,1,"button",6),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function Bo(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",10),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSave())}),o.nrm(1,"i",11),o.EFF(2," Guardar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function Vo(e,a){if(1&e&&o.DNE(0,Bo,3,1,"button",9),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function No(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",41)(1,"ion-checkbox",42),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.deliveryDateModalityByStatus,n)||(s.promotion.deliveryDateModalityByStatus=n),o.Njj(n)}),o.bIt("ionChange",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSelectModality("deliveryDateModalityByStatus"))}),o.k0s()()}if(2&e){const t=o.XpG(2);o.R7$(),o.R50("ngModel",t.promotion.deliveryDateModalityByStatus)}}function So(e,a){1&e&&(o.j41(0,"div",43),o.EFF(1," Es necesario seleccionar el estado de promoci\xf3n. "),o.k0s())}function Yo(e,a){1&e&&o.EFF(0," Fecha de finalizaci\xf3n ")}function Xo(e,a){1&e&&o.EFF(0," Entrega de llaves ")}function $o(e,a){1&e&&(o.j41(0,"div",43),o.EFF(1," Es necesario seleccionar la fecha. "),o.k0s())}function Uo(e,a){1&e&&o.EFF(0," Aplicar a todas las unidades ")}function Ao(e,a){1&e&&o.EFF(0," Cada unidad tiene fecha de entrega diferente ")}function wo(e,a){if(1&e&&(o.j41(0,"div",44),o.DNE(1,Uo,1,0)(2,Ao,1,0),o.k0s()),2&e){const t=o.XpG(2);o.R7$(),o.vxM(null!=t.promotion&&t.promotion.applyingDeliveryDateForAllProperties?1:2)}}function Oo(e,a){1&e&&(o.j41(0,"div",43),o.EFF(1," Es necesario seleccionar una opci\xf3n. "),o.k0s())}function Lo(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",45)(1,"ion-radio-group",46),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.applyingDeliveryDateForAllProperties,n)||(s.promotion.applyingDeliveryDateForAllProperties=n),o.Njj(n)}),o.j41(2,"div",47),o.nrm(3,"ion-radio",48),o.j41(4,"div",49),o.EFF(5," Aplicar a todas las unidades "),o.k0s()(),o.j41(6,"div",47),o.nrm(7,"ion-radio",48),o.j41(8,"div",49),o.EFF(9," Cada unidad tiene fecha de entrega diferente "),o.k0s()()(),o.DNE(10,Oo,2,0,"div",33),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.applyingDeliveryDateForAllProperties),o.R7$(),o.R50("ngModel",t.promotion.applyingDeliveryDateForAllProperties),o.Y8G("ngClass",o.eq3(7,G,t.isFieldInvalid("applyingDeliveryDateForAllProperties","status"))),o.R7$(2),o.Y8G("value",!0),o.R7$(4),o.Y8G("value",!1),o.R7$(3),o.Y8G("ngIf",t.isFieldInvalid("applyingDeliveryDateForAllProperties","status"))}}function Wo(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",41)(1,"ion-checkbox",42),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.deliveryDateModalityByMonths,n)||(s.promotion.deliveryDateModalityByMonths=n),o.Njj(n)}),o.bIt("ionChange",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSelectModality("deliveryDateModalityByMonths"))}),o.k0s()()}if(2&e){const t=o.XpG(2);o.R7$(),o.R50("ngModel",t.promotion.deliveryDateModalityByMonths)}}function Ho(e,a){if(1&e&&(o.j41(0,"option",48),o.EFF(1),o.k0s()),2&e){const t=a.$implicit;o.Y8G("value",t),o.R7$(),o.SpI("",t," meses")}}function zo(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",50)(1,"select",51),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.deliveryDateModalityByMonthsValue,n)||(s.promotion.deliveryDateModalityByMonthsValue=n),o.Njj(n)}),o.DNE(2,Ho,2,2,"option",52),o.k0s()()}if(2&e){const t=o.XpG(2);o.R7$(),o.R50("ngModel",t.promotion.deliveryDateModalityByMonthsValue),o.Y8G("disabled",t.isDisabled),o.R7$(),o.Y8G("ngForOf",t.months)}}function Jo(e,a){if(1&e&&(o.j41(0,"span"),o.EFF(1),o.k0s()),2&e){const t=o.XpG(3);o.R7$(),o.SpI(" ",t.promotion.deliveryDateModalityByMonthsValue," meses ")}}function Qo(e,a){if(1&e&&(o.j41(0,"div",53),o.DNE(1,Jo,2,1,"span",54),o.k0s()),2&e){const t=o.XpG(2);o.R7$(),o.Y8G("ngIf",t.promotion.deliveryDateModalityByMonthsValue)}}function Ko(e,a){1&e&&o.EFF(0," Desde la firma del contrato ")}function Zo(e,a){1&e&&o.EFF(0," Desde la obtenci\xf3n de la licencia ")}function qo(e,a){if(1&e&&(o.j41(0,"div",44),o.DNE(1,Ko,1,0)(2,Zo,1,0),o.k0s()),2&e){const t=o.XpG(2);o.R7$(),o.vxM("contractSignature"===(null==t.promotion?null:t.promotion.deliveryMonthsFrom)?1:2)}}function ot(e,a){1&e&&(o.j41(0,"div",43),o.EFF(1," Es necesario seleccionar desde cu\xe1ndo se aplica la fecha. "),o.k0s())}function tt(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",45)(1,"ion-radio-group",46),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.deliveryMonthsFrom,n)||(s.promotion.deliveryMonthsFrom=n),o.Njj(n)}),o.j41(2,"div",47),o.nrm(3,"ion-radio",48),o.j41(4,"div",49),o.EFF(5," Desde la firma del contrato "),o.k0s()(),o.j41(6,"div",47),o.nrm(7,"ion-radio",48),o.j41(8,"div",49),o.EFF(9," Desde la obtenci\xf3n de la licencia "),o.k0s()()(),o.DNE(10,ot,2,0,"div",33),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.deliveryMonthsFrom),o.R7$(),o.R50("ngModel",t.promotion.deliveryMonthsFrom),o.Y8G("ngClass",o.eq3(7,G,t.isFieldInvalid("deliveryMonthsFrom","months"))),o.R7$(2),o.Y8G("value","contractSignature"),o.R7$(4),o.Y8G("value","license"),o.R7$(3),o.Y8G("ngIf",t.isFieldInvalid("deliveryMonthsFrom","months"))}}function et(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",12)(1,"div",13)(2,"div",14),o.DNE(3,No,2,1,"div",15),o.j41(4,"div",16)(5,"div",1)(6,"b",17),o.EFF(7,"Fecha estimada de entrega."),o.k0s(),o.EFF(8," (Indica una fecha concreta de entrega de la propiedad.) "),o.k0s()()(),o.j41(9,"div",18)(10,"div",19)(11,"div",20)(12,"div",21),o.EFF(13," Estado de promoci\xf3n "),o.k0s(),o.j41(14,"div",22)(15,"select",23),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.constructionStatus,n)||(s.promotion.constructionStatus=n),o.Njj(n)}),o.j41(16,"option",24),o.EFF(17,"Proyecto sin licencia"),o.k0s(),o.j41(18,"option",25),o.EFF(19,"Proyecto con licencia"),o.k0s(),o.j41(20,"option",26),o.EFF(21,"En fase de excavaci\xf3n"),o.k0s(),o.j41(22,"option",27),o.EFF(23,"Cimentaci\xf3n completada"),o.k0s(),o.j41(24,"option",28),o.EFF(25,"Estructura en construcci\xf3n"),o.k0s(),o.j41(26,"option",29),o.EFF(27,"Cerramiento completado"),o.k0s(),o.j41(28,"option",30),o.EFF(29,"Instalaciones en proceso"),o.k0s(),o.j41(30,"option",31),o.EFF(31,"Acabados interiores"),o.k0s(),o.j41(32,"option",32),o.EFF(33,"Obra finalizada"),o.k0s()()(),o.DNE(34,So,2,0,"div",33),o.k0s(),o.j41(35,"div",20)(36,"div",21),o.DNE(37,Yo,1,0)(38,Xo,1,0),o.k0s(),o.j41(39,"div",22)(40,"input",34),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.keyDeliveryDate,n)||(s.promotion.keyDeliveryDate=n),o.Njj(n)}),o.k0s()(),o.DNE(41,$o,2,0,"div",33),o.k0s()(),o.j41(42,"div",35),o.DNE(43,wo,3,1,"div",36)(44,Lo,11,9,"div",37),o.k0s()()(),o.j41(45,"div",13)(46,"div",14),o.DNE(47,Wo,2,1,"div",15),o.j41(48,"div",16)(49,"div",1)(50,"b",17),o.EFF(51,"Plazo de entrega en meses."),o.k0s(),o.EFF(52," (N\xfamero de meses desde a firma del contrato de compraventa u obtenci\xf3n de licencia.) "),o.k0s()()(),o.j41(53,"div",18)(54,"div",19)(55,"div",38)(56,"div",21),o.EFF(57," Entrega en "),o.k0s(),o.DNE(58,zo,3,3,"div",39)(59,Qo,2,1,"div",40),o.k0s(),o.nrm(60,"div",38),o.k0s(),o.j41(61,"div",35),o.DNE(62,qo,3,1,"div",36)(63,tt,11,9,"div",37),o.k0s()()()()}if(2&e){const t=o.XpG();o.Y8G("ngClass",o.eq3(26,Eo,t.isDisabled)),o.R7$(),o.Y8G("ngClass",o.eq3(28,L,!(t.isDisabled&&t.promotion.deliveryDateModalityByStatus||!t.isDisabled))),o.R7$(2),o.Y8G("ngIf",!t.isDisabled),o.R7$(6),o.Y8G("ngStyle",o.eq3(30,W,t.promotion.deliveryDateModalityByStatus?"1":"0.3")),o.R7$(2),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.constructionStatus),o.R7$(3),o.Y8G("ngClass",o.eq3(32,G,t.isFieldInvalid("constructionStatus","status"))),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.constructionStatus),o.R7$(19),o.Y8G("ngIf",t.isFieldInvalid("constructionStatus","status")),o.R7$(),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.keyDeliveryDate),o.R7$(2),o.vxM("obra-finalizada"===(null==t.promotion?null:t.promotion.constructionStatus)?37:38),o.R7$(2),o.Y8G("ngClass",o.eq3(34,G,t.isFieldInvalid("keyDeliveryDate","status"))),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.keyDeliveryDate),o.R7$(),o.Y8G("ngIf",t.isFieldInvalid("keyDeliveryDate","status")),o.R7$(2),o.Y8G("ngIf",t.isDisabled),o.R7$(),o.Y8G("ngIf",!t.isDisabled),o.R7$(),o.Y8G("ngClass",o.eq3(36,L,!(t.isDisabled&&t.promotion.deliveryDateModalityByMonths||!t.isDisabled))),o.R7$(2),o.Y8G("ngIf",!t.isDisabled),o.R7$(6),o.Y8G("ngStyle",o.eq3(38,W,t.promotion.deliveryDateModalityByMonths?"1":"0.3")),o.R7$(5),o.Y8G("ngIf",!t.isDisabled),o.R7$(),o.Y8G("ngIf",t.isDisabled),o.R7$(3),o.Y8G("ngIf",t.isDisabled),o.R7$(),o.Y8G("ngIf",!t.isDisabled)}}let H=(()=>{var e;class a{constructor(i){this.utils=i,this.promotionUpdated=new o.bkB,this.loadingButton=!1,this.isDisabled=!0,this.months=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]}ngOnInit(){}set promotionData(i){var n,s;this.promotion=i,null!==(n=this.promotion)&&void 0!==n&&n.deliveryDateModalityByStatus||null!==(s=this.promotion)&&void 0!==s&&s.deliveryDateModalityByMonths||(this.promotion.deliveryDateModalityByStatus=!0)}onEdit(){var i,n;this.isDisabled=!this.isDisabled,null!==(i=this.promotion)&&void 0!==i&&i.deliveryDateModalityByStatus||null!==(n=this.promotion)&&void 0!==n&&n.deliveryDateModalityByMonths||(this.promotion.deliveryDateModalityByStatus=!0),console.log("Editing promotion details:",this.promotion),this.promotion.keyDeliveryDate&&(console.log("Converting keyDeliveryDate to frontend date input format"),console.log(this.utils.parseBackendDateToFrontendDateInput(this.promotion.keyDeliveryDate)),this.promotion.keyDeliveryDate=this.utils.parseBackendDateToFrontendDateInput(this.promotion.keyDeliveryDate))}onSave(){!this.isDisabled&&!this.isFormValid()||(this.savePromotion(),this.isDisabled=!0)}onSelectModality(i){"deliveryDateModalityByStatus"===i&&(this.promotion.deliveryDateModalityByMonths=!1),"deliveryDateModalityByMonths"===i&&(this.promotion.deliveryDateModalityByStatus=!1)}savePromotion(){const i={deliveryDateModalityByStatus:this.promotion.deliveryDateModalityByStatus,constructionStatus:this.promotion.constructionStatus,keyDeliveryDate:this.promotion.keyDeliveryDate,applyingDeliveryDateForAllProperties:this.promotion.applyingDeliveryDateForAllProperties,deliveryDateModalityByMonths:this.promotion.deliveryDateModalityByMonths,deliveryMonthsFrom:this.promotion.deliveryMonthsFrom,deliveryDateModalityByMonthsValue:parseInt(this.promotion.deliveryDateModalityByMonthsValue)};this.promotionUpdated.emit(i)}isFieldInvalid(i,n){if(this.isDisabled||!this.promotion||"status"===n&&!this.promotion.deliveryDateModalityByStatus||"months"===n&&!this.promotion.deliveryDateModalityByMonths)return!1;const s=this.promotion[i];return null==s||"string"==typeof s&&""===s.trim()}isFormValid(){let i=!0;return this.promotion.deliveryDateModalityByStatus&&(i=i&&!this.isFieldInvalid("constructionStatus","status")&&!this.isFieldInvalid("keyDeliveryDate","status")&&!this.isFieldInvalid("applyingDeliveryDateForAllProperties","status")),this.promotion.deliveryDateModalityByMonths&&(i=i&&!this.isFieldInvalid("deliveryMonthsFrom","months")),i}}return(e=a).\u0275fac=function(i){return new(i||e)(o.rXU(E.T))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-payments-details-delivery-date"]],inputs:{currentUser:"currentUser"},outputs:{promotionUpdated:"promotionUpdated"},decls:6,vars:2,consts:[[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-section-smaller-title"],[1,"crm-buttons-group"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"appLoadingButton"],[1,"crm-button","crm-button-success",3,"appLoadingButton"],[3,"ngClass",4,"ngIf"],["class","crm-button-secondary crm-button-secondary-primary",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click","appLoadingButton"],[1,"fa-solid","fa-edit"],["class","crm-button crm-button-success",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button","crm-button-success",3,"click","appLoadingButton"],[1,"fa-solid","fa-check"],[3,"ngClass"],[1,"crm-card-user","crm-section-margin-top",3,"ngClass"],[1,"crm-card-user-header"],["class","crm-input-checkbox",4,"ngIf"],[1,"crm-card-user-header-data"],[2,"font-weight","bold !important"],[1,"crm-card-user-body",2,"margin-bottom","0",3,"ngStyle"],[1,"crm-section-inputs-double-input"],[1,"crm-input",3,"appInputViewMode","externalInputValue"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["placeholder","Seleccione",3,"ngModelChange","disabled","ngModel"],["value","proyecto-sin-licencia"],["value","proyecto-con-licencia"],["value","fase-excavacion"],["value","cimentacion-completada"],["value","estructura-construccion"],["value","cerramiento-completado"],["value","instalaciones-proceso"],["value","acabados-interiores"],["value","obra-finalizada"],["class","crm-input-error",4,"ngIf"],["type","date","placeholder","Nombre",3,"ngModelChange","disabled","ngModel"],[1,"crm-section-inline-checkboxes","crm-section-margin-top",2,"margin-top","24px"],["class","crm-text",4,"ngIf"],["class","crm-input crm-input-radio-box",3,"appInputViewMode","externalInputValue",4,"ngIf"],[1,"crm-input"],["class","crm-input-input",4,"ngIf"],["class","crm-input-view",4,"ngIf"],[1,"crm-input-checkbox"],[3,"ngModelChange","ionChange","ngModel"],[1,"crm-input-error"],[1,"crm-text"],[1,"crm-input","crm-input-radio-box",3,"appInputViewMode","externalInputValue"],[1,"crm-input-radios",3,"ngModelChange","ngModel","ngClass"],[1,"crm-input-radio"],[3,"value"],[1,"crm-input-radio-label"],[1,"crm-input-input"],["placeholder","Seleccione",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],[1,"crm-input-view"],[4,"ngIf"]],template:function(i,n){1&i&&(o.j41(0,"div",0),o.nrm(1,"div",1),o.j41(2,"div",2),o.DNE(3,Go,1,1,"button",3)(4,Vo,1,1,"button",4),o.k0s()(),o.DNE(5,et,64,40,"div",5)),2&i&&(o.R7$(3),o.vxM(n.isDisabled?3:4),o.R7$(2),o.Y8G("ngIf",n.promotion))},dependencies:[u.YU,u.Sq,u.bT,u.B3,m.xH,m.y7,m.me,m.wz,m.BC,m.vS,g.eY,g.KO,g.f0,g.hB,g.Je,T.M,D.K],styles:[".crm-header-modal-empty[_ngcontent-%COMP%]{padding-right:0;padding-left:0}"]}),a})();var Y=l(3955);const nt=e=>({"crm-section-disabled-inputs":e}),x=e=>({"crm-input-input-error":e});function it(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",7),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onEdit())}),o.nrm(1,"i",8),o.EFF(2," Editar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function st(e,a){if(1&e&&o.DNE(0,it,3,1,"button",6),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function at(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",10),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSave())}),o.nrm(1,"i",11),o.EFF(2," Guardar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function rt(e,a){if(1&e&&o.DNE(0,at,3,1,"button",9),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function lt(e,a){1&e&&(o.j41(0,"div",37),o.EFF(1," Es necesario introducir el pago de reserva. "),o.k0s())}function mt(e,a){1&e&&(o.j41(0,"div",37),o.EFF(1," Es necesario seleccionar la expiraci\xf3n. "),o.k0s())}function ct(e,a){1&e&&(o.j41(0,"div",37),o.EFF(1," Es necesario seleccionar el contrato. "),o.k0s())}function dt(e,a){1&e&&(o.j41(0,"div",37),o.EFF(1," Es necesario introducir el porcentaje de pago. "),o.k0s())}function pt(e,a){1&e&&(o.j41(0,"div",37),o.EFF(1," Es necesario introducir el restante. "),o.k0s())}function ut(e,a){1&e&&(o.j41(0,"div",37),o.EFF(1," Es necesario seleccionar cu\xe1ndo se paga el restante. "),o.k0s())}function _t(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",38)(1,"ion-radio-group",39),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.buyAndSellContractPaymentRestantWhen,n)||(s.promotion.buyAndSellContractPaymentRestantWhen=n),o.Njj(n)}),o.j41(2,"div",40),o.nrm(3,"ion-radio",41),o.j41(4,"div",42),o.EFF(5," A la firma de escritura p\xfablica "),o.k0s()(),o.j41(6,"div",40),o.nrm(7,"ion-radio",43),o.j41(8,"div",42),o.EFF(9," Por certificaci\xf3n "),o.k0s()()(),o.DNE(10,ut,2,0,"div",20),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.buyAndSellContractPaymentRestantWhen),o.R7$(),o.R50("ngModel",t.promotion.buyAndSellContractPaymentRestantWhen),o.R7$(9),o.Y8G("ngIf",t.isFieldInvalid("buyAndSellContractPaymentRestantWhen"))}}function gt(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",69),o.bIt("click",function(){o.eBV(t);const n=o.XpG().$index,s=o.XpG(3);return o.Njj(s.onDelete(n))}),o.nrm(1,"i",70),o.k0s()}}function vt(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",44)(1,"div",47),o.EFF(2),o.k0s(),o.j41(3,"div",15)(4,"div",48)(5,"input",33),o.mxI("ngModelChange",function(n){const s=o.eBV(t).$implicit;return o.DH7(s.percentage,n)||(s.percentage=n),o.Njj(n)}),o.bIt("ngModelChange",function(){o.eBV(t);const n=o.XpG(3);return o.Njj(n.onQuantityPercentageChange())}),o.k0s(),o.j41(6,"div",19),o.EFF(7," % "),o.k0s()()(),o.j41(8,"div",15)(9,"div",48)(10,"select",49),o.mxI("ngModelChange",function(n){const s=o.eBV(t).$implicit;return o.DH7(s.typeOfPercentage,n)||(s.typeOfPercentage=n),o.Njj(n)}),o.j41(11,"option",50),o.EFF(12),o.nI1(13,"translate"),o.k0s(),o.j41(14,"option",51),o.EFF(15),o.nI1(16,"translate"),o.k0s(),o.j41(17,"option",52),o.EFF(18),o.nI1(19,"translate"),o.k0s(),o.j41(20,"option",53),o.EFF(21),o.nI1(22,"translate"),o.k0s(),o.j41(23,"option",54),o.EFF(24),o.nI1(25,"translate"),o.k0s(),o.j41(26,"option",55),o.EFF(27),o.nI1(28,"translate"),o.k0s(),o.j41(29,"option",56),o.EFF(30),o.nI1(31,"translate"),o.k0s(),o.j41(32,"option",57),o.EFF(33),o.nI1(34,"translate"),o.k0s(),o.j41(35,"option",58),o.EFF(36),o.nI1(37,"translate"),o.k0s(),o.j41(38,"option",59),o.EFF(39),o.nI1(40,"translate"),o.k0s(),o.j41(41,"option",60),o.EFF(42),o.nI1(43,"translate"),o.k0s(),o.j41(44,"option",61),o.EFF(45),o.nI1(46,"translate"),o.k0s(),o.j41(47,"option",62),o.EFF(48),o.nI1(49,"translate"),o.k0s(),o.j41(50,"option",63),o.EFF(51),o.nI1(52,"translate"),o.k0s(),o.j41(53,"option",64),o.EFF(54),o.nI1(55,"translate"),o.k0s(),o.j41(56,"option",65),o.EFF(57),o.nI1(58,"translate"),o.k0s(),o.j41(59,"option",66),o.EFF(60),o.nI1(61,"translate"),o.k0s(),o.j41(62,"option",67),o.EFF(63),o.nI1(64,"translate"),o.k0s()()()(),o.DNE(65,gt,2,0,"button",68),o.k0s()}if(2&e){const t=a.$implicit,i=a.$index,n=o.XpG(3);o.R7$(2),o.SpI(" ",i+1," "),o.R7$(),o.Y8G("appInputViewMode",n.isDisabled)("externalInputValue",t.percentage),o.R7$(2),o.Y8G("disabled",n.isDisabled),o.R50("ngModel",t.percentage),o.R7$(3),o.Y8G("appInputViewMode",n.isDisabled)("externalInputValue",t.typeOfPercentage),o.R7$(2),o.R50("ngModel",t.typeOfPercentage),o.R7$(2),o.JRh(o.bMT(13,27,"text.movimiento_tierras")),o.R7$(3),o.JRh(o.bMT(16,29,"text.cimentacion")),o.R7$(3),o.JRh(o.bMT(19,31,"text.estructura")),o.R7$(3),o.JRh(o.bMT(22,33,"text.cerramientos_exteriores")),o.R7$(3),o.JRh(o.bMT(25,35,"text.cubierta_tejado")),o.R7$(3),o.JRh(o.bMT(28,37,"text.carpinteria_exterior")),o.R7$(3),o.JRh(o.bMT(31,39,"text.instalaciones_basicas")),o.R7$(3),o.JRh(o.bMT(34,41,"text.tabiqueria_revestimientos")),o.R7$(3),o.JRh(o.bMT(37,43,"text.yeso_enlucidos")),o.R7$(3),o.JRh(o.bMT(40,45,"text.solados_alicatados")),o.R7$(3),o.JRh(o.bMT(43,47,"text.carpinteria_interior")),o.R7$(3),o.JRh(o.bMT(46,49,"text.pintura_interior")),o.R7$(3),o.JRh(o.bMT(49,51,"text.sanitarios_griferias")),o.R7$(3),o.JRh(o.bMT(52,53,"text.ascensores_comunes")),o.R7$(3),o.JRh(o.bMT(55,55,"text.zonas_comunes")),o.R7$(3),o.JRh(o.bMT(58,57,"text.finalizacion_obra")),o.R7$(3),o.JRh(o.bMT(61,59,"text.licencia_ocupacion")),o.R7$(3),o.JRh(o.bMT(64,61,"text.entrega_llaves")),o.R7$(2),o.Y8G("ngIf",!n.isDisabled)}}function yt(e,a){if(1&e&&(o.j41(0,"div",71),o.EFF(1),o.k0s()),2&e){const t=o.XpG(3);o.R7$(),o.SpI(" La suma de los porcentajes no puede superar el restante (",t.promotion.buyAndSellContractPaymentRestantPercentage,"%) ")}}function Ct(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",72)(1,"button",73),o.bIt("click",function(){o.eBV(t);const n=o.XpG(3);return o.Njj(n.onAddCharge())}),o.nrm(2,"i",74),o.EFF(3," A\xf1adir m\xe1s pagos "),o.k0s()()}}function Pt(e,a){if(1&e&&(o.j41(0,"div",30),o.EFF(1," Definir cobros de las certificaciones "),o.k0s(),o.Z7z(2,vt,66,63,"div",44,o.fX1),o.DNE(4,yt,2,1,"div",45)(5,Ct,4,0,"div",46)),2&e){const t=o.XpG(2);o.R7$(2),o.Dyx(null==t.promotion?null:t.promotion.certificationsCharges),o.R7$(2),o.Y8G("ngIf",t.percentagesOverflowsMaximum),o.R7$(),o.Y8G("ngIf",!t.isDisabled)}}function ft(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",12)(1,"div",13),o.EFF(2," Reserva "),o.k0s(),o.j41(3,"div",14)(4,"div",15)(5,"div",16),o.EFF(6," Pago de reserva "),o.k0s(),o.j41(7,"div",17)(8,"input",18),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.reservePayment,n)||(s.promotion.reservePayment=n),o.Njj(n)}),o.k0s(),o.j41(9,"div",19),o.EFF(10," \u20ac "),o.k0s()(),o.DNE(11,lt,2,0,"div",20),o.k0s(),o.j41(12,"div",15)(13,"div",16),o.EFF(14," Expira en "),o.k0s(),o.j41(15,"div",17)(16,"select",21),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.reservePaymentExpirationDays,n)||(s.promotion.reservePaymentExpirationDays=n),o.Njj(n)}),o.j41(17,"option",22),o.EFF(18,"7 d\xedas"),o.k0s(),o.j41(19,"option",23),o.EFF(20,"14 d\xedas"),o.k0s(),o.j41(21,"option",24),o.EFF(22,"21 d\xedas"),o.k0s(),o.j41(23,"option",25),o.EFF(24,"28 d\xedas"),o.k0s(),o.j41(25,"option",26),o.EFF(26,"2 meses"),o.k0s(),o.j41(27,"option",27),o.EFF(28,"3 meses"),o.k0s(),o.j41(29,"option",28),o.EFF(30,"4 meses"),o.k0s(),o.j41(31,"option",29),o.EFF(32,"No definido"),o.k0s()()(),o.DNE(33,mt,2,0,"div",20),o.k0s()(),o.j41(34,"div",30),o.EFF(35," Compra venta "),o.k0s(),o.j41(36,"div",14)(37,"div",15)(38,"div",16),o.EFF(39," Contrato de compra-venta en "),o.k0s(),o.j41(40,"div",17)(41,"select",21),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.buyAndSellContractInDays,n)||(s.promotion.buyAndSellContractInDays=n),o.Njj(n)}),o.j41(42,"option",22),o.EFF(43,"7 d\xedas"),o.k0s(),o.j41(44,"option",23),o.EFF(45,"14 d\xedas"),o.k0s(),o.j41(46,"option",24),o.EFF(47,"21 d\xedas"),o.k0s(),o.j41(48,"option",25),o.EFF(49,"28 d\xedas"),o.k0s(),o.j41(50,"option",26),o.EFF(51,"2 meses"),o.k0s(),o.j41(52,"option",27),o.EFF(53,"3 meses"),o.k0s(),o.j41(54,"option",28),o.EFF(55,"4 meses"),o.k0s(),o.j41(56,"option",29),o.EFF(57,"No definido"),o.k0s()()(),o.DNE(58,ct,2,0,"div",20),o.k0s(),o.j41(59,"div",15)(60,"div",16),o.EFF(61," Porcentaje de pago "),o.k0s(),o.j41(62,"div",17)(63,"input",31),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.buyAndSellContractPaymentQuantityPercentage,n)||(s.promotion.buyAndSellContractPaymentQuantityPercentage=n),o.Njj(n)}),o.bIt("ngModelChange",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.onQuantityPercentageChange())}),o.k0s(),o.j41(64,"div",19),o.EFF(65," % "),o.k0s()(),o.DNE(66,dt,2,0,"div",20),o.k0s()(),o.j41(67,"div",32)(68,"div",15)(69,"div",16),o.EFF(70," Restante "),o.k0s(),o.j41(71,"div",17)(72,"input",33),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.buyAndSellContractPaymentRestantPercentage,n)||(s.promotion.buyAndSellContractPaymentRestantPercentage=n),o.Njj(n)}),o.bIt("ngModelChange",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.onQuantityPercentageChange())}),o.k0s(),o.j41(73,"div",19),o.EFF(74," % "),o.k0s()(),o.DNE(75,pt,2,0,"div",20),o.k0s(),o.nrm(76,"div",34),o.k0s(),o.j41(77,"div",35),o.DNE(78,_t,11,4,"div",36),o.k0s(),o.DNE(79,Pt,6,2),o.k0s()}if(2&e){const t=o.XpG();o.Y8G("ngClass",o.eq3(33,nt,t.isDisabled)),o.R7$(4),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.reservePayment),o.R7$(3),o.Y8G("ngClass",o.eq3(35,x,t.isFieldInvalid("reservePayment"))),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.reservePayment),o.R7$(3),o.Y8G("ngIf",t.isFieldInvalid("reservePayment")),o.R7$(),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.reservePaymentExpirationDays),o.R7$(3),o.Y8G("ngClass",o.eq3(37,x,t.isFieldInvalid("reservePaymentExpirationDays"))),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.reservePaymentExpirationDays),o.R7$(17),o.Y8G("ngIf",t.isFieldInvalid("reservePaymentExpirationDays")),o.R7$(4),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.buyAndSellContractInDays),o.R7$(3),o.Y8G("ngClass",o.eq3(39,x,t.isFieldInvalid("buyAndSellContractInDays"))),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.buyAndSellContractInDays),o.R7$(17),o.Y8G("ngIf",t.isFieldInvalid("buyAndSellContractInDays")),o.R7$(),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.buyAndSellContractPaymentQuantityPercentage),o.R7$(3),o.Y8G("ngClass",o.eq3(41,x,t.isFieldInvalid("buyAndSellContractPaymentQuantityPercentage"))),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.buyAndSellContractPaymentQuantityPercentage),o.R7$(3),o.Y8G("ngIf",t.isFieldInvalid("buyAndSellContractPaymentQuantityPercentage")),o.R7$(2),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.buyAndSellContractPaymentRestantPercentage),o.R7$(3),o.Y8G("ngClass",o.eq3(43,x,t.isFieldInvalid("buyAndSellContractPaymentRestantPercentage"))),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.buyAndSellContractPaymentRestantPercentage),o.R7$(3),o.Y8G("ngIf",t.isFieldInvalid("buyAndSellContractPaymentRestantPercentage")),o.R7$(3),o.Y8G("ngIf",!t.isDisabled),o.R7$(),o.vxM("by_certification"===(null==t.promotion?null:t.promotion.buyAndSellContractPaymentRestantWhen)?79:-1)}}let z=(()=>{var e;class a{constructor(){this.promotionUpdated=new o.bkB,this.loadingButton=!1,this.isDisabled=!0,this.percentagesOverflowsMaximum=!1}ngOnInit(){}set promotionData(i){this.promotion=i}onEdit(){var i,n;this.isDisabled=!this.isDisabled,null!==(i=this.promotion)&&void 0!==i&&i.deliveryDateModalityByStatus||null!==(n=this.promotion)&&void 0!==n&&n.deliveryDateModalityByMonths||(this.promotion.deliveryDateModalityByStatus=!0),(!this.promotion.certificationsCharges||!this.promotion.certificationsCharges.length)&&(this.promotion.certificationsCharges=[],this.promotion.certificationsCharges.push({typeOfPercentage:"",percentage:0}))}onSave(){!this.isDisabled&&!this.isFormValid()||(this.savePromotion(),this.isDisabled=!0)}onQuantityPercentageChange(){setTimeout(()=>{var i;const n=null===(i=this.promotion)||void 0===i?void 0:i.buyAndSellContractPaymentQuantityPercentage;this.promotion.buyAndSellContractPaymentRestantPercentage=100-n;let s=0;for(let r of this.promotion.certificationsCharges)s+=r.percentage;this.percentagesOverflowsMaximum=s>this.promotion.buyAndSellContractPaymentRestantPercentage})}onAddCharge(){this.promotion.certificationsCharges?this.promotion.certificationsCharges.push({typeOfPercentage:"",percentage:0}):this.promotion.certificationsCharges=[{typeOfPercentage:null,percentage:null}]}onDelete(i){this.promotion.certificationsCharges.splice(i,1)}savePromotion(){this.promotionUpdated.emit({reservePayment:this.promotion.reservePayment,reservePaymentExpirationDays:this.promotion.reservePaymentExpirationDays,buyAndSellContractInDays:this.promotion.buyAndSellContractInDays,buyAndSellContractPaymentQuantityPercentage:this.promotion.buyAndSellContractPaymentQuantityPercentage,buyAndSellContractPaymentRestantPercentage:this.promotion.buyAndSellContractPaymentRestantPercentage,buyAndSellContractPaymentRestantWhen:this.promotion.buyAndSellContractPaymentRestantWhen,certificationsCharges:this.promotion.certificationsCharges})}isFieldInvalid(i){if(this.isDisabled||!this.promotion)return!1;const n=this.promotion[i];return null==n||"string"==typeof n&&""===n.trim()}isFormValid(){return!(this.isFieldInvalid("reservePayment")||this.isFieldInvalid("reservePaymentExpirationDays")||this.isFieldInvalid("buyAndSellContractInDays")||this.isFieldInvalid("buyAndSellContractPaymentQuantityPercentage")||this.isFieldInvalid("buyAndSellContractPaymentRestantPercentage")||this.isFieldInvalid("buyAndSellContractPaymentRestantWhen"))}}return(e=a).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-payments-details-payment-method"]],inputs:{currentUser:"currentUser"},outputs:{promotionUpdated:"promotionUpdated"},decls:6,vars:2,consts:[[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-section-smaller-title"],[1,"crm-buttons-group"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"appLoadingButton"],[1,"crm-button","crm-button-success",3,"appLoadingButton"],[3,"ngClass",4,"ngIf"],["class","crm-button-secondary crm-button-secondary-primary",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click","appLoadingButton"],[1,"fa-solid","fa-edit"],["class","crm-button crm-button-success",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button","crm-button-success",3,"click","appLoadingButton"],[1,"fa-solid","fa-check"],[3,"ngClass"],[1,"crm-title-14"],[1,"crm-section-inputs-double-input","crm-section-margin-top"],[1,"crm-input",3,"appInputViewMode","externalInputValue"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["type","number","placeholder","Nombre",3,"ngModelChange","disabled","ngModel"],[1,"crm-input-input-symbol"],["class","crm-input-error",4,"ngIf"],["placeholder","Seleccione",3,"ngModelChange","disabled","ngModel"],["value","7"],["value","14"],["value","21"],["value","28"],["value","60"],["value","90"],["value","120"],["value","No defined"],[1,"crm-title-14","crm-section-margin-top-medium"],["type","number","placeholder","Porcentaje de pago (%)",3,"ngModelChange","disabled","ngModel"],[1,"crm-section-inputs-double-input","crm-section-margin-top-medium"],["type","number","placeholder","Restante (%)",3,"ngModelChange","disabled","ngModel"],[1,"crm-input"],[1,"crm-section-inline-checkboxes","crm-section-margin-top",2,"margin-top","24px"],["class","crm-input crm-input-radio-box",3,"appInputViewMode","externalInputValue",4,"ngIf"],[1,"crm-input-error"],[1,"crm-input","crm-input-radio-box",3,"appInputViewMode","externalInputValue"],[1,"crm-input-radios",3,"ngModelChange","ngModel"],[1,"crm-input-radio"],["value","when_public_signing"],[1,"crm-input-radio-label"],["value","by_certification"],[1,"crm-section-inputs-double-input","crm-section-margin-top-medium",2,"align-items","center"],["class","crm-input-error crm-section-margin-top",4,"ngIf"],["class","crm-section-margin-top","style","display: flex; justify-content: center;",4,"ngIf"],[1,"crm-text"],[1,"crm-input-input"],["placeholder","Seleccione",3,"ngModelChange","ngModel"],["value","movimiento_tierras"],["value","cimentacion"],["value","estructura"],["value","cerramientos_exteriores"],["value","cubierta_tejado"],["value","carpinteria_exterior"],["value","instalaciones_basicas"],["value","tabiqueria_revestimientos"],["value","yeso_enlucidos"],["value","solados_alicatados"],["value","carpinteria_interior"],["value","pintura_interior"],["value","sanitarios_griferias"],["value","ascensores_comunes"],["value","zonas_comunes"],["value","finalizacion_obra"],["value","licencia_ocupacion"],["value","entrega_llaves"],["class","crm-button-icon-solo",3,"click",4,"ngIf"],[1,"crm-button-icon-solo",3,"click"],[1,"fas","fa-trash"],[1,"crm-input-error","crm-section-margin-top"],[1,"crm-section-margin-top",2,"display","flex","justify-content","center"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"fa-solid","fa-add"]],template:function(i,n){1&i&&(o.j41(0,"div",0),o.nrm(1,"div",1),o.j41(2,"div",2),o.DNE(3,st,1,1,"button",3)(4,rt,1,1,"button",4),o.k0s()(),o.DNE(5,ft,80,45,"div",5)),2&i&&(o.R7$(3),o.vxM(n.isDisabled?3:4),o.R7$(2),o.Y8G("ngIf",n.promotion))},dependencies:[u.YU,u.bT,m.xH,m.y7,m.me,m.Q0,m.wz,m.BC,m.vS,g.KO,g.f0,g.Je,T.M,D.K,Y.D9],styles:[".crm-header-modal-empty[_ngcontent-%COMP%]{padding-right:0;padding-left:0}"]}),a})();var ht=l(1748);const Dt=e=>({"crm-section-disabled-inputs":e}),J=e=>({"crm-section-invisible":e}),Q=e=>({opacity:e}),K=e=>({"crm-input-input-error":e});function bt(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",7),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onEdit())}),o.nrm(1,"i",8),o.EFF(2," Editar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function Ft(e,a){if(1&e&&o.DNE(0,bt,3,1,"button",6),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function xt(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",10),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSave())}),o.nrm(1,"i",11),o.EFF(2," Guardar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function Rt(e,a){if(1&e&&o.DNE(0,xt,3,1,"button",9),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function Mt(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",39)(1,"ion-checkbox",40),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.registersWithPreRegister,n)||(s.promotion.registersWithPreRegister=n),o.Njj(n)}),o.bIt("ionChange",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSelectModality("registersWithPreRegister"))}),o.k0s()()}if(2&e){const t=o.XpG(2);o.R7$(),o.R50("ngModel",t.promotion.registersWithPreRegister)}}function jt(e,a){1&e&&(o.j41(0,"div",41),o.EFF(1," Es necesario seleccionar la expiraci\xf3n. "),o.k0s())}function It(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",39)(1,"ion-checkbox",40),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.registersWithoutPreRegister,n)||(s.promotion.registersWithoutPreRegister=n),o.Njj(n)}),o.bIt("ionChange",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSelectModality("registersWithoutPreRegister"))}),o.k0s()()}if(2&e){const t=o.XpG(2);o.R7$(),o.R50("ngModel",t.promotion.registersWithoutPreRegister)}}function kt(e,a){1&e&&(o.j41(0,"div",41),o.EFF(1," Es necesario seleccionar la expiraci\xf3n. "),o.k0s())}function Et(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",42)(1,"div",33)(2,"div",43)(3,"div",44)(4,"ion-checkbox",45),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.registerNecessaryFieldsName,n)||(s.promotion.registerNecessaryFieldsName=n),o.Njj(n)}),o.k0s(),o.j41(5,"div",46),o.EFF(6,"Nombre y apellidos"),o.k0s()(),o.j41(7,"div",44)(8,"ion-checkbox",45),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.registerNecessaryFieldsNationality,n)||(s.promotion.registerNecessaryFieldsNationality=n),o.Njj(n)}),o.k0s(),o.j41(9,"div",46),o.EFF(10,"Nacionalidad"),o.k0s()(),o.j41(11,"div",44)(12,"ion-checkbox",45),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.registerNecessaryFieldsLast4DigitsPhone,n)||(s.promotion.registerNecessaryFieldsLast4DigitsPhone=n),o.Njj(n)}),o.k0s(),o.j41(13,"div",46),o.EFF(14,"Los \xfaltimos 4 d\xedgitos del tel\xe9fono"),o.k0s()(),o.j41(15,"div",44)(16,"ion-checkbox",45),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.registerNecessaryFieldsEmail,n)||(s.promotion.registerNecessaryFieldsEmail=n),o.Njj(n)}),o.k0s(),o.j41(17,"div",46),o.EFF(18,"Email (no recomendable)"),o.k0s()()()()()}if(2&e){const t=o.XpG(2);o.R7$(4),o.R50("ngModel",t.promotion.registerNecessaryFieldsName),o.R7$(4),o.R50("ngModel",t.promotion.registerNecessaryFieldsNationality),o.R7$(4),o.R50("ngModel",t.promotion.registerNecessaryFieldsLast4DigitsPhone),o.R7$(4),o.R50("ngModel",t.promotion.registerNecessaryFieldsEmail)}}function Tt(e,a){1&e&&(o.j41(0,"div",33)(1,"div",48),o.EFF(2,"Sin informaci\xf3n"),o.k0s()())}function Gt(e,a){1&e&&(o.j41(0,"div",33)(1,"div",49),o.nrm(2,"i",50),o.j41(3,"span"),o.EFF(4,"Nombre y apellidos"),o.k0s()()())}function Bt(e,a){1&e&&(o.j41(0,"div",33)(1,"div",49),o.nrm(2,"i",50),o.j41(3,"span"),o.EFF(4,"Nacionalidad"),o.k0s()()())}function Vt(e,a){1&e&&(o.j41(0,"div",33)(1,"div",49),o.nrm(2,"i",50),o.j41(3,"span"),o.EFF(4,"Los \xfaltimos 4 d\xedgitos del tel\xe9fono"),o.k0s()()())}function Nt(e,a){1&e&&(o.j41(0,"div",33)(1,"div",49),o.nrm(2,"i",50),o.j41(3,"span"),o.EFF(4,"Email (no recomendable)"),o.k0s()()())}function St(e,a){if(1&e&&(o.j41(0,"div",42),o.DNE(1,Tt,3,0,"div",47)(2,Gt,5,0,"div",47)(3,Bt,5,0,"div",47)(4,Vt,5,0,"div",47)(5,Nt,5,0,"div",47),o.k0s()),2&e){const t=o.XpG(2);o.R7$(),o.Y8G("ngIf",!(t.promotion.registerNecessaryFieldsName||t.promotion.registerNecessaryFieldsNationality||t.promotion.registerNecessaryFieldsLast4DigitsPhone||t.promotion.registerNecessaryFieldsEmail)),o.R7$(),o.Y8G("ngIf",t.promotion.registerNecessaryFieldsName),o.R7$(),o.Y8G("ngIf",t.promotion.registerNecessaryFieldsNationality),o.R7$(),o.Y8G("ngIf",t.promotion.registerNecessaryFieldsLast4DigitsPhone),o.R7$(),o.Y8G("ngIf",t.promotion.registerNecessaryFieldsEmail)}}function Yt(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",12)(1,"div",13)(2,"div",14),o.DNE(3,Mt,2,1,"div",15),o.j41(4,"div",16)(5,"div",1),o.EFF(6," Registro con pre-registros "),o.k0s()()(),o.j41(7,"div",17)(8,"div",18)(9,"div",19)(10,"div",20),o.EFF(11," Expira en "),o.k0s(),o.j41(12,"div",21)(13,"select",22),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.registersWithPreRegisterExpireIn,n)||(s.promotion.registersWithPreRegisterExpireIn=n),o.Njj(n)}),o.j41(14,"option",23),o.EFF(15,"7 d\xedas"),o.k0s(),o.j41(16,"option",24),o.EFF(17,"14 d\xedas"),o.k0s(),o.j41(18,"option",25),o.EFF(19,"21 d\xedas"),o.k0s(),o.j41(20,"option",26),o.EFF(21,"28 d\xedas"),o.k0s(),o.j41(22,"option",27),o.EFF(23,"2 meses"),o.k0s(),o.j41(24,"option",28),o.EFF(25,"3 meses"),o.k0s(),o.j41(26,"option",29),o.EFF(27,"4 meses"),o.k0s(),o.j41(28,"option",30),o.EFF(29,"No definido"),o.k0s(),o.j41(30,"option",31),o.EFF(31,"No expira nunca"),o.k0s()()(),o.DNE(32,jt,2,0,"div",32),o.k0s(),o.nrm(33,"div",33),o.k0s(),o.j41(34,"div",34),o.EFF(35," En esta opci\xf3n se permite el pre-registro. El registro se validar\xe1 una vez que el cliente pre-registrado haya visitado la propiedad "),o.k0s()()(),o.j41(36,"div",35)(37,"div",14),o.DNE(38,It,2,1,"div",15),o.j41(39,"div",16)(40,"div",1),o.EFF(41," Registro SIN pre-registros "),o.k0s()()(),o.j41(42,"div",17)(43,"div",18)(44,"div",33)(45,"div",20),o.EFF(46," Expira en "),o.k0s(),o.j41(47,"div",21)(48,"select",22),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.registersWithoutPreRegisterExpireIn,n)||(s.promotion.registersWithoutPreRegisterExpireIn=n),o.Njj(n)}),o.j41(49,"option",23),o.EFF(50,"7 d\xedas"),o.k0s(),o.j41(51,"option",24),o.EFF(52,"14 d\xedas"),o.k0s(),o.j41(53,"option",25),o.EFF(54,"21 d\xedas"),o.k0s(),o.j41(55,"option",26),o.EFF(56,"28 d\xedas"),o.k0s(),o.j41(57,"option",27),o.EFF(58,"2 meses"),o.k0s(),o.j41(59,"option",28),o.EFF(60,"3 meses"),o.k0s(),o.j41(61,"option",29),o.EFF(62,"4 meses"),o.k0s(),o.j41(63,"option",30),o.EFF(64,"No definido"),o.k0s(),o.j41(65,"option",31),o.EFF(66,"No expira nunca"),o.k0s()()(),o.DNE(67,kt,2,0,"div",32),o.k0s(),o.nrm(68,"div",33),o.k0s(),o.j41(69,"div",36),o.EFF(70," En esta opci\xf3n, solo se permite el pre-registro. El registro se validar\xe1 una vez que el cliente pre-registrado haya visitado la propiedad "),o.k0s()()(),o.j41(71,"div",37),o.EFF(72," Datos necesarios para el registro "),o.k0s(),o.DNE(73,Et,19,4,"div",38)(74,St,6,5,"div",38),o.k0s()}if(2&e){const t=o.XpG();o.Y8G("ngClass",o.eq3(21,Dt,t.isDisabled)),o.R7$(),o.Y8G("ngClass",o.eq3(23,J,!(t.isDisabled&&t.promotion.registersWithPreRegister||!t.isDisabled))),o.R7$(2),o.Y8G("ngIf",!t.isDisabled),o.R7$(4),o.Y8G("ngStyle",o.eq3(25,Q,t.promotion.registersWithPreRegister?"1":"0.3")),o.R7$(2),o.Y8G("appInputViewMode",t.isDisabled)("externalInputValue",t.promotion.registersWithPreRegisterExpireIn),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled)("ngClass",o.eq3(27,K,t.isFieldInvalid("registersWithPreRegisterExpireIn","preRegister"))),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.registersWithPreRegisterExpireIn),o.R7$(19),o.Y8G("ngIf",t.isFieldInvalid("registersWithPreRegisterExpireIn","preRegister")),o.R7$(4),o.Y8G("ngClass",o.eq3(29,J,!(t.isDisabled&&t.promotion.registersWithoutPreRegister||!t.isDisabled))),o.R7$(2),o.Y8G("ngIf",!t.isDisabled),o.R7$(4),o.Y8G("ngStyle",o.eq3(31,Q,t.promotion.registersWithoutPreRegister?"1":"0.5")),o.R7$(5),o.Y8G("appInputViewMode",t.isDisabled)("ngClass",o.eq3(33,K,t.isFieldInvalid("registersWithoutPreRegisterExpireIn","withoutPreRegister"))),o.R7$(),o.Y8G("disabled",t.isDisabled),o.R50("ngModel",t.promotion.registersWithoutPreRegisterExpireIn),o.R7$(19),o.Y8G("ngIf",t.isFieldInvalid("registersWithoutPreRegisterExpireIn","withoutPreRegister")),o.R7$(6),o.Y8G("ngIf",!t.isDisabled),o.R7$(),o.Y8G("ngIf",t.isDisabled)}}let Z=(()=>{var e;class a{constructor(){this.promotionUpdated=new o.bkB,this.loadingButton=!1,this.isDisabled=!0}ngOnInit(){}set promotionData(i){var n,s;this.promotion=i,null!==(n=this.promotion)&&void 0!==n&&n.registersWithoutPreRegister||null!==(s=this.promotion)&&void 0!==s&&s.registersWithPreRegister||(this.promotion.registersWithPreRegister=!0)}onEdit(){this.isDisabled=!this.isDisabled}onSave(){!this.isDisabled&&!this.isFormValid()||(this.savePromotion(),this.isDisabled=!0)}onSelectModality(i){"registersWithPreRegister"===i&&(this.promotion.registersWithoutPreRegister=!1),"registersWithoutPreRegister"===i&&(this.promotion.registersWithPreRegister=!1)}savePromotion(){this.promotionUpdated.emit({registersWithPreRegister:this.promotion.registersWithPreRegister||!1,registersWithPreRegisterExpireIn:this.promotion.registersWithPreRegisterExpireIn,registersWithoutPreRegister:this.promotion.registersWithoutPreRegister||!1,registersWithoutPreRegisterExpireIn:this.promotion.registersWithoutPreRegisterExpireIn,registerNecessaryFieldsName:this.promotion.registerNecessaryFieldsName||!1,registerNecessaryFieldsNationality:this.promotion.registerNecessaryFieldsNationality||!1,registerNecessaryFieldsLast4DigitsPhone:this.promotion.registerNecessaryFieldsLast4DigitsPhone||!1,registerNecessaryFieldsEmail:this.promotion.registerNecessaryFieldsEmail||!1})}isFieldInvalid(i,n){if(this.isDisabled||!this.promotion||"preRegister"===n&&!this.promotion.registersWithPreRegister||"withoutPreRegister"===n&&!this.promotion.registersWithoutPreRegister)return!1;const s=this.promotion[i];return null==s||"string"==typeof s&&""===s.trim()}isFormValid(){let i=!0;return this.promotion.registersWithPreRegister&&(i=i&&!this.isFieldInvalid("registersWithPreRegisterExpireIn","preRegister")),this.promotion.registersWithoutPreRegister&&(i=i&&!this.isFieldInvalid("registersWithoutPreRegisterExpireIn","withoutPreRegister")),i}}return(e=a).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-payments-details-registers"]],inputs:{currentUser:"currentUser"},outputs:{promotionUpdated:"promotionUpdated"},decls:6,vars:2,consts:[[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-section-smaller-title"],[1,"crm-buttons-group"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"appLoadingButton"],[1,"crm-button","crm-button-success",3,"appLoadingButton"],[3,"ngClass",4,"ngIf"],["class","crm-button-secondary crm-button-secondary-primary",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click","appLoadingButton"],[1,"fa-solid","fa-edit"],["class","crm-button crm-button-success",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button","crm-button-success",3,"click","appLoadingButton"],[1,"fa-solid","fa-check"],[3,"ngClass"],[1,"crm-card-user",3,"ngClass"],[1,"crm-card-user-header"],["class","crm-input-checkbox",4,"ngIf"],[1,"crm-card-user-header-data"],[1,"crm-card-user-body",2,"margin-bottom","0",3,"ngStyle"],[1,"crm-section-inputs-double-input"],[1,"crm-input",3,"appInputViewMode","externalInputValue"],[1,"crm-input-label"],[1,"crm-input-input",3,"appInputViewMode","ngClass"],["placeholder","Seleccione",3,"ngModelChange","disabled","ngModel"],["value","7"],["value","14"],["value","21"],["value","28"],["value","60"],["value","90"],["value","120"],["value","no_defined"],["value","no_expira"],["class","crm-input-error",4,"ngIf"],[1,"crm-input"],[1,"crm-text","crm-section-margin-top"],[1,"crm-card-user","crm-section-margin-top",3,"ngClass"],[1,"crm-text","crm-section-margin-top",2,"color","red"],[1,"crm-title-14","crm-section-margin-top-big"],["class","crm-section-inputs crm-section-margin-top-small crm-section-inputs-grid-input-100",4,"ngIf"],[1,"crm-input-checkbox"],[3,"ngModelChange","ionChange","ngModel"],[1,"crm-input-error"],[1,"crm-section-inputs","crm-section-margin-top-small","crm-section-inputs-grid-input-100"],[1,"crm-input-checkboxes"],["appToggleCheckbox","",1,"crm-input-checkbox"],[3,"ngModelChange","ngModel"],[1,"crm-input-checkbox-label"],["class","crm-input",4,"ngIf"],[1,"crm-input-view"],[1,"crm-input-view-checkbox",2,"display","flex","align-items","center"],[1,"fa","fa-check",2,"color","green","margin-right","5px"]],template:function(i,n){1&i&&(o.j41(0,"div",0),o.nrm(1,"div",1),o.j41(2,"div",2),o.DNE(3,Ft,1,1,"button",3)(4,Rt,1,1,"button",4),o.k0s()(),o.DNE(5,Yt,75,35,"div",5)),2&i&&(o.R7$(3),o.vxM(n.isDisabled?3:4),o.R7$(2),o.Y8G("ngIf",n.promotion))},dependencies:[u.YU,u.bT,u.B3,m.xH,m.y7,m.wz,m.BC,m.vS,g.eY,g.hB,T.M,ht.z,D.K],styles:[".crm-header-modal-empty[_ngcontent-%COMP%]{padding-right:0;padding-left:0}.crm-input-view-checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], i[_ngcontent-%COMP%]{font-size:13px}"]}),a})(),Xt=(()=>{var e;class a{constructor(){}ngOnInit(){}set promotionData(i){this.promotion=i}}return(e=a).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-payments-details-restrictions"]],decls:2,vars:0,template:function(i,n){1&i&&(o.j41(0,"p"),o.EFF(1," promotion-payments-details-restrictions works!\n"),o.k0s())},styles:[".crm-header-modal-empty[_ngcontent-%COMP%]{padding-right:0;padding-left:0}"]}),a})();const $t=e=>({"crm-section-disabled-inputs":e});function Ut(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",7),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onEdit())}),o.nrm(1,"i",8),o.EFF(2," Editar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function At(e,a){if(1&e&&o.DNE(0,Ut,3,1,"button",6),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function wt(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",10),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSave())}),o.nrm(1,"i",11),o.EFF(2," Guardar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function Ot(e,a){if(1&e&&o.DNE(0,wt,3,1,"button",9),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function Lt(e,a){1&e&&(o.j41(0,"div",16),o.EFF(1," Elige la forma de pago de las comisiones a los colaboradores\n"),o.k0s())}function Wt(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",17)(1,"ion-radio-group",18),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG(2);return o.DH7(s.promotion.methodToPayCommissions,n)||(s.promotion.methodToPayCommissions=n),o.Njj(n)}),o.j41(2,"div",19),o.nrm(3,"ion-radio",20),o.j41(4,"div",21),o.EFF(5," Parte proporcional seg\xfan paga el comprador "),o.k0s()(),o.j41(6,"div",19),o.nrm(7,"ion-radio",20),o.j41(8,"div",21),o.EFF(9," Todo a la firma de escritura p\xfablica "),o.k0s()(),o.j41(10,"div",19),o.nrm(11,"ion-radio",20),o.j41(12,"div",21),o.EFF(13," Pago completado "),o.k0s()()()()}if(2&e){const t=o.XpG(2);o.R7$(),o.R50("ngModel",t.promotion.methodToPayCommissions),o.R7$(2),o.Y8G("value","by_the_buyer_pays"),o.R7$(4),o.Y8G("value","when_public_signing"),o.R7$(4),o.Y8G("value","by_config")}}function Ht(e,a){1&e&&o.EFF(0," Parte proporcional seg\xfan paga el comprador ")}function zt(e,a){1&e&&o.EFF(0," Todo a la firma de escritura p\xfablica ")}function Jt(e,a){1&e&&o.EFF(0," Pago completado ")}function Qt(e,a){if(1&e&&(o.j41(0,"div",22),o.DNE(1,Ht,1,0)(2,zt,1,0)(3,Jt,1,0),o.k0s()),2&e){const t=o.XpG(2);o.R7$(),o.vxM("by_the_buyer_pays"===(null==t.promotion?null:t.promotion.methodToPayCommissions)?1:"when_public_signing"===(null==t.promotion?null:t.promotion.methodToPayCommissions)?2:"by_config"===(null==t.promotion?null:t.promotion.methodToPayCommissions)?3:-1)}}function Kt(e,a){if(1&e&&(o.j41(0,"div",28),o.EFF(1),o.k0s()),2&e){const t=o.XpG().$implicit;o.R7$(),o.SpI(" ",t.percentageClientPaid," % ")}}function Zt(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",29)(1,"input",31),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG().$implicit;return o.DH7(s.percentageClientPaid,n)||(s.percentageClientPaid=n),o.Njj(n)}),o.bIt("ngModelChange",function(){o.eBV(t);const n=o.XpG(4);return o.Njj(n.checkPercentagesOverflow())}),o.k0s(),o.j41(2,"div",32),o.EFF(3,"%"),o.k0s()()}if(2&e){const t=o.XpG().$implicit,i=o.XpG(3);o.R7$(),o.Y8G("disabled",i.isDisabled),o.R50("ngModel",t.percentageClientPaid)}}function qt(e,a){if(1&e&&(o.j41(0,"div",28),o.EFF(1),o.k0s()),2&e){const t=o.XpG().$implicit;o.R7$(),o.SpI(" ",t.percentageToPayCollaborator," % ")}}function oe(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",29)(1,"input",31),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG().$implicit;return o.DH7(s.percentageToPayCollaborator,n)||(s.percentageToPayCollaborator=n),o.Njj(n)}),o.bIt("ngModelChange",function(){o.eBV(t);const n=o.XpG(4);return o.Njj(n.checkPercentagesOverflow())}),o.k0s(),o.j41(2,"div",32),o.EFF(3,"%"),o.k0s()()}if(2&e){const t=o.XpG().$implicit,i=o.XpG(3);o.R7$(),o.Y8G("disabled",i.isDisabled),o.R50("ngModel",t.percentageToPayCollaborator)}}function te(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",33),o.bIt("click",function(){o.eBV(t);const n=o.XpG().$index,s=o.XpG(3);return o.Njj(s.onDelete(n))}),o.nrm(1,"i",34),o.k0s()}}function ee(e,a){if(1&e&&(o.j41(0,"div",23)(1,"div",22),o.EFF(2),o.k0s(),o.j41(3,"div",26)(4,"div",27),o.EFF(5," Pago completado por cliente "),o.k0s(),o.DNE(6,Kt,2,1,"div",28)(7,Zt,4,2,"div",29),o.k0s(),o.j41(8,"div",26)(9,"div",27),o.EFF(10," Pago a colaborador "),o.k0s(),o.DNE(11,qt,2,1,"div",28)(12,oe,4,2,"div",29),o.k0s(),o.DNE(13,te,2,0,"button",30),o.k0s()),2&e){const t=a.$index,i=o.XpG(3);o.R7$(2),o.SpI(" ",t+1," "),o.R7$(4),o.vxM(i.isDisabled?6:7),o.R7$(5),o.vxM(i.isDisabled?11:12),o.R7$(2),o.Y8G("ngIf",!i.isDisabled)}}function ne(e,a){1&e&&(o.j41(0,"div",35),o.EFF(1," La suma de los porcentajes no puede superar el 100% "),o.k0s())}function ie(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",36)(1,"button",37),o.bIt("click",function(){o.eBV(t);const n=o.XpG(3);return o.Njj(n.onAddTable())}),o.nrm(2,"i",38),o.EFF(3," A\xf1adir m\xe1s tablas "),o.k0s()()}}function se(e,a){if(1&e&&(o.Z7z(0,ee,14,4,"div",23,o.fX1),o.DNE(2,ne,2,0,"div",24)(3,ie,4,0,"div",25)),2&e){const t=o.XpG(2);o.Dyx(null==t.promotion?null:t.promotion.methodToPayCommissionsTables),o.R7$(2),o.Y8G("ngIf",t.percentagesOverflowsMaximum&&!t.isDisabled),o.R7$(),o.Y8G("ngIf",!t.isDisabled)}}function ae(e,a){if(1&e&&(o.j41(0,"div",12),o.DNE(1,Lt,2,0,"div",13)(2,Wt,14,4,"div",14)(3,Qt,4,1,"div",15)(4,se,4,2),o.k0s()),2&e){const t=o.XpG();o.Y8G("ngClass",o.eq3(5,$t,t.isDisabled)),o.R7$(),o.Y8G("ngIf",!t.isDisabled),o.R7$(),o.Y8G("ngIf",!t.isDisabled),o.R7$(),o.Y8G("ngIf",t.isDisabled),o.R7$(),o.vxM("by_config"===(null==t.promotion?null:t.promotion.methodToPayCommissions)?4:-1)}}let q=(()=>{var e;class a{constructor(){this.promotionUpdated=new o.bkB,this.loadingButton=!1,this.isDisabled=!0,this.percentagesOverflowsMaximum=!1}ngOnInit(){}set promotionData(i){this.promotion=i}onEdit(){this.isDisabled=!this.isDisabled}onSave(){this.checkPercentagesOverflow(),!this.percentagesOverflowsMaximum&&(this.savePromotion(),this.isDisabled=!0)}onAddTable(){this.promotion.methodToPayCommissionsTables&&this.promotion.methodToPayCommissionsTables.length?this.promotion.methodToPayCommissionsTables.push({percentageClientPaid:null,percentageToPayCollaborator:null}):this.promotion.methodToPayCommissionsTables=[{percentageClientPaid:null,percentageToPayCollaborator:null}]}onDelete(i){this.promotion.methodToPayCommissionsTables.splice(i,1)}savePromotion(){this.promotionUpdated.emit({methodToPayCommissions:this.promotion.methodToPayCommissions,methodToPayCommissionsTables:this.promotion.methodToPayCommissionsTables})}checkPercentagesOverflow(){var i;const n=(null===(i=this.promotion)||void 0===i?void 0:i.methodToPayCommissionsTables)||[],s=n.reduce((c,d)=>c+(Number(d.percentageClientPaid)||0),0),r=n.reduce((c,d)=>c+(Number(d.percentageToPayCollaborator)||0),0);this.percentagesOverflowsMaximum=s>100||r>100}}return(e=a).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-payments-details-commission-payment-method"]],inputs:{currentUser:"currentUser"},outputs:{promotionUpdated:"promotionUpdated"},decls:6,vars:2,consts:[[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-section-smaller-title"],[1,"crm-buttons-group"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"appLoadingButton"],[1,"crm-button","crm-button-success",3,"appLoadingButton"],[3,"ngClass",4,"ngIf"],["class","crm-button-secondary crm-button-secondary-primary",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click","appLoadingButton"],[1,"fa-solid","fa-edit"],["class","crm-button crm-button-success",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button","crm-button-success",3,"click","appLoadingButton"],[1,"fa-solid","fa-check"],[3,"ngClass"],["class","crm-title-14",4,"ngIf"],["class","crm-input crm-input-radio-box crm-section-margin-top",4,"ngIf"],["class","crm-text",4,"ngIf"],[1,"crm-title-14"],[1,"crm-input","crm-input-radio-box","crm-section-margin-top"],[1,"crm-input-radios-vertical",3,"ngModelChange","ngModel"],[1,"crm-input-radio"],[3,"value"],[1,"crm-input-radio-label"],[1,"crm-text"],[1,"crm-section-inputs-double-input","crm-section-margin-top-medium",2,"align-items","center"],["class","crm-input-error crm-section-margin-top",4,"ngIf"],["class","crm-section-margin-top","style","display: flex; justify-content: center;",4,"ngIf"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-view"],[1,"crm-input-input"],["class","crm-button-icon-solo",3,"click",4,"ngIf"],["type","number","placeholder","Inserta el porcentaje (%)",3,"ngModelChange","disabled","ngModel"],[1,"crm-input-input-symbol"],[1,"crm-button-icon-solo",3,"click"],[1,"fas","fa-trash"],[1,"crm-input-error","crm-section-margin-top"],[1,"crm-section-margin-top",2,"display","flex","justify-content","center"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"fa-solid","fa-add"]],template:function(i,n){1&i&&(o.j41(0,"div",0),o.nrm(1,"div",1),o.j41(2,"div",2),o.DNE(3,At,1,1,"button",3)(4,Ot,1,1,"button",4),o.k0s()(),o.DNE(5,ae,5,7,"div",5)),2&i&&(o.R7$(3),o.vxM(n.isDisabled?3:4),o.R7$(2),o.Y8G("ngIf",n.promotion))},dependencies:[u.YU,u.bT,m.me,m.Q0,m.BC,m.vS,g.KO,g.f0,g.Je,D.K],styles:[".crm-header-modal-empty[_ngcontent-%COMP%]{padding-right:0;padding-left:0}"]}),a})();var re=l(8392),le=l(9333),me=l(4035);const ce=e=>({"crm-section-disabled-inputs":e}),oo=()=>({});function de(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",7),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onEdit())}),o.nrm(1,"i",8),o.EFF(2," Editar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function pe(e,a){if(1&e&&o.DNE(0,de,3,1,"button",6),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function ue(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",10),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onSave())}),o.nrm(1,"i",11),o.EFF(2," Guardar "),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("appLoadingButton",t.loadingButton)}}function _e(e,a){if(1&e&&o.DNE(0,ue,3,1,"button",9),2&e){const t=o.XpG();o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function ge(e,a){if(1&e&&(o.j41(0,"div",15)(1,"div",17)(2,"div",18),o.nrm(3,"img",19),o.k0s(),o.j41(4,"div",20)(5,"div",21),o.EFF(6),o.k0s(),o.j41(7,"div",22),o.EFF(8),o.k0s()()()()),2&e){const t=o.XpG(3);o.R7$(3),o.Y8G("src",(null==t.selectedCompany?null:t.selectedCompany.photoUrl)||"assets/images/avatar.png",o.B4B),o.R7$(3),o.SpI(" ",null==t.selectedCompany?null:t.selectedCompany.name," "),o.R7$(2),o.SpI(" ",null==t.selectedCompany||null==t.selectedCompany.emails?null:t.selectedCompany.emails[0]," ")}}function ve(e,a){if(1&e){const t=o.RV6();o.j41(0,"div")(1,"app-contacts-searchbar",16),o.bIt("changeInput",function(n){o.eBV(t);const s=o.XpG(2);return o.Njj(s.onSearchCompany(n))})("contactSelected",function(n){o.eBV(t);const s=o.XpG(2);return o.Njj(s.onSelectCompany(n))}),o.k0s(),o.DNE(2,ge,9,3,"div",15),o.k0s()}if(2&e){const t=o.XpG(2);o.R7$(2),o.vxM(t.selectedCompany?2:-1)}}function ye(e,a){if(1&e&&(o.j41(0,"div",15)(1,"div",17)(2,"div",18),o.nrm(3,"img",19),o.k0s(),o.j41(4,"div",20)(5,"div",21),o.EFF(6),o.k0s(),o.j41(7,"div",22),o.EFF(8),o.k0s()()()()),2&e){const t=o.XpG(2);o.R7$(3),o.Y8G("src",(null==t.promotion||null==t.promotion.contactAsCompany?null:t.promotion.contactAsCompany.photoUrl)||"assets/images/avatar.png",o.B4B),o.R7$(3),o.SpI(" ",null==t.promotion||null==t.promotion.contactAsCompany?null:t.promotion.contactAsCompany.name," "),o.R7$(2),o.SpI(" ",null==t.promotion||null==t.promotion.contactAsCompany||null==t.promotion.contactAsCompany.emails?null:t.promotion.contactAsCompany.emails[0]," ")}}function Ce(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",23)(1,"div",24)(2,"ion-checkbox",25),o.bIt("ionChange",function(){const n=o.eBV(t).$implicit,s=o.XpG(3);return o.Njj(s.onClickCheckbox(null==n||null==n.contactRelated?null:n.contactRelated.id))}),o.k0s()(),o.j41(3,"div",26)(4,"div",17)(5,"div",18),o.nrm(6,"img",19),o.k0s(),o.j41(7,"div",20)(8,"div",21),o.EFF(9),o.k0s(),o.j41(10,"div",22),o.EFF(11),o.k0s()()()()()}if(2&e){const t=a.$implicit,i=o.XpG(3);o.R7$(2),o.Y8G("checked",i.selectedContacts.includes(null==t||null==t.contactRelated?null:t.contactRelated.id)),o.R7$(4),o.Y8G("src",(null==t||null==t.contactRelated?null:t.contactRelated.photoUrl)||"assets/images/avatar.png",o.B4B),o.R7$(3),o.SpI(" ",null==t||null==t.contactRelated?null:t.contactRelated.name," "),o.R7$(2),o.SpI(" ",null==t||null==t.contactRelated||null==t.contactRelated.emails?null:t.contactRelated.emails[0]," ")}}function Pe(e,a){if(1&e&&o.Z7z(0,Ce,12,4,"div",23,o.fX1),2&e){const t=o.XpG(2);o.Dyx(null==t.selectedCompany?null:t.selectedCompany.contactsRelation)}}function fe(e,a){if(1&e&&(o.j41(0,"div",23)(1,"div",26)(2,"div",17)(3,"div",18),o.nrm(4,"img",19),o.k0s(),o.j41(5,"div",20)(6,"div",21),o.EFF(7),o.k0s(),o.j41(8,"div",22),o.EFF(9),o.k0s()()()()()),2&e){const t=o.XpG().$implicit;o.R7$(4),o.Y8G("src",(null==t||null==t.contactRelated?null:t.contactRelated.photoUrl)||"assets/images/avatar.png",o.B4B),o.R7$(3),o.SpI(" ",null==t||null==t.contactRelated?null:t.contactRelated.name," "),o.R7$(2),o.SpI(" ",null==t||null==t.contactRelated||null==t.contactRelated.emails?null:t.contactRelated.emails[0]," ")}}function he(e,a){if(1&e&&o.DNE(0,fe,10,3,"div",23),2&e){const t=a.$implicit,i=o.XpG(3);o.vxM(i.selectedContacts.includes(null==t||null==t.contactRelated?null:t.contactRelated.id)?0:-1)}}function De(e,a){if(1&e&&o.Z7z(0,he,1,1,null,null,o.fX1),2&e){const t=o.XpG(2);o.Dyx(null==t.promotion.contactAsCompany?null:t.promotion.contactAsCompany.contactsRelation)}}function be(e,a){if(1&e&&(o.j41(0,"div",12)(1,"div",13),o.EFF(2," Empresa "),o.k0s(),o.j41(3,"div",14),o.DNE(4,ve,3,1,"div")(5,ye,9,3,"div",15),o.k0s(),o.j41(6,"div",13),o.EFF(7," Contacto asociado "),o.k0s(),o.j41(8,"div",14),o.DNE(9,Pe,2,0)(10,De,2,0),o.k0s()()),2&e){const t=o.XpG();o.Y8G("ngClass",o.eq3(5,ce,t.isDisabled)),o.R7$(3),o.Y8G("ngClass",o.lJ4(7,oo)),o.R7$(),o.vxM(t.isDisabled?t.isDisabled&&t.promotion.contactAsCompany?5:-1:4),o.R7$(4),o.Y8G("ngClass",o.lJ4(8,oo)),o.R7$(),o.vxM(!t.isDisabled&&t.selectedCompany&&null!=t.selectedCompany&&t.selectedCompany.contactsRelation?9:t.isDisabled&&t.promotion.contactAsCompany?10:-1)}}let to=(()=>{var e;class a{constructor(i){this.contactsService=i,this.promotionUpdated=new o.bkB,this.loadingButton=!1,this.isDisabled=!0,this.selectedCompany=null,this.selectedContacts=[],this.contactFormOptions=re.R}ngOnInit(){}onEdit(){var i;this.isDisabled=!this.isDisabled,this.selectedCompany=null===(i=this.promotion)||void 0===i?void 0:i.contactAsCompany}set promotionData(i){var n,s,r,c;this.promotion=i,null!==(n=this.promotion)&&void 0!==n&&n.contactAsCompany&&(this.selectedContacts=null===(c=this.promotion)||void 0===c||null===(c=c.contactAsCompany)||void 0===c?void 0:c.companyResponsibleContactsIds),null!==(s=this.promotion)&&void 0!==s&&s.registersWithoutPreRegister||null!==(r=this.promotion)&&void 0!==r&&r.registersWithPreRegister||(this.promotion.registersWithPreRegister=!0)}onSave(){this.savePromotion(),this.isDisabled=!0}onSelectCompany(i){i=y.cloneDeep(i),this.selectedCompany=i}onSearchCompany(i){}onClickCheckbox(i){if(this.selectedContacts.includes(i)){const n=this.selectedContacts.filter(s=>s!==i);this.selectedContacts=n}else this.selectedContacts.push(i)}savePromotion(){var i=this;return(0,P.A)(function*(){let n=i.selectedCompany.id,s=i.selectedContacts;i.promotionUpdated.emit({contactAsCompanyId:n}),yield i.contactsService.updateContactById(n,{companyResponsibleContactsIds:s})})()}}return(e=a).\u0275fac=function(i){return new(i||e)(o.rXU(le.F))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-payments-details-company"]],inputs:{currentUser:"currentUser"},outputs:{promotionUpdated:"promotionUpdated"},decls:6,vars:2,consts:[[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-section-smaller-title"],[1,"crm-buttons-group"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"appLoadingButton"],[1,"crm-button","crm-button-success",3,"appLoadingButton"],[3,"ngClass",4,"ngIf"],["class","crm-button-secondary crm-button-secondary-primary",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click","appLoadingButton"],[1,"fa-solid","fa-edit"],["class","crm-button crm-button-success",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button","crm-button-success",3,"click","appLoadingButton"],[1,"fa-solid","fa-check"],[3,"ngClass"],[1,"crm-section-smaller-title","py-[10px]"],[1,"crm-card-user",3,"ngClass"],[1,"crm-item-associated-user","mt-10"],["context","show_create_contact",3,"changeInput","contactSelected"],[1,"crm-item-associated-user-left"],[1,"crm-item-associated-user-left-image"],["alt","",3,"src"],[1,"crm-item-associated-user-left-info"],[1,"crm-item-associated-user-left-info-name"],[1,"crm-item-associated-user-left-info-email"],[1,"flex","justify-start","items-center"],[1,"mt-[15px]"],[3,"ionChange","checked"],[1,"crm-item-associated-user","mt-10","justify-start"]],template:function(i,n){1&i&&(o.j41(0,"div",0),o.nrm(1,"div",1),o.j41(2,"div",2),o.DNE(3,pe,1,1,"button",3)(4,_e,1,1,"button",4),o.k0s()(),o.DNE(5,be,11,9,"div",5)),2&i&&(o.R7$(3),o.vxM(n.isDisabled?3:4),o.R7$(2),o.Y8G("ngIf",n.promotion))},dependencies:[u.YU,u.bT,g.eY,g.hB,D.K,me.y]}),a})();const R=e=>({"background-color":e}),b=e=>({"crm-section-invisible":e});let eo=(()=>{var e;class a{constructor(i,n,s,r){this.utils=i,this.api=n,this.toastService=s,this.state=r,this.updatePromotion=new o.bkB,this.allSectionsCompleted=new o.bkB,this.dropdownSections={commission:!0,comissionsPaymentMethod:!0,paymentMethod:!0,deliveryDate:!0,registers:!0,restrictions:!0,company:!0},this.incompletedSectionsBackgrounds={commission:null,comissionsPaymentMethod:null,paymentMethod:null,deliveryDate:null,registers:null,restrictions:null,company:null}}ngOnInit(){}set promotionData(i){console.log("QUE TAL "),this.promotion=i,this.deliveryDate.promotionData=y.cloneDeep(i),this.commission.promotionData=y.cloneDeep(i),this.commissionsPaymentMethod.promotionData=y.cloneDeep(i),this.paymentMethod.promotionData=y.cloneDeep(i),this.registers.promotionData=y.cloneDeep(i),this.company.promotionData=y.cloneDeep(i),this.detectIfNoConfigIsSet()}checkIncompletedSections(){}detectIfNoConfigIsSet(){var i,n,s,r,c,d,v,_,f,h,M,j,I,k;this.deliveryDate.isDisabled=(null===(i=this.promotion)||void 0===i?void 0:i.deliveryDateModalityByStatus)||(null===(n=this.promotion)||void 0===n?void 0:n.deliveryDateModalityByMonths),this.incompletedSectionsBackgrounds.deliveryDate=null!==(s=this.promotion)&&void 0!==s&&s.deliveryDateModalityByStatus||null!==(r=this.promotion)&&void 0!==r&&r.deliveryDateModalityByMonths?null:"#f8d7da",this.commission.isDisabled=!(null===(c=this.promotion)||void 0===c||!c.sellCommissionPercentage),this.incompletedSectionsBackgrounds.commission=null!==(d=this.promotion)&&void 0!==d&&d.sellCommissionPercentage?null:"#f8d7da",this.commissionsPaymentMethod.isDisabled=!(null===(v=this.promotion)||void 0===v||!v.methodToPayCommissions),this.incompletedSectionsBackgrounds.comissionsPaymentMethod=null!==(_=this.promotion)&&void 0!==_&&_.methodToPayCommissions?null:"#f8d7da",this.paymentMethod.isDisabled=!(null===(f=this.promotion)||void 0===f||!f.reservePayment),this.incompletedSectionsBackgrounds.paymentMethod=null!==(h=this.promotion)&&void 0!==h&&h.reservePayment?null:"#f8d7da",this.registers.isDisabled=!!(null!==(M=this.promotion)&&void 0!==M&&M.registersWithPreRegister||null!==(j=this.promotion)&&void 0!==j&&j.registersWithoutPreRegister),this.incompletedSectionsBackgrounds.registers=null!==(I=this.promotion)&&void 0!==I&&I.registersWithPreRegister||null!==(k=this.promotion)&&void 0!==k&&k.registersWithoutPreRegister?null:"#f8d7da",console.log("HOLA DETECTED"),this.allSectionsCompleted.emit(null===this.incompletedSectionsBackgrounds.deliveryDate&&null===this.incompletedSectionsBackgrounds.commission&&null===this.incompletedSectionsBackgrounds.comissionsPaymentMethod&&null===this.incompletedSectionsBackgrounds.paymentMethod&&null===this.incompletedSectionsBackgrounds.registers)}onPromotionUpdate(i){var n=this;return(0,P.A)(function*(){var s;const r=n.utils.parseProperties(i),d=(yield n.api.updatePromotionById(n.promotion.id,r),yield n.utils.detectIfPromotionIsCompleted(n.promotion));console.log("EL PAYMENT IS COMPLETED?????",d),yield n.api.updatePromotionById(n.promotion.id,{promotionPaymentInfoIsCompleted:d}),n.toastService.showSuccessToast("Promoci\xf3n actualizada correctamente");const _=yield n.api.getPromotionFullDataById(n.promotion.id),f=null==_||null===(s=_.success)||void 0===s?void 0:s.data;n.promotionData=y.cloneDeep(f),n.detectIfNoConfigIsSet(),n.updatePromotion.emit()})()}}return(e=a).\u0275fac=function(i){return new(i||e)(o.rXU(E.T),o.rXU(V.i),o.rXU(N.f),o.rXU(S.c))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-payments-details"]],viewQuery:function(i,n){if(1&i&&(o.GBs(O,5),o.GBs(z,5),o.GBs(H,5),o.GBs(Z,5),o.GBs(Xt,5),o.GBs(q,5),o.GBs(to,5)),2&i){let s;o.mGM(s=o.lsd())&&(n.commission=s.first),o.mGM(s=o.lsd())&&(n.paymentMethod=s.first),o.mGM(s=o.lsd())&&(n.deliveryDate=s.first),o.mGM(s=o.lsd())&&(n.registers=s.first),o.mGM(s=o.lsd())&&(n.restrictions=s.first),o.mGM(s=o.lsd())&&(n.commissionsPaymentMethod=s.first),o.mGM(s=o.lsd())&&(n.company=s.first)}},inputs:{currentUser:"currentUser"},outputs:{updatePromotion:"updatePromotion",allSectionsCompleted:"allSectionsCompleted"},decls:37,vars:44,consts:[[1,"crm-block-dropdown","small","crm-section-margin-top",3,"click","ngStyle"],[1,"crm-section-title"],[1,"crm-block-dropdown-icon"],[3,"name"],[1,"crm-section","size-large",3,"ngClass"],[1,"crm-section-margin-bottom-big",3,"promotionUpdated","currentUser"],[1,"crm-block-dropdown","small",3,"click","ngStyle"],[1,"crm-block-dropdown",3,"click","ngStyle"],[1,"",3,"promotionUpdated","currentUser"]],template:function(i,n){1&i&&(o.j41(0,"div",0),o.bIt("click",function(){return n.dropdownSections.deliveryDate=!n.dropdownSections.deliveryDate}),o.j41(1,"div",1),o.EFF(2," Fecha de entrega "),o.k0s(),o.j41(3,"div",2),o.nrm(4,"ion-icon",3),o.k0s()(),o.j41(5,"div",4)(6,"app-promotion-payments-details-delivery-date",5),o.bIt("promotionUpdated",function(r){return n.onPromotionUpdate(r)}),o.k0s()(),o.j41(7,"div",6),o.bIt("click",function(){return n.dropdownSections.paymentMethod=!n.dropdownSections.paymentMethod}),o.j41(8,"div",1),o.EFF(9," Forma de pago "),o.k0s(),o.j41(10,"div",2),o.nrm(11,"ion-icon",3),o.k0s()(),o.j41(12,"div",4)(13,"app-promotion-payments-details-payment-method",5),o.bIt("promotionUpdated",function(r){return n.onPromotionUpdate(r)}),o.k0s()(),o.j41(14,"div",7),o.bIt("click",function(){return n.dropdownSections.commission=!n.dropdownSections.commission}),o.j41(15,"div",1),o.EFF(16," Comisiones "),o.k0s(),o.j41(17,"div",2),o.nrm(18,"ion-icon",3),o.k0s()(),o.j41(19,"div",4)(20,"app-promotion-payments-details-commission",5),o.bIt("promotionUpdated",function(r){return n.onPromotionUpdate(r)}),o.k0s()(),o.j41(21,"div",6),o.bIt("click",function(){return n.dropdownSections.comissionsPaymentMethod=!n.dropdownSections.comissionsPaymentMethod}),o.j41(22,"div",1),o.EFF(23," Forma de pago de las comisiones "),o.k0s(),o.j41(24,"div",2),o.nrm(25,"ion-icon",3),o.k0s()(),o.j41(26,"div",4)(27,"app-promotion-payments-details-commission-payment-method",5),o.bIt("promotionUpdated",function(r){return n.onPromotionUpdate(r)}),o.k0s()(),o.j41(28,"div",6),o.bIt("click",function(){return n.dropdownSections.registers=!n.dropdownSections.registers}),o.j41(29,"div",1),o.EFF(30," Registros "),o.k0s(),o.j41(31,"div",2),o.nrm(32,"ion-icon",3),o.k0s()(),o.j41(33,"div",4)(34,"app-promotion-payments-details-registers",5),o.bIt("promotionUpdated",function(r){return n.onPromotionUpdate(r)}),o.k0s()(),o.j41(35,"div",4)(36,"app-promotion-payments-details-company",8),o.bIt("promotionUpdated",function(r){return n.onPromotionUpdate(r)}),o.k0s()()),2&i&&(o.Y8G("ngStyle",o.eq3(22,R,n.incompletedSectionsBackgrounds.deliveryDate)),o.R7$(4),o.Y8G("name",n.dropdownSections.deliveryDate?"chevron-up-outline":"chevron-down-outline"),o.R7$(),o.Y8G("ngClass",o.eq3(24,b,!n.dropdownSections.deliveryDate)),o.R7$(),o.Y8G("currentUser",n.currentUser),o.R7$(),o.Y8G("ngStyle",o.eq3(26,R,n.incompletedSectionsBackgrounds.paymentMethod)),o.R7$(4),o.Y8G("name",n.dropdownSections.paymentMethod?"chevron-up-outline":"chevron-down-outline"),o.R7$(),o.Y8G("ngClass",o.eq3(28,b,!n.dropdownSections.paymentMethod)),o.R7$(),o.Y8G("currentUser",n.currentUser),o.R7$(),o.Y8G("ngStyle",o.eq3(30,R,n.incompletedSectionsBackgrounds.commission)),o.R7$(4),o.Y8G("name",n.dropdownSections.commission?"chevron-up-outline":"chevron-down-outline"),o.R7$(),o.Y8G("ngClass",o.eq3(32,b,!n.dropdownSections.commission)),o.R7$(),o.Y8G("currentUser",n.currentUser),o.R7$(),o.Y8G("ngStyle",o.eq3(34,R,n.incompletedSectionsBackgrounds.comissionsPaymentMethod)),o.R7$(4),o.Y8G("name",n.dropdownSections.comissionsPaymentMethod?"chevron-up-outline":"chevron-down-outline"),o.R7$(),o.Y8G("ngClass",o.eq3(36,b,!n.dropdownSections.comissionsPaymentMethod)),o.R7$(),o.Y8G("currentUser",n.currentUser),o.R7$(),o.Y8G("ngStyle",o.eq3(38,R,n.incompletedSectionsBackgrounds.registers)),o.R7$(4),o.Y8G("name",n.dropdownSections.registers?"chevron-up-outline":"chevron-down-outline"),o.R7$(),o.Y8G("ngClass",o.eq3(40,b,!n.dropdownSections.registers)),o.R7$(),o.Y8G("currentUser",n.currentUser),o.R7$(),o.Y8G("ngClass",o.eq3(42,b,!n.dropdownSections.company)),o.R7$(),o.Y8G("currentUser",n.currentUser))},dependencies:[u.YU,u.B3,g.iq,O,H,z,Z,q,to],styles:[".crm-block-dropdown[_ngcontent-%COMP%]{padding-left:8px}"]}),a})();var no=l(5768),Fe=l(8031),io=l(2652),xe=l(4476);const Re=e=>({"crm-section-inputs-grid-input-100":e});function Me(e,a){if(1&e&&(o.j41(0,"div",24),o.nrm(1,"app-general-toast",25),o.k0s()),2&e){const t=o.XpG(2);o.R7$(),o.Y8G("options",t.toastConfig)}}function je(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",27),o.bIt("click",function(){o.eBV(t);const n=o.XpG(3);return o.Njj(n.onEditPromotion())}),o.nrm(1,"i",28),o.EFF(2," Editar promoci\xf3n "),o.k0s()}if(2&e){const t=o.XpG(3);o.Y8G("appLoadingButton",t.loadingButton)}}function Ie(e,a){if(1&e&&o.DNE(0,je,3,1,"button",26),2&e){const t=o.XpG(2);o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function ke(e,a){if(1&e){const t=o.RV6();o.j41(0,"button",30),o.bIt("click",function(){o.eBV(t);const n=o.XpG(3);return o.Njj(n.onSavePromotion())}),o.nrm(1,"i",31),o.EFF(2," Guardar promoci\xf3n "),o.k0s()}if(2&e){const t=o.XpG(3);o.Y8G("appLoadingButton",t.loadingButton)}}function Ee(e,a){if(1&e&&o.DNE(0,ke,3,1,"button",29),2&e){const t=o.XpG(2);o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function Te(e,a){if(1&e){const t=o.RV6();o.j41(0,"app-file-item-preview",33),o.bIt("click",function(){o.eBV(t);const n=o.XpG().$index,s=o.XpG(2);return o.Njj(s.openLightbox(n))}),o.k0s()}if(2&e){const t=o.XpG().$implicit;o.Y8G("showName",!1)("size","full")("showRemove",!1)("file",t)}}function Ge(e,a){if(1&e&&o.DNE(0,Te,1,4,"app-file-item-preview",32),2&e){const t=a.$implicit,i=o.XpG(2);o.vxM(i.utils.isImageFile(null==t?null:t.label)?0:-1)}}function Be(e,a){if(1&e){const t=o.RV6();o.DNE(0,Me,2,1,"div",4),o.j41(1,"div",5)(2,"div",6)(3,"div",7),o.nrm(4,"div",8),o.j41(5,"div",9),o.DNE(6,Ie,1,1,"button",10)(7,Ee,1,1,"button",11),o.k0s()(),o.j41(8,"div",12),o.Z7z(9,Ge,1,1,null,null,o.fX1),o.k0s(),o.j41(11,"div"),o.nrm(12,"app-step-one-promotion-form",13,0)(14,"app-step-three-promotion-form",13,1)(16,"app-step-two-promotion-form",14,2),o.j41(18,"div",15),o.EFF(19," M\xe1s caracter\xedsticas "),o.k0s(),o.nrm(20,"br"),o.j41(21,"div",16),o.nrm(22,"br"),o.j41(23,"div",17)(24,"div",18),o.EFF(25,"H1"),o.k0s(),o.j41(26,"div",19)(27,"input",20),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.webH1,n)||(s.promotion.webH1=n),o.Njj(n)}),o.k0s()()(),o.j41(28,"div",17)(29,"div",18),o.EFF(30,"Descripci\xf3n"),o.k0s(),o.j41(31,"div",21)(32,"textarea",22),o.mxI("ngModelChange",function(n){o.eBV(t);const s=o.XpG();return o.DH7(s.promotion.webDescription,n)||(s.promotion.webDescription=n),o.Njj(n)}),o.k0s()()()()()(),o.j41(33,"div",6)(34,"app-promotion-payments-details",23,3),o.bIt("updatePromotion",function(){o.eBV(t);const n=o.XpG();return o.Njj(n.reloadPromotionData())}),o.k0s()()()}if(2&e){const t=o.XpG();o.Y8G("ngIf",!(null!=t.promotion&&t.promotion.promotionPaymentInfoIsCompleted)),o.R7$(6),o.vxM(t.disabled?6:7),o.R7$(3),o.Dyx(null==t.promotion?null:t.promotion.promotionFiles),o.R7$(3),o.Y8G("disabled",t.disabled),o.R7$(2),o.Y8G("disabled",t.disabled),o.R7$(2),o.Y8G("isDisabled",t.disabled),o.R7$(5),o.Y8G("ngClass",o.eq3(11,Re,!t.disabled)),o.R7$(6),o.R50("ngModel",t.promotion.webH1),o.Y8G("disabled",t.disabled),o.R7$(5),o.R50("ngModel",t.promotion.webDescription),o.Y8G("disabled",t.disabled),o.R7$(2),o.Y8G("currentUser",t.currentUser)}}let Ve=(()=>{var e;class a{constructor(i,n,s,r,c,d,v){this.promotionTransformersService=i,this.utils=n,this.router=s,this.api=r,this.toastService=c,this.state=d,this.modalController=v,this.reloadPromotion=new o.bkB,this.disabled=!1,this.loadingButton=!1,this.allSectionsCompleted=!0,this.loadingAllData=!0,this.toastConfig={text:"Por favor, rellena todos los campos obligatorios de la promoci\xf3n",theme:"orange",fullWidth:!0,showCloseButton:!1,smaller:!0}}ngAfterViewInit(){var i=this;return(0,P.A)(function*(){i.disabled=!1,i.loadingAllData=!0,yield i.getCurrentPromotion(),setTimeout(()=>{i.setFormValues(),i.getState(),i.disabled||setTimeout(()=>{i.disabled=!0,i.stepThreeForm.syncFiles()})})})()}getState(){this.state.getState().subscribe(i=>{this.currentUser=i.user})}getCurrentPromotion(){var i=this;return(0,P.A)(function*(){var n;i.loadingAllData=!0;const s=yield i.api.getPromotionFullDataById(i.promotionId);i.promotion=null==s||null===(n=s.success)||void 0===n?void 0:n.data,console.log("PROMOTION",i.promotion),i.loadingAllData=!1})()}setFormValues(){const i=this.promotionTransformersService.transformPromotionFormStepOne(this.promotion);this.stepOneForm.promotionStepOne=i,this.stepTwoForm.promotionStepTwo=this.promotion;const n=this.promotionTransformersService.transformPromotionFormStepThree(this.promotion);console.log("PROMOTION STEP THREE",n),this.stepThreeForm.promotionStepThree=n,this.stepThreeForm.syncFiles(),console.log("HACE ALGO?"),this.paymentDetails.promotionData=y.cloneDeep(this.promotion)}onEditPromotion(){this.disabled=!1,this.stepThreeForm.syncFiles()}onSavePromotion(){var i=this;return(0,P.A)(function*(){i.loadingButton=!0,i.promotion={...i.promotion,...i.stepTwoForm.promotionStepTwo,...i.stepOneForm.promotionStepOne,...i.stepThreeForm.promotionStepThree},y.cloneDeep(i.stepThreeForm.fileUploaderManager.config.files),delete i.promotion.promotionBlocks,delete i.promotion.propertiesCount,delete i.promotion.checked,delete i.promotion.promotionFiles,delete i.promotion.properties,delete i.promotion.promoter,delete i.promotion.contactAsCompany;const s=i.utils.parseProperties(i.promotion),r=yield i.api.updatePromotionById(i.promotion.id,s);if(!r.success)return console.error(r.error),void i.toastService.showToast({text:r.error.errorMessage,theme:"red",time:2e3});{var c,d,v,_;let un=[...y.cloneDeep(null===(c=i.stepThreeForm)||void 0===c||null===(c=c.fileUploaderManager)||void 0===c||null===(c=c.config)||void 0===c?void 0:c.files)||[],...y.cloneDeep(null===(d=i.stepThreeForm)||void 0===d||null===(d=d.planosFileUploadManagerComponent)||void 0===d||null===(d=d.config)||void 0===d?void 0:d.files)||[],...y.cloneDeep(null===(v=i.stepThreeForm)||void 0===v||null===(v=v.catalogsFileUploadManagerComponent)||void 0===v||null===(v=v.config)||void 0===v?void 0:v.files)||[],...y.cloneDeep(null===(_=i.stepThreeForm)||void 0===_||null===(_=_.videosFileUploadManagerComponent)||void 0===_||null===(_=_.config)||void 0===_?void 0:_.files)||[]];for(let p of un){if(null!=p&&p.new){var f,h;const C={promotionId:null===(f=i.promotion)||void 0===f?void 0:f.id,name:"",category:p.category,label:p.label,orderIndex:null==p?void 0:p.orderIndex},B=yield i.api.uploadFile(p.fileBlob),_n=null==B||null===(h=B.success)||void 0===h||null===(h=h.data)||void 0===h?void 0:h.fileName;C.name=_n,yield i.api.addPromotionFile(C)}if(null!=p&&p.deleted&&(yield i.api.removePromotionFileById(null==p?void 0:p.id)),null!=p&&p.moved&&(null==p||!p.deleted)&&(null==p||!p.new)){let C=y.cloneDeep(p);delete C.moved,delete C.fileBase64,delete C.fileBlob,delete C.new,delete C.deleted,delete C.size,delete C.type,console.log("FILE COPYYYYYY "+(null==C?void 0:C.orderIndex),C),yield i.api.editPromotionFile(C)}}i.toastService.showSuccessToast("Promoci\xf3n actualizada correctamente"),i.disabled=!0,i.stepThreeForm.disableFilesInputs(),yield i.reloadPromotionData()}i.loadingButton=!1})()}reloadPromotionData(){var i=this;return(0,P.A)(function*(){i.reloadPromotion.emit(),i.ngAfterViewInit()})()}openLightbox(i){var n=this;return(0,P.A)(function*(){var s,r;console.log("PROMOTION FILES",null===(s=n.promotion)||void 0===s?void 0:s.promotionFiles);let c=y.cloneDeep(null===(r=n.promotion)||void 0===r?void 0:r.promotionFiles).filter(_=>n.utils.isImageFile(null==_?void 0:_.label));const d=yield n.modalController.create({component:no.$,componentProps:{items:c,currentIndex:i||0},cssClass:"lightbox-modal-class",animated:!1});yield d.present();const{data:v}=yield d.onDidDismiss();console.log("Lightbox closed, data returned:",v)})()}}return(e=a).\u0275fac=function(i){return new(i||e)(o.rXU(Fe.J),o.rXU(E.T),o.rXU(F.Ix),o.rXU(V.i),o.rXU(N.f),o.rXU(S.c),o.rXU(g.W3))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-details-info"]],viewQuery:function(i,n){if(1&i&&(o.GBs(U.N,5),o.GBs(w.T,5),o.GBs(A.f,5),o.GBs(eo,5)),2&i){let s;o.mGM(s=o.lsd())&&(n.stepOneForm=s.first),o.mGM(s=o.lsd())&&(n.stepTwoForm=s.first),o.mGM(s=o.lsd())&&(n.stepThreeForm=s.first),o.mGM(s=o.lsd())&&(n.paymentDetails=s.first)}},inputs:{promotionId:"promotionId"},outputs:{reloadPromotion:"reloadPromotion"},decls:1,vars:1,consts:[["stepOneForm",""],["stepThreeForm",""],["stepTwoForm",""],["paymentDetails",""],["style","margin-bottom: 16px; width: 100%;","class","crm-section",4,"ngIf"],[1,"crm-boxes-user-create"],[1,"crm-box","crm-section"],[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-section-title"],[1,"crm-buttons-group"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"appLoadingButton"],[1,"crm-button","crm-button-success",3,"appLoadingButton"],[1,"crm-section-files-previews-promotion-images"],[3,"disabled"],[3,"isDisabled"],[1,"crm-section-smaller-title","crm-section-margin-top"],[1,"crm-section-inputs","crm-section-inputs-grid",3,"ngClass"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input"],["type","text","placeholder","Introduce el H1 para la web",3,"ngModelChange","ngModel","disabled"],[1,"crm-input-textarea"],["placeholder","Introduce la descripci\xf3n de la web",3,"ngModelChange","ngModel","disabled"],[3,"updatePromotion","currentUser"],[1,"crm-section",2,"margin-bottom","16px","width","100%"],[3,"options"],["class","crm-button-secondary crm-button-secondary-primary",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click","appLoadingButton"],[1,"fa-solid","fa-edit"],["class","crm-button crm-button-success",3,"appLoadingButton","click",4,"ngIf"],[1,"crm-button","crm-button-success",3,"click","appLoadingButton"],[1,"fa-solid","fa-check"],[3,"showName","size","showRemove","file"],[3,"click","showName","size","showRemove","file"]],template:function(i,n){1&i&&o.DNE(0,Be,36,13),2&i&&o.vxM(n.loadingAllData?-1:0)},dependencies:[u.YU,u.bT,m.me,m.BC,m.vS,U.N,w.T,A.f,eo,D.K,io.T,xe.l]}),a})();var Ne=l(4558);const Se=["promotionDetailsInfo"],Ye=e=>({"crm-block-body-blue-content-no-padding":e}),Xe=e=>({fatherObj:e,type:"agency"});function $e(e,a){if(1&e){const t=o.RV6();o.j41(0,"app-tabs",12),o.bIt("tabClicked",function(n){o.eBV(t);const s=o.XpG();return o.Njj(s.onTabClicked(n))}),o.k0s()}if(2&e){const t=o.XpG();o.Y8G("activeTab",t.activeTab)("tabs",t.promotionTabs)}}function Ue(e,a){if(1&e&&o.nrm(0,"img",16),2&e){const t=o.XpG().$implicit;o.Y8G("src",null==t?null:t.url,o.B4B)}}function Ae(e,a){if(1&e&&o.DNE(0,Ue,1,1,"img",16),2&e){const t=a.$implicit;o.vxM(null!=t&&t.mainImage?0:-1)}}function we(e,a){if(1&e&&o.Z7z(0,Ae,1,1,null,null,o.fX1),2&e){const t=o.XpG(2);o.Dyx(null==t.promotion?null:t.promotion.promotionFiles)}}function Oe(e,a){if(1&e&&o.nrm(0,"img",16),2&e){const t=o.XpG(2);o.Y8G("src",(null==t.promotion||null==t.promotion.promotionFiles?null:t.promotion.promotionFiles.length)>0?null==t.promotion?null:t.promotion.promotionFiles[0].url:"assets/images/building.png",o.B4B)}}function Le(e,a){if(1&e){const t=o.RV6();o.j41(0,"img",28),o.bIt("click",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.onDeletePromotion())}),o.k0s()}2&e&&o.Y8G("src","assets/icon/trash-icon.svg",o.B4B)}function We(e,a){if(1&e){const t=o.RV6();o.j41(0,"div",10)(1,"div",13)(2,"div",14)(3,"div",15),o.DNE(4,we,2,0)(5,Oe,1,1,"img",16),o.k0s(),o.j41(6,"div",17)(7,"div")(8,"div",18),o.nrm(9,"app-tooltip-text",19),o.k0s(),o.j41(10,"div",20),o.nrm(11,"app-tooltip-text",19),o.k0s()(),o.nrm(12,"div"),o.k0s()(),o.j41(13,"div",21)(14,"div",22)(15,"div",23),o.bIt("click",function(n){o.eBV(t);const s=o.XpG();return o.Njj(s.onRedirectPromoter(n,null==s.promotion?null:s.promotion.promoter))}),o.j41(16,"div"),o.EFF(17),o.k0s()()(),o.j41(18,"div",22)(19,"div",24)(20,"div"),o.EFF(21),o.nI1(22,"translate"),o.k0s()()(),o.j41(23,"div",22)(24,"div",24)(25,"div")(26,"span",25),o.EFF(27),o.k0s(),o.EFF(28),o.k0s()()(),o.j41(29,"div",22)(30,"div",24)(31,"div"),o.EFF(32),o.nI1(33,"translate"),o.k0s()()(),o.j41(34,"div",22)(35,"div",24)(36,"div"),o.EFF(37," Excavation phase "),o.k0s()()(),o.j41(38,"div",22)(39,"div",24)(40,"div"),o.EFF(41),o.nI1(42,"thousandSeparator"),o.nI1(43,"thousandSeparator"),o.k0s()()()(),o.j41(44,"div",26),o.DNE(45,Le,1,1,"img",27),o.k0s()()()}if(2&e){const t=o.XpG();o.R7$(4),o.vxM(t.thereIsAMainImage?4:5),o.R7$(5),o.Y8G("text",null==t.promotion?null:t.promotion.projectName)("maxLength",20),o.R7$(2),o.Y8G("text",(null==t.promotion?null:t.promotion.city)+" / "+(null==t.promotion?null:t.promotion.province))("maxLength",25),o.R7$(6),o.SpI(" ",null==t.promotion||null==t.promotion.promoter?null:t.promotion.promoter.name," "),o.R7$(4),o.SpI(" ",null!=t.promotion&&t.promotion.constructionType?o.bMT(22,13,"promotion_constructionType_texts."+(null==t.promotion?null:t.promotion.constructionType)):""," "),o.R7$(6),o.SpI(" ",null==t.availableProperties?null:t.availableProperties.length,""),o.R7$(),o.SpI(" / ",null==t.promotion||null==t.promotion.properties?null:t.promotion.properties.length," "),o.R7$(4),o.SpI(" ",null!=t.promotion&&t.promotion.constructionStatus?o.bMT(33,15,"text."+(null==t.promotion?null:t.promotion.constructionStatus)):""," "),o.R7$(9),o.Lme(" ",o.bMT(42,17,null==t.rangeOfPropertiesPrices?null:t.rangeOfPropertiesPrices.min)," \u20ac - ",o.bMT(43,19,null==t.rangeOfPropertiesPrices?null:t.rangeOfPropertiesPrices.max)," \u20ac. "),o.R7$(4),o.Y8G("ngIf","promoter"===(null==t.currentUser?null:t.currentUser.accountType))}}function He(e,a){if(1&e){const t=o.RV6();o.j41(0,"app-promotion-details-info",34,0),o.bIt("reloadPromotion",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.reloadPromotion())}),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("promotionId",t.promotion.id)}}function ze(e,a){if(1&e){const t=o.RV6();o.j41(0,"app-promotion-details-availability",35),o.bIt("changeTab",function(n){o.eBV(t);const s=o.XpG(2);return o.Njj(s.onTabClicked(n))})("reloadPromotion",function(){o.eBV(t);const n=o.XpG(2);return o.Njj(n.reloadPromotion())}),o.k0s()}if(2&e){const t=o.XpG(2);o.Y8G("promotion",t.promotion)}}function Je(e,a){if(1&e&&o.nrm(0,"app-registers-list",31),2&e){const t=o.XpG(2);o.Y8G("promotionId",t.promotionId)("options",o.eq3(3,Xe,t.agency))("isMainPage",!1)}}function Qe(e,a){if(1&e&&o.nrm(0,"app-dashboard",32),2&e){const t=o.XpG(2);o.Y8G("isMainPage",!1)("isAgency",!1)("options",t.promotionDashboardOptions)}}function Ke(e,a){if(1&e&&o.nrm(0,"app-agencies-list",30),2&e){const t=o.XpG(2);o.Y8G("promotion",t.promotion)}}function Ze(e,a){if(1&e&&o.nrm(0,"app-file-explorer",33),2&e){const t=o.XpG(2);o.Y8G("directoryBaseElement",t.promotionFolder)}}function qe(e,a){if(1&e&&o.DNE(0,He,2,1,"app-promotion-details-info",29)(1,ze,1,1,"app-promotion-details-availability",30)(2,Je,1,5,"app-registers-list",31)(3,Qe,1,3,"app-dashboard",32)(4,Ke,1,1,"app-agencies-list",30)(5,Ze,1,1,"app-file-explorer",33),2&e){const t=o.XpG();o.vxM("info"===t.activeTab?0:-1),o.R7$(),o.vxM("availability"===t.activeTab?1:-1),o.R7$(),o.vxM("registers"===t.activeTab?2:-1),o.R7$(),o.vxM("promotion_dashboard"===t.activeTab?3:-1),o.R7$(),o.vxM("agencies"===t.activeTab?4:-1),o.R7$(),o.vxM("file-explorer"===t.activeTab?5:-1)}}const on=[{path:"",component:(()=>{var e;class a{constructor(i,n,s,r,c,d,v,_,f){this.activatedRoute=i,this.router=n,this.location=s,this.api=r,this.headerService=c,this.toastService=d,this.utils=v,this.state=_,this.modalsService=f,this.promotionId=null,this.promotion=null,this.promotionTabsForPromoter=[{id:"1",title:"promotion_dashboard",active:!0},{id:"2",title:"availability",active:!1},{id:"3",title:"agencies",active:!1},{id:"4",title:"file-explorer",active:!1},{id:"5",title:"info",active:!1}],this.promotionTabsForAgency=[{id:"1",title:"availability",active:!0},{id:"2",title:"registers",active:!0},{id:"3",title:"file-explorer",active:!1},{id:"4",title:"info",active:!1}],this.promotionTabs=this.promotionTabsForPromoter,this.availableProperties=[],this.rangeOfPropertiesPrices={min:0,max:0},this.rangeOfPropertiesRooms={min:0,max:0},this.activeTab="availability",this.promotionFolder=null,this.thereIsAMainImage=!1,this.promotionDashboardOptions={}}ngOnInit(){this.getState(),this.promotionId=this.activatedRoute.snapshot.paramMap.get("id");const i=this.activatedRoute.snapshot.paramMap.get("tab");i&&this.setActiveTab(i),this.getCurrentPromotion(this.promotionId),this.promotionDashboardOptions={promotionId:this.promotionId}}ionViewWillEnter(){this.headerService.setConfig({title:"promotion_details"})}getCurrentAgency(){var i=this;return(0,P.A)(function*(){var n;const s=yield i.api.getCurrentAgency();null!=s&&null!==(n=s.success)&&void 0!==n&&n.data&&(i.agency=s.success.data)})()}getState(){this.state.getState().subscribe(i=>{this.currentUser=i.user,this.currentUser&&"agency"===this.currentUser.accountType?(this.promotionTabs=this.promotionTabsForAgency,this.getCurrentAgency()):this.promotionTabs=this.promotionTabsForPromoter})}getHeaderInfo(){var i,n,s;this.promotion&&(this.availableProperties=null===(i=this.promotion)||void 0===i||null===(i=i.properties)||void 0===i?void 0:i.filter(r=>"available"===(null==r?void 0:r.availabilityStatus)),this.rangeOfPropertiesPrices=this.utils.calculateRangeOfPropertiesPrices(null===(n=this.promotion)||void 0===n?void 0:n.properties),this.rangeOfPropertiesRooms=this.utils.calculateRangeOfPropertiesRooms(null===(s=this.promotion)||void 0===s?void 0:s.properties))}onRedirectPromoter(i,n){i.stopPropagation(),this.utils.redirectToPromoter(n)}setActiveTab(i){this.activeTab=i,this.promotionTabs.forEach(n=>{n.active=n.title===i})}createCurrentPromotionDirectoryFiles(){this.promotionFolder={type:"promotion_folder",name:this.promotion.projectName,parent:this.promotion}}onDeletePromotion(){var i=this;return(0,P.A)(function*(){if(i.promotion.properties.length>0)return void i.toastService.showToast({text:"No puedes borrar una promoci\xf3n con propiedades vinculadas",theme:"red",time:2e3});const n=yield i.modalsService.openConfirmationModal({title:"Eliminar promoci\xf3n",message:"\xbfEst\xe1s seguro de que quieres eliminar esta promoci\xf3n?",icon:"fas fa-trash",iconTheme:"red",buttons:[{text:"Cancelar",theme:"btn-secondary",id:"cancel"},{text:"Eliminar",theme:"btn-red",id:"delete"}]});if("delete"===(null==n?void 0:n.data)){const s=yield i.api.deletePromotionById(i.promotion.id);s.success?window.location.href="/promotions":(console.error(s.error),i.toastService.showToast({text:"Error deleting promotion",theme:"red",time:2e3}))}})()}onTabClicked(i){this.activeTab=i,this.location.replaceState(`/promotions/${this.promotionId}/${i}`)}getCurrentPromotion(i){var n=this;return(0,P.A)(function*(){var s;const r=yield n.api.getPromotionFullDataById(i);n.promotion=r.success.data,n.createCurrentPromotionDirectoryFiles(),n.thereIsAMainImage=null===(s=n.promotion)||void 0===s||null===(s=s.promotionFiles)||void 0===s?void 0:s.some(c=>c.mainImage),n.getHeaderInfo()})()}reloadPromotion(){var i=this;return(0,P.A)(function*(){yield i.getCurrentPromotion(i.promotionId)})()}}return(e=a).\u0275fac=function(i){return new(i||e)(o.rXU(F.nX),o.rXU(F.Ix),o.rXU(u.aZ),o.rXU(V.i),o.rXU(so.d),o.rXU(N.f),o.rXU(E.T),o.rXU(S.c),o.rXU(ao.M))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-promotion-details"]],viewQuery:function(i,n){if(1&i&&o.GBs(Se,5),2&i){let s;o.mGM(s=o.lsd())&&(n.promotionDetailsInfo=s.first)}},decls:18,vars:6,consts:[["promotionDetailsInfo",""],[1,"crm-block-body"],[1,"crm-block-body-fixed"],[1,"crm-block-details-header"],[1,"crm-block-breadcrumbs"],[1,"crm-block-breadcrumbs-item"],[1,"crm-block-breadcrumbs-item-text","crm-block-breadcrumbs-item-separator"],[1,"crm-block-breadcrumbs-item-text"],[1,"crm-block-details-bottom"],[3,"activeTab","tabs"],[1,"crm-block-details-header-top"],[1,"crm-block-body-blue-content",3,"ngClass"],[3,"tabClicked","activeTab","tabs"],[1,"d-flex","justify-between","align-center","w-full","p-24"],[1,"crm-block-photo-and-info"],[1,"crm-block-photo-and-info-img","crm-block-photo-and-info-img-promotion"],["alt","",3,"src"],[1,"crm-block-photo-and-info-info"],[1,"crm-block-photo-and-info-info-title"],[3,"text","maxLength"],[1,"crm-card-promotion-left-subtitle"],[1,"crm-block-info-horizontal","ml-20"],[1,"crm-info"],[1,"crm-info-content",3,"click"],[1,"crm-info-content"],[1,"text-black"],[1,"crm-trash-btn"],["alt","",3,"src","click",4,"ngIf"],["alt","",3,"click","src"],[3,"promotionId"],[3,"promotion"],[3,"promotionId","options","isMainPage"],[3,"isMainPage","isAgency","options"],[3,"directoryBaseElement"],[3,"reloadPromotion","promotionId"],[3,"changeTab","reloadPromotion","promotion"]],template:function(i,n){1&i&&(o.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),o.EFF(6," Promotions "),o.k0s()(),o.j41(7,"div",5)(8,"div",7),o.EFF(9," / "),o.k0s()(),o.j41(10,"div",5)(11,"div",7),o.EFF(12," Text presentation "),o.k0s()()(),o.j41(13,"div",8),o.DNE(14,$e,1,2,"app-tabs",9),o.k0s(),o.DNE(15,We,46,21,"div",10),o.k0s()(),o.j41(16,"div",11),o.DNE(17,qe,6,6),o.k0s()()),2&i&&(o.R7$(14),o.vxM(n.promotionTabs?14:-1),o.R7$(),o.vxM("info"!==n.activeTab?15:-1),o.R7$(),o.Y8G("ngClass",o.eq3(4,Ye,"agencies"===n.activeTab)),o.R7$(),o.vxM(n.promotion?17:-1))},dependencies:[u.YU,u.bT,$.O,ro.F,lo.b,mo.e,co.O,po.G,uo.c,Ve,Y.D9,Ne.w]}),a})()}];let tn=(()=>{var e;class a{}return(e=a).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[F.iI.forChild(on),F.iI]}),a})();var en=l(3895),nn=l(802),sn=l(8284),an=l(9083),rn=l(9662),ln=l(5641),mn=l(7774),cn=l(1414),dn=l(1362);let pn=(()=>{var e;class a{}return(e=a).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[u.MD,m.YN,g.bv,tn,$.O,en.b,nn.AgenciesListPageModule,sn.o,an.E,Y.h,rn.Y,io.T,no.$,ln.D,mn.G,cn.DashboardPageModule,dn.RegistersListPageModule]}),a})()}}]);