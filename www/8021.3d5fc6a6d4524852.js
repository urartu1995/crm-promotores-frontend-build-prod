"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8021],{8021:(ae,_,c)=>{c.r(_),c.d(_,{RegisterPageModule:()=>oe});var p=c(177),t=c(9417),g=c(9465),u=c(5188),v=c(467),e=c(3953),R=c(2081),E=c(8397);const l=r=>({"crm-input-input-error":r}),b=()=>["/auth/login"];function I(r,o){if(1&r&&(e.j41(0,"div",33)(1,"div",34),e.nrm(2,"img",35),e.k0s(),e.j41(3,"div",36)(4,"div")(5,"div",37),e.EFF(6),e.k0s(),e.j41(7,"div",38),e.EFF(8),e.k0s()(),e.j41(9,"div")(10,"div",39),e.EFF(11),e.nI1(12,"date"),e.k0s()()()(),e.nrm(13,"div",40)(14,"div",41)),2&r){const i=o.$implicit;e.R7$(2),e.Y8G("src",(null==i||null==i.promotionFiles?null:i.promotionFiles.length)>0?null==i?null:i.promotionFiles[0].url:"assets/images/building.png",e.B4B),e.R7$(4),e.SpI(" Promoci\xf3n ",null==i?null:i.projectName," "),e.R7$(2),e.SpI(" la promoci\xf3n contiene ",(null==i?null:i.availablePropertiesQuantity)||0," propiedades "),e.R7$(3),e.SpI(" Creado el ",e.i5U(12,4,null==i?null:i.createdAt,"dd/MM/yyyy")," ")}}function h(r,o){if(1&r&&(e.j41(0,"div",5),e.EFF(1," Reg\xedstrate para poder acceder a las siguientes promociones:"),e.k0s(),e.j41(2,"div",32),e.Z7z(3,I,15,7,null,null,e.fX1),e.k0s(),e.nrm(5,"br")),2&r){const i=e.XpG();e.R7$(3),e.Dyx(i.promotionsInvited)}}function k(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function P(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,k,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",i.registerForm.get("accountType").hasError("required"))}}function C(r,o){if(1&r&&(e.j41(0,"div",9)(1,"div",10),e.EFF(2,"\xbfEres una agencia o una promotora?"),e.k0s(),e.j41(3,"div",11)(4,"select",42)(5,"option",43),e.EFF(6,"Promotora"),e.k0s(),e.j41(7,"option",44),e.EFF(8,"Agencia"),e.k0s()()(),e.DNE(9,P,2,1,"div",13),e.k0s()),2&r){const i=e.XpG();e.R7$(3),e.Y8G("ngClass",e.eq3(2,l,i.isControlInvalid("accountType"))),e.R7$(6),e.Y8G("ngIf",i.isControlInvalid("accountType"))}}function y(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function G(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,y,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("companyName").hasError("required"))}}function N(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function j(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,N,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("isResponsable").hasError("required"))}}function $(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function q(r,o){1&r&&(e.qex(0),e.EFF(1,"Correo electr\xf3nico no v\xe1lido"),e.bVm())}function T(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,$,2,0,"ng-container",46)(2,q,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",i.registerForm.get("responsableEmail").hasError("required")),e.R7$(),e.Y8G("ngIf",i.registerForm.get("responsableEmail").hasError("email"))}}function x(r,o){if(1&r&&(e.j41(0,"div",9)(1,"div",10),e.EFF(2,"Nombre del representante legal"),e.k0s(),e.j41(3,"div",11),e.nrm(4,"input",47),e.k0s()(),e.j41(5,"div",9)(6,"div",10),e.EFF(7,"Email del responsable"),e.k0s(),e.j41(8,"div",11),e.nrm(9,"input",48),e.k0s(),e.DNE(10,T,3,2,"div",13),e.k0s()),2&r){const i=e.XpG();e.R7$(3),e.Y8G("ngClass",e.eq3(3,l,i.isControlInvalid("responsableName"))),e.R7$(5),e.Y8G("ngClass",e.eq3(5,l,i.isControlInvalid("responsableEmail"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("responsableEmail"))}}function Y(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function w(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,Y,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("responsableAddress").hasError("required"))}}function D(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function M(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,D,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("responsableCif").hasError("required"))}}function X(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function V(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,X,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("responsablePhone").hasError("required"))}}function S(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function J(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,S,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("name").hasError("required"))}}function A(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function L(r,o){1&r&&(e.qex(0),e.EFF(1,"Correo electr\xf3nico no v\xe1lido"),e.bVm())}function U(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,A,2,0,"ng-container",46)(2,L,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("email").hasError("required")),e.R7$(),e.Y8G("ngIf",i.registerForm.get("email").hasError("email"))}}function B(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function z(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,B,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("phoneNumber").hasError("required"))}}function O(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function Q(r,o){1&r&&(e.qex(0),e.EFF(1,"La contrase\xf1a debe tener al menos 8 caracteres"),e.bVm())}function H(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,O,2,0,"ng-container",46)(2,Q,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("password").hasError("required")),e.R7$(),e.Y8G("ngIf",i.registerForm.get("password").hasError("minlength"))}}function W(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function K(r,o){1&r&&(e.qex(0),e.EFF(1,"La contrase\xf1a debe tener al menos 8 caracteres"),e.bVm())}function Z(r,o){1&r&&(e.qex(0),e.EFF(1,"Las contrase\xf1as no coinciden"),e.bVm())}function ee(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,W,2,0,"ng-container",46)(2,K,2,0,"ng-container",46)(3,Z,2,0,"ng-container",46),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("confirmPassword").hasError("required")),e.R7$(),e.Y8G("ngIf",i.registerForm.get("confirmPassword").hasError("minlength")),e.R7$(),e.Y8G("ngIf",i.registerForm.hasError("passwordMismatch"))}}function re(r,o){if(1&r&&(e.j41(0,"div",45),e.qex(1),e.EFF(2),e.bVm(),e.k0s()),2&r){const i=e.XpG();e.R7$(2),e.JRh(i.globalErrorString)}}const ie=[{path:"",component:(()=>{var r;class o{constructor(a,n,s,d){this.router=a,this.activeRouter=n,this.api=s,this.toastService=d,this.agencyInvitationRegister=null,this.globalErrorString=""}ngOnInit(){var a=this;return(0,v.A)(function*(){a.initializeForm(),a.activeRouter.queryParams.subscribe(function(){var n=(0,v.A)(function*(s){if(s.agencyInvitationToPromotionsId&&s.email&&!a.agencyInvitationRegister){a.agencyInvitationRegister={agencyInvitationToPromotionsId:s.agencyInvitationToPromotionsId,agencyEmail:s.email};const d=yield a.api.getPromotionsFromAgencyRegister(a.agencyInvitationRegister.agencyInvitationToPromotionsId,a.agencyInvitationRegister.agencyEmail);a.promotionsInvited=d.success.data,a.promotionsInvited=a.promotionsInvited.map(m=>{var f;let F=0;return null==m||null===(f=m.properties)||void 0===f||f.forEach(te=>{"available"===te.availabilityStatus&&F++}),{...m,availablePropertiesQuantity:F}}),localStorage.setItem("agencyInvitationToPromotionsId",a.agencyInvitationRegister.agencyInvitationToPromotionsId),a.registerForm.patchValue({email:a.agencyInvitationRegister.agencyEmail,accountType:"agency"})}});return function(s){return n.apply(this,arguments)}}())})()}initializeForm(){this.registerForm=new t.gE({companyName:new t.MJ("",[t.k0.required]),name:new t.MJ("",[t.k0.required]),email:new t.MJ("",[t.k0.required,t.k0.email]),phoneNumber:new t.MJ("",[t.k0.required]),accountType:new t.MJ("",[t.k0.required]),password:new t.MJ("",[t.k0.required,t.k0.minLength(8)]),confirmPassword:new t.MJ("",[t.k0.required,t.k0.minLength(8)]),isResponsable:new t.MJ("",[t.k0.required]),responsableEmail:new t.MJ("",[t.k0.email]),responsableName:new t.MJ(""),responsableCif:new t.MJ("",[t.k0.required]),responsableAddress:new t.MJ("",[t.k0.required,t.k0.minLength(6)]),responsablePhone:new t.MJ("",[t.k0.required,t.k0.minLength(9)])},{validators:this.passwordsMatchValidator})}passwordsMatchValidator(a){var n,s;const d=null===(n=a.get("password"))||void 0===n?void 0:n.value,m=null===(s=a.get("confirmPassword"))||void 0===s?void 0:s.value;return d&&m&&d!==m?{passwordMismatch:!0}:null}isControlInvalid(a){const n=this.registerForm.get(a);return n&&n.invalid&&(n.touched||n.dirty)}onSubmit(){var a=this;return(0,v.A)(function*(){if(a.registerForm.valid){const n=a.registerForm.value;console.log("Form submitted successfully:",n);const s=yield a.api.register(n.email,n);if(null!=s&&s.success)localStorage.setItem("tempUserRegister",JSON.stringify(n)),a.router.navigate(["/auth/confirm-email"]);else{const d=s.error.errorMessage;a.globalErrorString=d,a.toastService.showToast({text:"Ha ocurrido un error: "+d,theme:"red",time:2e3})}}else console.log("Form is invalid"),a.registerForm.markAllAsTouched(),a.toastService.showToast({text:"El formulario no es v\xe1lido",theme:"red",time:2e3})})()}}return(r=o).\u0275fac=function(a){return new(a||r)(e.rXU(u.Ix),e.rXU(u.nX),e.rXU(R.i),e.rXU(E.f))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-register"]],decls:92,vars:46,consts:[[1,"crm-box","crm-section","crm-section-center-content","crm-section-margin-top",2,"margin-top","80px"],[1,"crm-header-icon","no-padding","no-line","bottom-margin"],[1,"crm-header-icon-left"],[1,"crm-square-icon"],[1,"fas","fa-user-plus"],[1,"crm-header-icon-title"],[1,"crm-header-icon-right"],[1,"crm-section-inputs",3,"ngSubmit","formGroup"],["class","crm-input",4,"ngIf"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["type","text","placeholder","Introduce el nombre comercial de la empresa","formControlName","companyName"],["class","crm-input-error",4,"ngIf"],[1,"crm-input","crm-input-radio-box"],["formControlName","isResponsable",1,"crm-input-radios"],[1,"crm-input-radio"],[3,"value"],[1,"crm-input-radio-label"],["type","text","placeholder","Introduce la direcci\xf3n del responsable","formControlName","responsableAddress"],["type","text","placeholder","Introduce el cif/dni/nie del responsable","formControlName","responsableCif"],["type","tel","placeholder","Introduce el tel\xe9fono del responsable","formControlName","responsablePhone"],[1,"crm-section-title"],["type","text","placeholder","Introduce el nombre del responsable","formControlName","name"],["type","email","placeholder","Introduce el email del responsable","formControlName","email"],["type","tel","placeholder","Introduce el tel\xe9fono del responsable","formControlName","phoneNumber"],["type","password","placeholder","Introduce la contrase\xf1a","formControlName","password"],["type","password","placeholder","Repite la contrase\xf1a","formControlName","confirmPassword"],[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-buttons-group"],[1,"crm-button","crm-button-secondary",3,"routerLink"],["type","submit",1,"crm-button","crm-button-primary"],[1,"crm-block-details-header-left"],[1,"crm-block-photo-and-info"],[1,"crm-block-photo-and-info-img","crm-block-photo-and-info-img-promotion"],["alt","",3,"src"],[1,"crm-block-photo-and-info-info"],[1,"crm-block-photo-and-info-info-title"],[1,"crm-block-photo-and-info-info-subtitle"],[1,"crm-block-photo-and-info-info-footer"],[1,"crm-vertical-separator"],[1,"crm-block-info-horizontal"],["formControlName","accountType"],["value","promoter"],["value","agency"],[1,"crm-input-error"],[4,"ngIf"],["type","text","placeholder","Introduce el nombre del responsable","formControlName","responsableName"],["type","email","placeholder","Introduce el email del responsable","formControlName","responsableEmail"]],template:function(a,n){1&a&&(e.j41(0,"ion-content")(1,"div",0),e.DNE(2,h,6,0),e.j41(3,"div",1)(4,"div",2)(5,"div",3),e.nrm(6,"i",4),e.k0s(),e.j41(7,"div",5),e.EFF(8," Registro para promotor/agencia "),e.k0s()(),e.nrm(9,"div",6),e.k0s(),e.j41(10,"form",7),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.DNE(11,C,10,4,"div",8),e.j41(12,"div",9)(13,"div",10),e.EFF(14,"Nombre comercial empresa"),e.k0s(),e.j41(15,"div",11),e.nrm(16,"input",12),e.k0s(),e.DNE(17,G,2,1,"div",13),e.k0s(),e.j41(18,"div",9)(19,"div",14)(20,"div",10),e.EFF(21," \xbfEres el due\xf1o/responsable de la empresa? "),e.k0s(),e.j41(22,"ion-radio-group",15)(23,"div",16),e.nrm(24,"ion-radio",17),e.j41(25,"div",18),e.EFF(26," S\xed "),e.k0s()(),e.j41(27,"div",16),e.nrm(28,"ion-radio",17),e.j41(29,"div",18),e.EFF(30," No "),e.k0s()()()(),e.DNE(31,j,2,1,"div",13),e.k0s(),e.DNE(32,x,11,7),e.j41(33,"div",9)(34,"div",10),e.EFF(35,"Direcci\xf3n del representante legal"),e.k0s(),e.j41(36,"div",11),e.nrm(37,"input",19),e.k0s(),e.DNE(38,w,2,1,"div",13),e.k0s(),e.j41(39,"div",9)(40,"div",10),e.EFF(41,"Cif/Dni/Nie del representante legal"),e.k0s(),e.j41(42,"div",11),e.nrm(43,"input",20),e.k0s(),e.DNE(44,M,2,1,"div",13),e.k0s(),e.j41(45,"div",9)(46,"div",10),e.EFF(47,"Tel\xe9fono del representante legal"),e.k0s(),e.j41(48,"div",11),e.nrm(49,"input",21),e.k0s(),e.DNE(50,V,2,1,"div",13),e.k0s(),e.j41(51,"div",22),e.EFF(52," Tus Datos "),e.k0s(),e.j41(53,"div",9)(54,"div",10),e.EFF(55,"Nombre"),e.k0s(),e.j41(56,"div",11),e.nrm(57,"input",23),e.k0s(),e.DNE(58,J,2,1,"div",13),e.k0s(),e.j41(59,"div",9)(60,"div",10),e.EFF(61,"Email"),e.k0s(),e.j41(62,"div",11),e.nrm(63,"input",24),e.k0s(),e.DNE(64,U,3,2,"div",13),e.k0s(),e.j41(65,"div",9)(66,"div",10),e.EFF(67,"N\xfamero de tel\xe9fono"),e.k0s(),e.j41(68,"div",11),e.nrm(69,"input",25),e.k0s(),e.DNE(70,z,2,1,"div",13),e.k0s(),e.j41(71,"div",9)(72,"div",10),e.EFF(73,"Contrase\xf1a"),e.k0s(),e.j41(74,"div",11),e.nrm(75,"input",26),e.k0s(),e.DNE(76,H,3,2,"div",13),e.k0s(),e.j41(77,"div",9)(78,"div",10),e.EFF(79,"Repetir contrase\xf1a"),e.k0s(),e.j41(80,"div",11),e.nrm(81,"input",27),e.k0s(),e.DNE(82,ee,4,3,"div",13),e.k0s(),e.j41(83,"div",28),e.nrm(84,"div"),e.j41(85,"div",29)(86,"button",30),e.EFF(87,"Iniciar sesi\xf3n"),e.k0s(),e.j41(88,"button",31),e.EFF(89,"Registrarse"),e.k0s()()(),e.nrm(90,"br"),e.DNE(91,re,3,1,"div",13),e.k0s()()()),2&a&&(e.R7$(2),e.vxM(n.agencyInvitationRegister&&(null==n.promotionsInvited?null:n.promotionsInvited.length)>0?2:-1),e.R7$(8),e.Y8G("formGroup",n.registerForm),e.R7$(),e.Y8G("ngIf",!n.agencyInvitationRegister),e.R7$(4),e.Y8G("ngClass",e.eq3(27,l,n.isControlInvalid("companyName"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("companyName")),e.R7$(7),e.Y8G("value",!0),e.R7$(4),e.Y8G("value",!1),e.R7$(3),e.Y8G("ngIf",n.isControlInvalid("isResponsable")),e.R7$(),e.vxM(!1===n.registerForm.value.isResponsable?32:-1),e.R7$(4),e.Y8G("ngClass",e.eq3(29,l,n.isControlInvalid("responsableAddress"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("responsableAddress")),e.R7$(4),e.Y8G("ngClass",e.eq3(31,l,n.isControlInvalid("responsableCif"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("responsableCif")),e.R7$(4),e.Y8G("ngClass",e.eq3(33,l,n.isControlInvalid("responsablePhone"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("responsablePhone")),e.R7$(6),e.Y8G("ngClass",e.eq3(35,l,n.isControlInvalid("name"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("name")),e.R7$(4),e.Y8G("ngClass",e.eq3(37,l,n.isControlInvalid("email"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("email")),e.R7$(4),e.Y8G("ngClass",e.eq3(39,l,n.isControlInvalid("phoneNumber"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("phoneNumber")),e.R7$(4),e.Y8G("ngClass",e.eq3(41,l,n.isControlInvalid("password"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("password")),e.R7$(4),e.Y8G("ngClass",e.eq3(43,l,n.isControlInvalid("confirmPassword")||n.registerForm.hasError("passwordMismatch"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("confirmPassword")||n.registerForm.hasError("passwordMismatch")),e.R7$(4),e.Y8G("routerLink",e.lJ4(45,b)),e.R7$(5),e.Y8G("ngIf",n.globalErrorString))},dependencies:[p.YU,p.bT,t.qT,t.xH,t.y7,t.me,t.wz,t.BC,t.cb,g.W9,g.KO,g.f0,g.Je,g.N7,u.Wk,t.j4,t.JD,p.vh]}),o})()}];let ne=(()=>{var r;class o{}return(r=o).\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[u.iI.forChild(ie),u.iI]}),o})(),oe=(()=>{var r;class o{}return(r=o).\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[p.MD,t.YN,g.bv,ne,t.X1]}),o})()}}]);