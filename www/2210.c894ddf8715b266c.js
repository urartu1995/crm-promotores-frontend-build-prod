"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2210],{2210:(F,s,n)=>{n.r(s),n.d(s,{LoginPageModule:()=>P});var g=n(177),l=n(9417),u=n(9465),d=n(5188),f=n(467),o=n(3953),h=n(2081),p=n(8397);function C(i,r){1&i&&(o.j41(0,"div",16),o.qex(1),o.EFF(2,"Este c\xf3digo es inv\xe1lido"),o.bVm(),o.k0s())}const E=[{path:"",component:(()=>{var i;class r{constructor(e,t,c){this.router=e,this.api=t,this.toastService=c,this.verificationCode="",this.agencyInvitationToPromotionsId=null,this.showErrors=!1}ngOnInit(){const e=localStorage.getItem("tempUserRegister");this.user=JSON.parse(e)}verifyCode(){var e=this;return(0,f.A)(function*(){try{var t,c;e.agencyInvitationToPromotionsId=localStorage.getItem("agencyInvitationToPromotionsId"),localStorage.removeItem("agencyInvitationToPromotionsId");const a=yield e.api.verifyEmailRegister(e.user,e.verificationCode,e.agencyInvitationToPromotionsId);console.log("Login response:",a);const v=null===(t=a.success)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.token,y=null===(c=a.error)||void 0===c?void 0:c.errorMessage;if(!v)return e.showErrors=!0,void e.toastService.showToast({text:"Error: "+y,theme:"red",time:2e3});localStorage.setItem("token",v),window.location.href="/"}catch(a){console.error("Error logging in:",a),e.toastService.showToast({text:"Ha ocurrido un error",theme:"red",time:2e3})}})()}}return(i=r).\u0275fac=function(e){return new(e||i)(o.rXU(d.Ix),o.rXU(h.i),o.rXU(p.f))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-confirm-email"]],decls:20,vars:2,consts:[[1,"crm-box","crm-section","crm-section-center-content","crm-section-margin-top",2,"margin-top","80px"],[1,"crm-header-icon","no-padding","no-line","bottom-margin"],[1,"crm-header-icon-left"],[1,"crm-square-icon"],[1,"fas","fa-key"],[1,"crm-header-icon-title"],[1,"crm-header-icon-right"],[1,"crm-section-inputs"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input"],["type","text","placeholder","Introduce el c\xf3digo de verificaci\xf3n",3,"ngModelChange","ngModel"],["class","crm-input-error",4,"ngIf"],[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-buttons-group"],[1,"crm-button",3,"click"],[1,"crm-input-error"]],template:function(e,t){1&e&&(o.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),o.nrm(5,"i",4),o.k0s(),o.j41(6,"div",5),o.EFF(7," Confirma tu correo electr\xf3nico "),o.k0s()(),o.nrm(8,"div",6),o.k0s(),o.j41(9,"div",7)(10,"div",8)(11,"div",9),o.EFF(12,"Introduce tu c\xf3digo de verificaci\xf3n"),o.k0s(),o.j41(13,"div",10)(14,"input",11),o.mxI("ngModelChange",function(a){return o.DH7(t.verificationCode,a)||(t.verificationCode=a),a}),o.k0s()(),o.DNE(15,C,3,0,"div",12),o.k0s(),o.j41(16,"div",13)(17,"div",14)(18,"button",15),o.bIt("click",function(){return t.verifyCode()}),o.EFF(19," Verificar "),o.k0s()()()()()()),2&e&&(o.R7$(14),o.R50("ngModel",t.verificationCode),o.R7$(),o.Y8G("ngIf",t.showErrors))},dependencies:[g.bT,l.me,l.BC,l.vS,u.W9]}),r})()}];let I=(()=>{var i;class r{}return(i=r).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[d.iI.forChild(E),d.iI]}),r})(),P=(()=>{var i;class r{}return(i=r).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[g.MD,l.YN,u.bv,I,l.X1]}),r})()}}]);