"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[802],{9491:(z,M,d)=>{d.d(M,{j:()=>T});var v=d(177),F=d(9465),k=d(9417),I=d(4646),f=d(68),t=d(3953);let T=(()=>{var y;class A{}return(y=A).\u0275fac=function(j){return new(j||y)},y.\u0275mod=t.$C({type:y}),y.\u0275inj=t.G2t({imports:[v.MD,F.bv,k.YN,k.X1,I.X,f.k]}),A})()},802:(z,M,d)=>{d.r(M),d.d(M,{AgenciesListPageModule:()=>$});var v=d(177),F=d(9417),k=d(9465),I=d(5188),f=d(2465),t=d(3953);const T=[{path:"",component:f.F}];let y=(()=>{var p;class m{}return(p=m).\u0275fac=function(R){return new(R||p)},p.\u0275mod=t.$C({type:p}),p.\u0275inj=t.G2t({imports:[I.iI.forChild(T),I.iI]}),m})();var A=d(3955);let x=(()=>{var p;class m{}return(p=m).\u0275fac=function(R){return new(R||p)},p.\u0275mod=t.$C({type:p}),p.\u0275inj=t.G2t({imports:[v.MD,F.YN,F.X1,k.bv,A.h]}),m})();var j=d(5603),L=d(9491);let $=(()=>{var p;class m{}return(p=m).\u0275fac=function(R){return new(R||p)},p.\u0275mod=t.$C({type:p}),p.\u0275inj=t.G2t({imports:[v.MD,F.YN,k.bv,y,x,j.P,L.j,A.h]}),m})()},2465:(z,M,d)=>{d.d(M,{F:()=>Bt});var v=d(467),F=d(1413),k=d(7944),I=d(7376),f=d(9969),t=d(3953),T=d(5188),y=d(8397),A=d(4501),x=d(9465),j=d(2081),L=d(1213),$=d(5970),p=d(3955),m=d(177),P=d(6552);const R=(i,s)=>({"text-error":i,"text-green-600":s});function q(i,s){if(1&i&&t.nrm(0,"span",26),2&i){let o;const n=t.XpG().$implicit,e=t.XpG(3);t.HbH(null==(o=e.utils.getLanguageInfo(n))?null:o.flagClass)}}function tt(i,s){if(1&i&&(t.qex(0),t.DNE(1,q,1,2,"span",25),t.bVm()),2&i){const o=s.index;t.R7$(),t.Y8G("ngIf",o<3)}}function nt(i,s){if(1&i&&(t.j41(0,"span",27),t.EFF(1),t.k0s()),2&i){const o=t.XpG(3);t.R7$(),t.SpI(" +",o.agency.languages.length-3," ")}}function et(i,s){if(1&i&&(t.j41(0,"div",22),t.DNE(1,tt,2,1,"ng-container",23)(2,nt,2,1,"span",24),t.k0s()),2&i){const o=t.XpG(2);t.R7$(),t.Y8G("ngForOf",o.agency.languages),t.R7$(),t.Y8G("ngIf",o.agency.languages.length>3)}}function ot(i,s){1&i&&(t.j41(0,"div",28),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"contacts.card.no_languages")," "))}function it(i,s){1&i&&(t.j41(0,"button",19),t.EFF(1),t.nI1(2,"translate"),t.nrm(3,"i",29),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"text.pending")," "))}function at(i,s){1&i&&(t.j41(0,"button",20),t.nrm(1,"i",30),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"text.collaborator")," "))}function lt(i,s){if(1&i){const o=t.RV6();t.j41(0,"button",31),t.bIt("click",function(e){t.eBV(o);const a=t.XpG(2);return t.Njj(a.onInviteAgencyClick(e))}),t.nrm(1,"i",32),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"text.invite_agency")," "))}function st(i,s){1&i&&(t.j41(0,"span",33),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"text.no_contract")," "))}function ct(i,s){if(1&i&&(t.j41(0,"span",34),t.EFF(1),t.k0s()),2&i){const o=t.XpG(3);t.Y8G("ngClass",t.l_i(2,R,null==o.agency?null:o.agency.activeDocumentInfo.expired,!(null!=o.agency&&o.agency.activeDocumentInfo.expired))),t.R7$(),t.SpI(" ",null==o.agency||null==o.agency.activeDocumentInfo?null:o.agency.activeDocumentInfo.dateStr," ")}}function rt(i,s){if(1&i&&t.DNE(0,st,3,3,"span",33)(1,ct,2,5,"span",34),2&i){const o=t.XpG(2);t.vxM(o.agency.activeDocumentInfo?1:0)}}function dt(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",3),t.bIt("click",function(){t.eBV(o);const e=t.XpG();return t.Njj(e.onNavigateToAgency())}),t.j41(1,"div",4),t.nrm(2,"img",5),t.j41(3,"div",6)(4,"div",7)(5,"span",8),t.EFF(6),t.k0s()(),t.j41(7,"div",9),t.EFF(8),t.k0s(),t.DNE(9,et,3,2,"div",10)(10,ot,3,3,"ng-template",null,0,t.C5r),t.k0s()(),t.j41(12,"div",11),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.nrm(15,"div",12),t.j41(16,"div",13)(17,"div",14),t.nrm(18,"i",15),t.j41(19,"span"),t.EFF(20),t.nI1(21,"translate"),t.k0s()(),t.j41(22,"div",14),t.nrm(23,"i",16),t.j41(24,"span"),t.EFF(25),t.nI1(26,"translate"),t.k0s()(),t.j41(27,"div",14),t.nrm(28,"i",17),t.j41(29,"span"),t.EFF(30),t.nI1(31,"translate"),t.k0s()()(),t.j41(32,"div",18),t.DNE(33,it,4,3,"button",19)(34,at,4,3,"button",20)(35,lt,4,3,"button",21)(36,rt,2,1),t.k0s()()}if(2&i){const o=t.sdS(11),n=t.XpG();t.R7$(2),t.FS9("alt",null==n.agency?null:n.agency.name),t.Y8G("src",(null==n.agency?null:n.agency.photoUrl)||"assets/images/building.png",t.B4B),t.R7$(4),t.JRh(null==n.agency?null:n.agency.name),t.R7$(2),t.Lme(" ",(null==n.agency?null:n.agency.city)||"Valencia"," / ",(null==n.agency?null:n.agency.country)||"Spain"," "),t.R7$(),t.Y8G("ngIf",(null==n.agency||null==n.agency.languages?null:n.agency.languages.length)>0)("ngIfElse",o),t.R7$(4),t.E5c(" ",t.bMT(14,17,"contacts.card.shared_promotions"),": ",(null==n.agency||null==n.agency.promotions?null:n.agency.promotions.length)||0," / ",n.promoterPromotions||0," "),t.R7$(7),t.Lme("",t.bMT(21,19,"text.offices"),": ",(null==n.agency||null==n.agency.agencyOffices?null:n.agency.agencyOffices.length)||0,""),t.R7$(5),t.Lme("",t.bMT(26,21,"text.agents"),": ",(null==n.agency||null==n.agency._count?null:n.agency._count.users)||0,""),t.R7$(5),t.JRh(t.bMT(31,23,"text.operations")),t.R7$(3),t.vxM("pending"===(null==n.options?null:n.options.invitationStatus)?33:"collaborator"===(null==n.options?null:n.options.invitationStatus)?34:35),t.R7$(3),t.vxM("promotionAgencies"===n.options.type&&"collaborator"===(null==n.options?null:n.options.invitationStatus)?36:-1)}}function gt(i,s){1&i&&(t.j41(0,"div",2)(1,"div",4),t.nrm(2,"div",35),t.j41(3,"div",6),t.nrm(4,"div",36)(5,"div",37)(6,"div",38),t.k0s()(),t.nrm(7,"div",39)(8,"div",40),t.j41(9,"div",13),t.nrm(10,"div",41)(11,"div",41)(12,"div",41),t.k0s(),t.nrm(13,"div",42),t.k0s())}let pt=(()=>{var i;class s{constructor(n,e){this.router=n,this.utils=e,this.promoterPromotions=0,this.inviteAgencyClick=new t.bkB}ngOnInit(){console.log(this.options)}onInviteAgencyClick(n){n.stopPropagation(),n.preventDefault(),this.inviteAgencyClick.emit({agency:this.agency,options:this.options})}onNavigateToAgency(){this.router.navigate([`/agencies/${this.agency.id}`])}}return(i=s).\u0275fac=function(n){return new(n||i)(t.rXU(T.Ix),t.rXU(P.T))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-card-agency"]],inputs:{agency:"agency",isSkeleton:"isSkeleton",options:"options",promoterPromotions:"promoterPromotions"},outputs:{inviteAgencyClick:"inviteAgencyClick"},decls:2,vars:1,consts:[["noLangs",""],[1,"collaboration-card"],[1,"collaboration-card","collaboration-card--skeleton"],[1,"collaboration-card",3,"click"],[1,"collaboration-card__header"],[1,"collaboration-card__logo",3,"src","alt"],[1,"collaboration-card__info"],[1,"collaboration-card__top-row"],[1,"collaboration-card__name"],[1,"collaboration-card__location"],["class","collaboration-card__languages",4,"ngIf","ngIfElse"],[1,"collaboration-card__shared"],[1,"collaboration-card__divider"],[1,"collaboration-card__meta"],[1,"collaboration-card__meta-item"],[1,"fas","fa-building"],[1,"fas","fa-user"],[1,"fas","fa-chart-line"],[1,"collaboration-card__footer",2,"margin-top","8px"],[1,"collaboration-card__button","collaboration-card__button--pending"],[1,"collaboration-card__button","collaboration-card__button--collaborator"],[1,"crm-button",2,"width","100%","justify-content","center"],[1,"collaboration-card__languages"],[4,"ngFor","ngForOf"],["class","collaboration-card__flag-plus",4,"ngIf"],["class","collaboration-card__flag",3,"class",4,"ngIf"],[1,"collaboration-card__flag"],[1,"collaboration-card__flag-plus"],[1,"collaboration-card__languages-empty"],[1,"fas","fa-clock"],[1,"fas","fa-check-circle"],[1,"crm-button",2,"width","100%","justify-content","center",3,"click"],[1,"fas","fa-add"],[1,"text-[12px]","text-error"],[1,"ml-10","text-[12px]",3,"ngClass"],[1,"collaboration-card__logo","skeleton-block"],[1,"collaboration-card__top-row","skeleton-block"],[1,"collaboration-card__location","skeleton-block"],[1,"collaboration-card__languages","skeleton-block"],[1,"collaboration-card__shared","skeleton-block"],[1,"collaboration-card__divider","skeleton-block"],[1,"collaboration-card__meta-item","skeleton-block"],[1,"collaboration-card__footer","skeleton-block"]],template:function(n,e){1&n&&t.DNE(0,dt,37,25,"div",1)(1,gt,14,0,"div",2),2&n&&t.vxM(e.isSkeleton?1:0)},dependencies:[m.YU,m.Sq,m.bT,p.D9],styles:[".collaboration-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #eaeaea;border-radius:12px;padding:16px;width:340px;box-sizing:border-box;display:flex;flex-direction:column;cursor:pointer;position:relative}.collaboration-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.collaboration-card__logo[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;object-fit:cover;flex-shrink:0}.collaboration-card__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.collaboration-card__top-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.collaboration-card__name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px;color:#111}.collaboration-card__verified[_ngcontent-%COMP%]{font-size:14px;color:#1890ff;display:inline-flex;align-items:center}.collaboration-card__location[_ngcontent-%COMP%]{font-size:14px;color:#888}.collaboration-card__languages[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.collaboration-card__languages[_ngcontent-%COMP%]   .collaboration-card__flag[_ngcontent-%COMP%]{width:20px;height:14px;border-radius:2px;background-size:cover;background-position:center}.collaboration-card__languages[_ngcontent-%COMP%]   .collaboration-card__flag-plus[_ngcontent-%COMP%]{font-size:13px;color:#666}.collaboration-card__languages-empty[_ngcontent-%COMP%]{font-size:13px;color:#999}.collaboration-card__shared[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#333;font-weight:500}.collaboration-card__divider[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#eaeaea;border:none;margin:12px 0}.collaboration-card__meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:12px}.collaboration-card__meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#666}.collaboration-card__meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}.collaboration-card__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;gap:8px;margin-top:auto}.collaboration-card__chip[_ngcontent-%COMP%]{font-size:13px;padding:4px 8px;border-radius:6px;display:inline-flex;align-items:center;gap:4px}.collaboration-card__chip--warning[_ngcontent-%COMP%]{background-color:#fff8e6;color:#e69900;border:1px solid #ffe5b4}.collaboration-card__button[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px;outline:none;cursor:pointer;display:inline-flex;align-items:center;gap:8px;border:1px solid transparent;border-radius:20px}.collaboration-card__button--collaborator[_ngcontent-%COMP%]{background-color:#e5f9ee;color:#00c751}.collaboration-card__button--pending[_ngcontent-%COMP%]{background-color:#fbf4ec;color:#e49d3a}.collaboration-card__button--invite[_ngcontent-%COMP%]{background-color:#1890ff;color:#fff}.collaboration-card--skeleton[_ngcontent-%COMP%]{pointer-events:none}.collaboration-card--skeleton[_ngcontent-%COMP%]   .skeleton-block[_ngcontent-%COMP%]{background-color:#eee;border-radius:4px;width:100%;height:16px}.collaboration-card--skeleton__logo.skeleton-block[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%}.collaboration-card--skeleton__divider.skeleton-block[_ngcontent-%COMP%]{height:1px;margin:12px 0}.collaboration-card--skeleton__footer.skeleton-block[_ngcontent-%COMP%]{height:24px;width:100px}"]}),s})();var ut=d(6580),D=d(9417);const mt=["provinceInput"],_t=["cityInput"],G=()=>({standalone:!0}),ft=i=>({"crm-item-tag-active":i});function vt(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",31)(1,"div",32)(2,"div",33),t.nrm(3,"span"),t.k0s(),t.j41(4,"div",34),t.EFF(5),t.k0s()(),t.j41(6,"div",35),t.bIt("click",function(){const e=t.eBV(o).$implicit,a=t.XpG();return t.Njj(a.onRemoveLanguage(e))}),t.nrm(7,"i",36),t.k0s()()}if(2&i){let o,n;const e=s.$implicit,a=t.XpG();t.R7$(3),t.HbH(null==(o=a.utils.getLanguageInfo(e))?null:o.flagClass),t.R7$(2),t.SpI(" ",null==(n=a.utils.getLanguageInfo(e))?null:n.name," ")}}function ht(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",25)(1,"ion-checkbox",37),t.bIt("ionChange",function(e){const a=t.eBV(o).$implicit,l=t.XpG();return t.Njj(l.onCheckboxChange(a.value,e,"offices"))}),t.k0s(),t.j41(2,"div",27),t.EFF(3),t.nI1(4,"translate"),t.k0s()()}if(2&i){const o=s.$implicit,n=t.XpG();t.R7$(),t.Y8G("value",o.value)("checked",n.filterData.offices.includes(o.value)),t.R7$(2),t.JRh(t.bMT(4,3,o.label))}}function yt(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",25)(1,"ion-checkbox",37),t.bIt("ionChange",function(e){const a=t.eBV(o).$implicit,l=t.XpG();return t.Njj(l.onCheckboxChange(a.value,e,"agentsCount"))}),t.k0s(),t.j41(2,"div",27),t.EFF(3),t.k0s()()}if(2&i){const o=s.$implicit,n=t.XpG();t.R7$(),t.Y8G("value",o.value)("checked",n.filterData.agentsCount.includes(o.value)),t.R7$(2),t.JRh(o.label)}}function bt(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",25)(1,"ion-checkbox",37),t.bIt("ionChange",function(e){const a=t.eBV(o).$implicit,l=t.XpG();return t.Njj(l.onCheckboxChange(a.value,e,"annualSales"))}),t.k0s(),t.j41(2,"div",27),t.EFF(3),t.k0s()()}if(2&i){const o=s.$implicit,n=t.XpG();t.R7$(),t.Y8G("value",o.value)("checked",n.filterData.annualSales.includes(o.value)),t.R7$(2),t.JRh(o.label)}}function Ct(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",38),t.bIt("click",function(){const e=t.eBV(o).$implicit,a=t.XpG();return t.Njj(a.onTogglePromotion(e))}),t.EFF(1),t.k0s()}if(2&i){const o=s.$implicit,n=t.XpG();t.Y8G("ngClass",t.eq3(2,ft,n.filterData.sharedPromotionsIds.includes(o.id))),t.R7$(),t.SpI(" ",o.projectName," ")}}let kt=(()=>{var i;class s{constructor(n,e,a,l){this.ngZone=n,this.popoverService=e,this.utils=a,this.api=l,this.onFilter=new t.bkB,this.filterData={country:"Espa\xf1a",province:"",city:"",languages:[],offices:[],agentsCount:[],annualSales:[],hasOperations:!1,hasVisits:!1,sharedPromotionsIds:[]},this.officeOptions=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"text.office_4_plus"}],this.commercialOptions=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"text.commercial_4_plus"}],this.annualSalesOptions=[{value:2e5,label:"200 k"},{value:4e5,label:"400 k"},{value:6e5,label:"600 k"},{value:1e6,label:"text.sales_1m_plus"}],this.sort=null,this.pagination={page:0,itemsPerPage:25},this.promotions=[]}ngOnInit(){}ngAfterViewInit(){this.getPromotions(),this.provinceAutocomplete=new google.maps.places.Autocomplete(this.provinceInput.nativeElement,{types:["(regions)"],componentRestrictions:{country:"es"},fields:["address_component","geometry"]}),this.provinceAutocomplete.addListener("place_changed",()=>{this.ngZone.run(()=>{var n,e;const a=this.provinceAutocomplete.getPlace(),l=null===(n=a.address_components)||void 0===n?void 0:n.find(c=>c.types.includes("administrative_area_level_2"));l&&(this.filterData.province=l.long_name,this.provinceInput.nativeElement.value=l.long_name),null!==(e=a.geometry)&&void 0!==e&&e.viewport&&this.cityAutocomplete.setBounds(a.geometry.viewport)})}),this.cityAutocomplete=new google.maps.places.Autocomplete(this.cityInput.nativeElement,{types:["locality"],componentRestrictions:{country:"es"},fields:["address_component"]}),this.cityAutocomplete.addListener("place_changed",()=>{this.ngZone.run(()=>{var n;const a=null===(n=this.cityAutocomplete.getPlace().address_components)||void 0===n?void 0:n.find(l=>l.types.includes("locality"));a&&(this.filterData.city=a.long_name,this.cityInput.nativeElement.value=a.long_name)})})}getPromotions(){var n=this;return(0,v.A)(function*(){const e=yield n.api.getPromotions({},n.sort,n.pagination,null);n.promotions=e.success.data||[]})()}onAddLanguage(n){this.popoverService.onShowCountrySelectorPopover(n,{languageSelector:!0,showCountryCode:!1,selectedCodes:this.filterData.languages}).then(a=>{var l;null!=a&&null!==(l=a.data)&&void 0!==l&&l.country&&this.filterData.languages.push(a.data.country.code)})}onRemoveLanguage(n){this.filterData.languages=this.filterData.languages.filter(e=>e!==n)}onCheckboxChange(n,e,a){const l=this.filterData[a],c={offices:this.officeOptions,agentsCount:this.commercialOptions,annualSales:this.annualSalesOptions}[a].map(r=>r.value);if(e.detail.checked)c.filter(r=>r>=n).forEach(r=>{l.includes(r)||l.push(r)});else{const r=l.indexOf(n);r>-1&&l.splice(r,1)}}onTogglePromotion(n){const e=this.filterData.sharedPromotionsIds,a=e.indexOf(n.id);a>-1?e.splice(a,1):e.push(n.id)}onClickFilter(){const n={},e=[];if(this.filterData.province&&(n.province={equals:this.filterData.province}),this.filterData.city&&(n.city={equals:this.filterData.city}),this.filterData.languages.length&&(n.languages={hasSome:this.filterData.languages}),this.filterData.offices.length){const c=this.officeOptions.map(u=>u.value),r=this.buildNumConditions(this.filterData.offices,c);1===r.length?n.officesCount=r[0]:e.push(...r.map(u=>({officesCount:u})))}if(this.filterData.agentsCount.length){const c=this.commercialOptions.map(u=>u.value),r=this.buildNumConditions(this.filterData.agentsCount,c);1===r.length?n.agentsCount=r[0]:e.push(...r.map(u=>({agentsCount:u})))}if(this.filterData.annualSales.length){const c=this.annualSalesOptions.map(u=>u.value),r=this.buildNumConditions(this.filterData.annualSales,c);1===r.length?n.annualSales=r[0]:e.push(...r.map(u=>({annualSales:u})))}e.length&&(n.OR=e),this.filterData.hasOperations&&(n.hasOperations=!0),this.filterData.hasVisits&&(n.hasVisits=!0),console.log("sharedPromotionsIds",this.filterData.sharedPromotionsIds);const l={};this.filterData.sharedPromotionsIds.length&&(l.promotions={apply:!0,filter:{id:{in:this.filterData.sharedPromotionsIds}},onlyCount:!1}),this.filterData.hasVisits&&(l.visits={apply:!0,filter:{},onlyCount:!1}),console.log(this.filterData),console.log(n),console.log("join",l),this.onFilter.emit({filter:n,joinTables:l})}onResetFilters(){this.filterData={country:"Espa\xf1a",province:"",city:"",languages:[],offices:[],agentsCount:[],annualSales:[],hasOperations:!1,hasVisits:!1,sharedPromotionsIds:[]},this.provinceInput.nativeElement.value="",this.cityInput.nativeElement.value="",this.cityAutocomplete.setBounds(void 0),this.onFilter.emit({filter:{},joinTables:{}})}buildNumConditions(n,e){const a=e[e.length-1],c=n.filter(r=>r!==a).map(r=>({equals:r}));return n.includes(a)&&c.push({gte:a}),c}}return(i=s).\u0275fac=function(n){return new(n||i)(t.rXU(t.SKi),t.rXU($.m),t.rXU(P.T),t.rXU(j.i))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-agencies-filter-block"]],viewQuery:function(n,e){if(1&n&&(t.GBs(mt,5),t.GBs(_t,5)),2&n){let a;t.mGM(a=t.lsd())&&(e.provinceInput=a.first),t.mGM(a=t.lsd())&&(e.cityInput=a.first)}},outputs:{onFilter:"onFilter"},decls:90,vars:68,consts:[["provinceInput",""],["cityInput",""],[2,"position","relative","background","white"],["autocomplete","off","novalidate",""],["type","text","autocomplete","username",2,"display","none"],["type","password","autocomplete","new-password",2,"display","none"],[1,"crm-header-modal","crm-header-modal-fixed-top"],[1,"crm-modal-header-title"],[1,"crm-buttons-group"],["type","button",1,"crm-button",3,"click"],["type","button",1,"crm-button-secondary","crm-button-secondary-red",3,"click"],[1,"crm-block-inputs","crm-block-filters-inputs"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input"],["type","text","name","province","autocomplete","off","autocorrect","off","spellcheck","false",3,"ngModelChange","placeholder","ngModel","ngModelOptions"],["type","text","name","city","autocomplete","off","autocorrect","off","spellcheck","false",3,"ngModelChange","placeholder","ngModel","ngModelOptions"],[1,"crm-input","crm-input-medium"],[1,"crm-section-items"],["class","crm-item-option crm-item-option-lang edit",4,"ngFor","ngForOf"],["type","button",1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"fas","fa-add"],[1,"crm-input-checkboxes",2,"grid-template-columns","1fr"],["class","crm-input-checkbox",4,"ngFor","ngForOf"],[1,"crm-input-checkboxes"],[1,"crm-input-checkbox"],["name","hasOperations",3,"ngModelChange","ngModel","ngModelOptions"],[1,"crm-input-checkbox-label"],["name","hasVisits",3,"ngModelChange","ngModel","ngModelOptions"],[1,"crm-section-tags"],["class","crm-item-tag",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"crm-item-option","crm-item-option-lang","edit"],[1,"crm-item-option-left"],[1,"crm-item-option-flag"],[1,"crm-item-option-label"],[1,"crm-item-option-remove",3,"click"],[1,"fas","fa-trash"],[3,"ionChange","value","checked"],[1,"crm-item-tag",3,"click","ngClass"]],template:function(n,e){if(1&n){const a=t.RV6();t.j41(0,"div",2)(1,"form",3),t.nrm(2,"input",4)(3,"input",5),t.j41(4,"div",6)(5,"div",7),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"div",8)(9,"button",9),t.bIt("click",function(){return t.eBV(a),t.Njj(e.onClickFilter())}),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"button",10),t.bIt("click",function(){return t.eBV(a),t.Njj(e.onResetFilters())}),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"div",11)(16,"div",12)(17,"div",13),t.EFF(18),t.nI1(19,"translate"),t.k0s(),t.j41(20,"div",14)(21,"input",15,0),t.nI1(23,"translate"),t.mxI("ngModelChange",function(c){return t.eBV(a),t.DH7(e.filterData.province,c)||(e.filterData.province=c),t.Njj(c)}),t.k0s()()(),t.j41(24,"div",12)(25,"div",13),t.EFF(26),t.nI1(27,"translate"),t.k0s(),t.j41(28,"div",14)(29,"input",16,1),t.nI1(31,"translate"),t.mxI("ngModelChange",function(c){return t.eBV(a),t.DH7(e.filterData.city,c)||(e.filterData.city=c),t.Njj(c)}),t.k0s()()(),t.j41(32,"div",17)(33,"div",13),t.EFF(34),t.nI1(35,"translate"),t.k0s(),t.j41(36,"div",18),t.DNE(37,vt,8,3,"div",19),t.j41(38,"button",20),t.bIt("click",function(c){return t.eBV(a),t.Njj(e.onAddLanguage(c))}),t.nrm(39,"i",21),t.EFF(40),t.nI1(41,"translate"),t.k0s()()(),t.j41(42,"div",12)(43,"div",13),t.EFF(44),t.nI1(45,"translate"),t.k0s(),t.j41(46,"div",22),t.DNE(47,ht,5,5,"div",23),t.k0s()(),t.j41(48,"div",12)(49,"div",13),t.EFF(50),t.nI1(51,"translate"),t.k0s(),t.j41(52,"div",22),t.DNE(53,yt,4,3,"div",23),t.k0s()(),t.j41(54,"div",12)(55,"div",13),t.EFF(56),t.nI1(57,"translate"),t.k0s(),t.j41(58,"div",22),t.DNE(59,bt,4,3,"div",23),t.k0s()(),t.j41(60,"div",12)(61,"div",13),t.EFF(62),t.nI1(63,"translate"),t.k0s(),t.j41(64,"div",24)(65,"div",25)(66,"ion-checkbox",26),t.mxI("ngModelChange",function(c){return t.eBV(a),t.DH7(e.filterData.hasOperations,c)||(e.filterData.hasOperations=c),t.Njj(c)}),t.k0s(),t.j41(67,"div",27),t.EFF(68),t.nI1(69,"translate"),t.k0s()()()(),t.j41(70,"div",12)(71,"div",13),t.EFF(72),t.nI1(73,"translate"),t.k0s(),t.j41(74,"div",24)(75,"div",25)(76,"ion-checkbox",28),t.mxI("ngModelChange",function(c){return t.eBV(a),t.DH7(e.filterData.hasVisits,c)||(e.filterData.hasVisits=c),t.Njj(c)}),t.k0s(),t.j41(77,"div",27),t.EFF(78),t.nI1(79,"translate"),t.k0s()()()(),t.j41(80,"div",12)(81,"div",13),t.EFF(82),t.nI1(83,"translate"),t.k0s(),t.j41(84,"div",29),t.DNE(85,Ct,2,4,"div",30),t.k0s()(),t.nrm(86,"br")(87,"br")(88,"br")(89,"br"),t.k0s()()()}2&n&&(t.R7$(6),t.JRh(t.bMT(7,30,"text.filter")),t.R7$(4),t.JRh(t.bMT(11,32,"text.filter")),t.R7$(3),t.JRh(t.bMT(14,34,"text.reset_filters")),t.R7$(5),t.JRh(t.bMT(19,36,"text.province")),t.R7$(3),t.FS9("placeholder",t.bMT(23,38,"text.select_province")),t.R50("ngModel",e.filterData.province),t.Y8G("ngModelOptions",t.lJ4(64,G)),t.R7$(5),t.JRh(t.bMT(27,40,"text.city")),t.R7$(3),t.FS9("placeholder",t.bMT(31,42,"text.select_city")),t.R50("ngModel",e.filterData.city),t.Y8G("ngModelOptions",t.lJ4(65,G)),t.R7$(5),t.JRh(t.bMT(35,44,"text.languages")),t.R7$(3),t.Y8G("ngForOf",e.filterData.languages),t.R7$(3),t.SpI(" ",t.bMT(41,46,"text.add_language")," "),t.R7$(4),t.JRh(t.bMT(45,48,"text.offices")),t.R7$(3),t.Y8G("ngForOf",e.officeOptions),t.R7$(3),t.JRh(t.bMT(51,50,"text.sales_agents")),t.R7$(3),t.Y8G("ngForOf",e.commercialOptions),t.R7$(3),t.JRh(t.bMT(57,52,"text.annual_sales")),t.R7$(3),t.Y8G("ngForOf",e.annualSalesOptions),t.R7$(3),t.JRh(t.bMT(63,54,"text.with_operations")),t.R7$(4),t.R50("ngModel",e.filterData.hasOperations),t.Y8G("ngModelOptions",t.lJ4(66,G)),t.R7$(2),t.JRh(t.bMT(69,56,"text.yes")),t.R7$(4),t.JRh(t.bMT(73,58,"text.with_visits")),t.R7$(4),t.R50("ngModel",e.filterData.hasVisits),t.Y8G("ngModelOptions",t.lJ4(67,G)),t.R7$(2),t.JRh(t.bMT(79,60,"text.yes")),t.R7$(4),t.JRh(t.bMT(83,62,"text.shared_promotions")),t.R7$(3),t.Y8G("ngForOf",e.promotions))},dependencies:[m.YU,m.Sq,D.qT,D.me,D.BC,D.cb,D.vS,D.cV,x.eY,x.hB,p.D9]}),s})();const xt=i=>({"crm-block-body-fixed":i}),Pt=i=>({"crm-button-secondary-primary":i}),W=(i,s,o,n,e)=>({pageStartIndex:i,pageEndIndex:s,totalCount:o,paginationPage:n,sortField:e}),Ft=i=>({active:i}),It=(i,s)=>({"background-color":i,border:s});function At(i,s){if(1&i){const o=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(o);const e=t.XpG();return t.Njj(e.onInviteAgencies())}),t.nrm(1,"i",18),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"text.invite_agency")," "))}function Rt(i,s){1&i&&(t.nrm(0,"i",19),t.EFF(1),t.nI1(2,"translate")),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"contacts.list.close_filters")," "))}function Mt(i,s){1&i&&(t.nrm(0,"i",20),t.EFF(1),t.nI1(2,"translate")),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"contacts.list.active_filters")," "))}function Tt(i,s){1&i&&(t.nrm(0,"i",20),t.EFF(1),t.nI1(2,"translate")),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"contacts.list.filter")," "))}function jt(i,s){if(1&i&&t.DNE(0,Mt,3,3)(1,Tt,3,3),2&i){const o=t.XpG();t.vxM(o.filters?0:1)}}function Dt(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",12)(1,"app-list-pagination-selectors",21),t.nI1(2,"translate"),t.bIt("goPreviousPage",function(){t.eBV(o);const e=t.XpG();return t.Njj(e.onGoPreviousPage())})("goNextPage",function(){t.eBV(o);const e=t.XpG();return t.Njj(e.onGoNextPage())})("sort",function(e){t.eBV(o);const a=t.XpG();return t.Njj(a.onSort(e))}),t.k0s()()}if(2&i){const o=t.XpG();t.R7$(),t.Y8G("listPaginationConfig",t.s1E(3,W,o.updatePagination().startIndex,o.updatePagination().endIndex,o.allSystemAgenciesCount,o.pagination.page+1,null!=o.sort&&o.sort.field?(null==o.sort?null:o.sort.field)+" "+(null==o.sort?null:o.sort.order):t.bMT(2,1,"contacts.list.default_sort")))}}function Ot(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",13)(1,"app-list-pagination-selectors",21),t.bIt("goPreviousPage",function(){t.eBV(o);const e=t.XpG();return t.Njj(e.onGoPreviousPage())})("goNextPage",function(){t.eBV(o);const e=t.XpG();return t.Njj(e.onGoNextPage())})("sort",function(e){t.eBV(o);const a=t.XpG();return t.Njj(a.onSort(e))}),t.k0s()()}if(2&i){const o=t.XpG();t.R7$(),t.Y8G("listPaginationConfig",t.s1E(1,W,o.updatePagination().startIndex,o.updatePagination().endIndex,o.allSystemAgenciesCount,o.pagination.page+1,null!=o.sort&&o.sort.field?(null==o.sort?null:o.sort.field)+" "+(null==o.sort?null:o.sort.order):"Fecha de creaci\xf3n"))}}function St(i,s){1&i&&(t.j41(0,"div",15),t.nrm(1,"app-card-agency",22)(2,"app-card-agency",22)(3,"app-card-agency",22),t.k0s()),2&i&&(t.R7$(),t.Y8G("isSkeleton",!0),t.R7$(),t.Y8G("isSkeleton",!0),t.R7$(),t.Y8G("isSkeleton",!0))}function Et(i,s){if(1&i&&t.EFF(0),2&i){const o=t.XpG().$implicit;t.SpI(" (",null==o?null:o.count,") ")}}function $t(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",26),t.bIt("click",function(){const e=t.eBV(o).$implicit,a=t.XpG(2);return t.Njj(a.onClickAgencyRelation(e))}),t.j41(1,"div",27),t.EFF(2),t.DNE(3,Et,1,1),t.nrm(4,"div",28),t.k0s()()}if(2&i){const o=s.$implicit;t.Y8G("ngClass",t.eq3(4,Ft,null==o?null:o.isSelected)),t.R7$(2),t.SpI(" ",null==o?null:o.title," "),t.R7$(),t.vxM(null!==(null==o?null:o.count)?3:-1),t.R7$(),t.Y8G("ngStyle",t.l_i(6,It,null==o?null:o.color,"1px solid "+(null==o?null:o.color)))}}function Gt(i,s){if(1&i){const o=t.RV6();t.j41(0,"app-card-agency",29),t.bIt("inviteAgencyClick",function(e){t.eBV(o);const a=t.XpG(2);return t.Njj(a.onInviteAgencyClick(e))}),t.k0s()}if(2&i){const o=s.$implicit,n=t.XpG(2);t.Y8G("promoterPromotions",n.promoterPromotions)("agency",o)("options",o.agencyCardOptions)}}function Lt(i,s){if(1&i&&(t.j41(0,"div",23),t.Z7z(1,$t,5,9,"div",24,t.fX1),t.k0s(),t.j41(3,"div",15),t.Z7z(4,Gt,1,3,"app-card-agency",25,t.fX1),t.k0s()),2&i){const o=t.XpG();t.R7$(),t.Dyx(o.agencyRelations),t.R7$(3),t.Dyx(o.agencies)}}function Nt(i,s){if(1&i){const o=t.RV6();t.j41(0,"div",16)(1,"app-agencies-filter-block",30),t.bIt("onFilter",function(e){t.eBV(o);const a=t.XpG();return t.Njj(a.onFilter(e))}),t.k0s()()}2&i&&t.Y8G("@biggerFadeSlideIn",void 0)}let Bt=(()=>{var i;class s{constructor(n,e,a,l,c,r,u,b){this.router=n,this.toastService=e,this.headerService=a,this.modalCtrl=l,this.api=c,this.state=r,this.popoversService=u,this.translate=b,this.promotion=null,this.agenciesAlreadyLinked=[],this.agenciesNotLinked=[],this.agencies=[],this.allSystemAgenciesCount=0,this.searchString="",this.searchSubject=new F.B,this.agencyCardOptions={type:"globalAgencies"},this.aside={type:"filters",visible:!0},this.agencyRelations=[{id:"agencias-colaboradoras",title:"Agencias colaboradoras",subtitle:"",color:"#4CAF50",isSelected:!0,count:0},{id:"agencias-no-colaboradoras",title:"Agencias no colaboradoras",subtitle:"",color:"#FF9800",isSelected:null,count:null}],this.filters=null,this.sort=null,this.pagination={page:0,itemsPerPage:25},this.agencyPrismaFilter={},this.agencyJoinTables={},this.promoterPromotions=0,this.loadingList=!1}ngOnInit(){this.getState(),this.getData()}ionViewWillEnter(){this.promotion?this.agencyCardOptions.type="promotionAgencies":this.headerService.setConfig({title:"agencies"})}getState(){this.state.getState().subscribe(n=>{this.currentUser=n.user,this.currentPromoter=n.promoter})}onInviteAgencies(){var n=this;return(0,v.A)(function*(){yield(yield n.modalCtrl.create({component:k.v,cssClass:"modal-invite-agency"})).present()})()}onSearchInputChange(n){var e=this;let a=n.target.value;this.agencyPrismaFilter={},clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((0,v.A)(function*(){e.agencyPrismaFilter.OR=[{email:{contains:a}},{email1:{contains:a}},{email2:{contains:a}},{email3:{contains:a}},{email4:{contains:a}},{email5:{contains:a}},{nifCif:{contains:a}},{phone1:{contains:a}},{phone2:{contains:a}},{phone3:{contains:a}},{phone4:{contains:a}},{phone5:{contains:a}},{legalName:{contains:a}},{name:{contains:a}}],console.log(e.agencyPrismaFilter),e.getData()}),1e3)}onSearchChanged(n){this.searchString=n}onToggleAside(){this.aside.visible=!this.aside.visible}onFilter(n){Object.keys((null==n?void 0:n.filter)||{}).length||(this.searchString=null),this.agencyPrismaFilter=n.filter,this.agencyJoinTables=n.joinTables,this.pagination.page=0,this.getData()}onGoNextPage(){(this.pagination.page+1)*this.pagination.itemsPerPage<this.allSystemAgenciesCount&&(this.pagination.page++,this.getData())}onGoPreviousPage(){this.pagination.page>0&&(this.pagination.page--,this.getData())}onInviteAgencyClick(n){var e=this;return(0,v.A)(function*(){const{agency:a,options:l}=n;if("globalAgencies"===l.type)yield(yield e.modalCtrl.create({component:k.v,cssClass:"modal-invite-agency",componentProps:{agencyCardOpen:a}})).present();else if("promotionAgencies"===l.type){const c=l.promotion;let r={status:"pending",type:"register",agencyEmail:a.email,agencyId:a.id};const b=(yield e.api.createAgencyInvitationToPromotions(r)).success.data,O=[c.id],C=yield e.api.addPromotionsToAgencyInvitationToPromotions(O,b.id);if(C.error)return void e.toastService.showErrorToast(e.translate.instant("text.invite_agency_error")+C.error.errorMessage);e.toastService.showSuccessToast(e.translate.instant("text.invite_agency_success")),e.getData()}})()}onClickAgencyRelation(n){this.agencyRelations.forEach(e=>{e.isSelected=e.id===n.id}),this.getData()}updatePagination(){return{startIndex:this.pagination.page*this.pagination.itemsPerPage+1,endIndex:Math.min((this.pagination.page+1)*this.pagination.itemsPerPage,this.allSystemAgenciesCount)}}getData(){var n=this;return(0,v.A)(function*(){var e,a,l,c,r,u;let b,O;n.loadingList=!0,n.currentPromoter||(yield new Promise(g=>{setTimeout(g,100)}),n.getData()),n.promotion&&(n.agencyCardOptions.type="promotionAgencies"),console.log(3244324324,n.agencyRelations,"this.agencyRelations");const C=n.agencyRelations.find(g=>"agencias-colaboradoras"===g.id).isSelected,S=n.agencyRelations.find(g=>"agencias-no-colaboradoras"===g.id).isSelected;if(console.log(88888888,C),console.log(999999999,S),console.log("THIS PROMOTER",n.currentPromoter),!0===C||null===C&&null===S||!1===C&&!1===S){var N;let g={promoters:{apply:!0,filter:{id:{equals:null===(N=n.currentPromoter)||void 0===N?void 0:N.id}},onlyCount:!1}};var B,V,X;if(g=n.promotion?{...g,promotions:{apply:!0,filter:{id:{equals:n.promotion.id},promoterId:{equals:null===(B=n.currentPromoter)||void 0===B?void 0:B.id}},onlyCount:!1}}:{...g,promotions:{apply:!0,filter:{promoterId:{equals:null===(V=n.currentPromoter)||void 0===V?void 0:V.id}},onlyCount:!1},...n.agencyJoinTables},g={...g,users:{apply:!0,filter:{},onlyCount:!0},...n.agencyJoinTables.promotions?{promotions:n.agencyJoinTables.promotions}:{promotions:{apply:!0}}},b=yield n.api.getAgency(n.agencyPrismaFilter,n.sort,n.pagination,g),b.error)return n.toastService.showToast({text:n.translate.instant("text.load_agencies_error")+(null===(X=b.error)||void 0===X?void 0:X.errorMessage),theme:"red",icon:"fas fa-exclamation-triangle",time:1e4}),void(n.loadingList=!1);n.agencyRelations.map(h=>{var _;"agencias-colaboradoras"===h.id&&(h.count=null===(_=b)||void 0===_||null===(_=_.success)||void 0===_?void 0:_.metadata)})}if(!0===S||null===C&&null===S||!1===C&&!1===S){let g={};var Y;g=n.promotion?{promotions:{apply:!0,filter:{id:{equals:n.promotion.id}},onlyCount:!1,negativeFiler:!0},agencyInvitationToPromotions:{apply:!0,mode:"include",filter:{status:{equals:"pending"}},onlyCount:!1}}:{promoters:{apply:!0,filter:{id:{equals:null===(Y=n.currentPromoter)||void 0===Y?void 0:Y.id}},onlyCount:!1,negativeFiler:!0}},g={...g,users:{apply:!0,filter:{},onlyCount:!0}},O=yield n.api.getAgency(n.agencyPrismaFilter,n.sort,n.pagination,g)}let J=(null===(e=b)||void 0===e||null===(e=e.success)||void 0===e?void 0:e.data)||[];J=J.map(g=>(g.isLinked=!0,g.agencyCardOptions=I.cloneDeep(n.agencyCardOptions),n.promotion&&(g.agencyCardOptions.promotion=n.promotion,g.agencyCardOptions.invitationStatus="collaborator"),g));let H=(null===(a=O)||void 0===a||null===(a=a.success)||void 0===a?void 0:a.data)||[];if(H=H.map(g=>{if(g.agencyCardOptions=I.cloneDeep(n.agencyCardOptions),n.promotion){g.agencyCardOptions.promotion=n.promotion;for(const h of g.agencyInvitationToPromotions)h.promotions.find(_=>_.id===n.promotion.id)&&"pending"===h.status&&(g.agencyCardOptions.invitationStatus="pending")}return g}),n.agencies=J.concat((null===(l=O)||void 0===l||null===(l=l.success)||void 0===l?void 0:l.data)||[]),"promoter"===n.currentUser.accountType&&n.agencies.length){const h=n.agencies.map(_=>{var U;let Q=null;if(null!==(U=_.documents)&&void 0!==U&&U.length){const Yt=new Date(_.documents[_.documents.length-1].toDate),Jt=new Date,Ut=Yt.getTime()-Jt.getTime(),E=Math.floor(Ut/864e5);if(E<60){let w="";E<0?w="Expirado":E<=60&&(w=n.translate.instant("text.expires_in_days",{days:E})),Q={dateStr:w,expired:E<0}}}return{..._,activeDocumentInfo:Q}});n.agencies=h}n.allSystemAgenciesCount=((null===(c=b)||void 0===c||null===(c=c.success)||void 0===c||null===(c=c.metadata)||void 0===c?void 0:c.count)||0)+((null===(r=O)||void 0===r||null===(r=r.success)||void 0===r||null===(r=r.metadata)||void 0===r?void 0:r.count)||0),n.pagination.page=0,n.updatePagination(),n.loadingList=!1;const K=yield n.api.getPromotions({},null,{page:0,itemsPerPage:1e3},null);console.log("ELL RESULT DE OTTES LES PROMOCIONS",K),n.promoterPromotions=K.success.data.length,n.promotion&&(n.agencyJoinTables.promotions={apply:!0,filter:{id:{equals:n.promotion.id}},onlyCount:!1});let Vt={promoters:{apply:!0,filter:{id:{equals:n.currentPromoter.id}},onlyCount:!1},promotions:{apply:!0,filter:n.promotion?{id:{equals:n.promotion.id},promoterId:{equals:n.currentPromoter.id}}:{promoterId:{equals:n.currentPromoter.id}},onlyCount:!1},...n.agencyJoinTables};const Z=(null===(u=yield n.api.getAgency(n.agencyPrismaFilter,n.sort,n.pagination,Vt))||void 0===u||null===(u=u.success)||void 0===u?void 0:u.data)||[];console.log("AGENCIES",JSON.parse(JSON.stringify(Z))),n.agencies=n.agencies.map(g=>{const h=Z.find(_=>_.id===g.id);return console.log("LA AGENCY WITH PROMOTIONS",h),h&&(g.promotions=h.promotions),g})})()}onSort(n){var e=this;return(0,v.A)(function*(){const a=yield e.popoversService.onShowMenuPopover(n,"list-order");if(console.log("Popover result:",a),null!=a&&a.data){const l=a.data;if(l.includes("_")){const c=l.split("_")[0],r=l.split("_")[1];e.sort={field:c,order:r}}else e.sort={field:l,order:"asc"};e.getData()}})()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.rXU(T.Ix),t.rXU(y.f),t.rXU(A.d),t.rXU(x.W3),t.rXU(j.i),t.rXU(L.c),t.rXU($.m),t.rXU(p.c$))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-agencies-list"]],inputs:{promotion:"promotion"},decls:30,vars:18,consts:[[3,"fullscreen","scrollY"],[1,"crm-block-content",2,"padding-top","10px","background","#F9F9F9"],[1,"crm-block-body"],[3,"ngClass"],[1,"crm-header-modal"],[1,"crm-input"],[1,"crm-input-input","crm-input-input-searchbar"],[1,"fas","fa-search"],["type","text",3,"input","value","placeholder"],[1,"crm-buttons-group"],[1,"crm-button"],[1,"crm-button-secondary",3,"click","ngClass"],[2,"background","white"],[1,"crm-block-body-fixed","crm-block-body-fixed-padding-bigger"],[1,"crm-block-body-blue-content"],[1,"crm-section-inline-cards"],[1,"crm-block-content-aside"],[1,"crm-button",3,"click"],[1,"fas","fa-envelope"],[1,"fa","fa-times"],[1,"fa","fa-filter"],[3,"goPreviousPage","goNextPage","sort","listPaginationConfig"],[3,"isSkeleton"],[1,"crm-section-operations-list-buttons",2,"padding","0"],[1,"crm-operations-list-pipe-button",3,"ngClass"],[3,"promoterPromotions","agency","options"],[1,"crm-operations-list-pipe-button",3,"click","ngClass"],[1,"crm-operations-list-pipe-button-subtitle"],[1,"crm-dot","success",3,"ngStyle"],[3,"inviteAgencyClick","promoterPromotions","agency","options"],[3,"onFilter"]],template:function(n,e){1&n&&(t.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.nrm(7,"i",7),t.j41(8,"input",8),t.nI1(9,"translate"),t.bIt("input",function(l){return e.onSearchInputChange(l)}),t.k0s()()(),t.j41(10,"div",9),t.DNE(11,At,4,3,"button",10),t.j41(12,"button",11),t.bIt("click",function(){return e.onToggleAside()}),t.DNE(13,Rt,3,3)(14,jt,2,1),t.k0s()()(),t.DNE(15,Dt,3,9,"div",12),t.k0s(),t.DNE(16,Ot,2,7,"div",13),t.j41(17,"div",14),t.DNE(18,St,4,3,"div",15)(19,Lt,6,0),t.nrm(20,"br")(21,"br")(22,"br")(23,"br")(24,"br")(25,"br")(26,"br")(27,"br")(28,"br"),t.k0s()(),t.DNE(29,Nt,2,1,"div",16),t.k0s()()),2&n&&(t.Y8G("fullscreen",!0)("scrollY",!1),t.R7$(3),t.Y8G("ngClass",t.eq3(14,xt,!e.promotion)),t.R7$(5),t.Y8G("value",e.searchString)("placeholder",t.bMT(9,12,"text.search_agency")),t.R7$(3),t.vxM(e.promotion?-1:11),t.R7$(),t.Y8G("ngClass",t.eq3(16,Pt,!(null!=e.aside&&e.aside.visible)&&e.filters)),t.R7$(),t.vxM(null!=e.aside&&e.aside.visible?13:14),t.R7$(2),t.vxM(e.promotion?-1:15),t.R7$(),t.vxM(e.promotion?16:-1),t.R7$(2),t.vxM(e.loadingList?18:19),t.R7$(11),t.vxM(null!=e.aside&&e.aside.visible?29:-1))},dependencies:[m.YU,m.B3,x.W9,pt,ut.k,kt,p.D9],data:{animation:[(0,f.hZ)("fadeSlideIn",[(0,f.kY)(":enter",[(0,f.iF)({opacity:0,transform:"translateX(30px)"}),(0,f.i0)("150ms ease-out",(0,f.iF)({opacity:1,transform:"translateX(0)"}))])]),(0,f.hZ)("biggerFadeSlideIn",[(0,f.kY)(":enter",[(0,f.iF)({opacity:0,transform:"translateX(150px)"}),(0,f.i0)("100ms ease-out",(0,f.iF)({opacity:1,transform:"translateX(0)"}))])])]}}),s})()}}]);