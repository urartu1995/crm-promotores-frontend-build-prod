"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1112],{1112:(se,E,v)=>{v.r(E),v.d(E,{CalendarScreenPageModule:()=>le});var w=v(177),V=v(9417),j=v(9465),D=v(5188),b=v(467),C=v(9703);const s=void 0,T=["es",[["a.\xa0m.","p.\xa0m."],s,s],s,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],s,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],s,[["a. C.","d. C."],s,["antes de Cristo","despu\xe9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",s,s,s],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{AUD:[s,"$"],BRL:[s,"R$"],BYN:[s,"\u0440."],CAD:[s,"$"],CNY:[s,"\xa5"],EGP:[],ESP:["\u20a7"],GBP:[s,"\xa3"],HKD:[s,"$"],ILS:[s,"\u20aa"],INR:[s,"\u20b9"],JPY:[s,"\xa5"],KRW:[s,"\u20a9"],MXN:[s,"$"],NZD:[s,"$"],PHP:[s,"\u20b1"],RON:[s,"L"],THB:["\u0e3f"],TWD:[s,"NT$"],USD:["US$","$"],XAF:[],XCD:[s,"$"],XOF:[]},"ltr",function S(a){const o=a,i=Math.floor(Math.abs(a)),t=a.toString().replace(/^[^.]*\.?/,"").length,n=parseInt(a.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 1===o?1:0===n&&0!==i&&i%1e6==0&&0===t||!(n>=0&&n<=5)?4:5}];var e=v(3953),R=v(4501),F=v(2081),I=v(1213),G=v(9710),$=v(8397),y=v(3955);const M=a=>({"disabled-expandable-visits-header":a}),P=(a,o)=>({"expand-visits":a,"collapse-visits":o}),N=(a,o)=>[a,o],A=(a,o,i)=>({"active-view":a,"left-view-button":o,"right-view-button":i}),O=(a,o)=>({"expanded-visits-container-arrow":a,"collapsed-visits-container-arrow":o});function X(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",27),e.bIt("click",function(){const n=e.eBV(i).$implicit,r=e.XpG(2);return e.Njj(r.setView(n))}),e.j41(1,"p"),e.EFF(2),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s()()}if(2&a){const i=o.$implicit,t=e.XpG(2);e.Y8G("ngClass",e.sMw(6,A,i===t.view,i===t.CalendarView.Month,i===t.CalendarView.Week)),e.R7$(2),e.JRh(i===t.CalendarView.Month?e.bMT(3,2,"calendar.month"):e.bMT(4,4,"calendar.week"))}}function Y(a,o){if(1&a&&e.nrm(0,"mwl-calendar-month-view",28),2&a){e.XpG();const i=e.sdS(15),t=e.XpG();e.Y8G("viewDate",t.viewDate)("locale",t.locale)("events",t.events)("cellTemplate",i)}}function z(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",38),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,r=e.XpG(3);return e.Njj(r.openCalendarEventAction(n.meta.visit,n.start))}),e.nrm(1,"div",39),e.j41(2,"p"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}2&a&&(e.R7$(3),e.JRh(e.bMT(4,1,"calendar.visited")))}function B(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",40),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,r=e.XpG(3);return e.Njj(r.openCalendarEventAction(n.meta.visit,n.start))}),e.nrm(1,"div",39),e.j41(2,"p"),e.EFF(3),e.nI1(4,"translate"),e.nI1(5,"translate"),e.k0s()()}if(2&a){const i=e.XpG().$implicit;e.R7$(3),e.JRh("rejected"==i.meta.status?e.bMT(4,1,"calendar.rejected"):e.bMT(5,3,"calendar.canceled"))}}function U(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",41),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,r=e.XpG(3);return e.Njj(r.openCalendarEventAction(n.meta.visit,n.start))}),e.j41(1,"p"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",42),e.nrm(5,"i",43),e.k0s()()}2&a&&(e.R7$(2),e.JRh(e.bMT(3,1,"calendar.new_visit")))}function H(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",44),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,r=e.XpG(3);return e.Njj(r.openCalendarEventAction(n.meta.visit,n.start))}),e.nrm(1,"div",39),e.j41(2,"p"),e.EFF(3),e.nI1(4,"translate"),e.j41(5,"span"),e.EFF(6),e.k0s()()()}if(2&a){const i=e.XpG().$implicit,t=e.XpG(3);e.R7$(3),e.SpI("",e.bMT(4,2,"calendar.visit"),": "),e.R7$(3),e.JRh(t.setCalendarEventTime(i.start))}}function J(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",45),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,r=e.XpG(3);return e.Njj(r.openCalendarEventAction(n.meta.visit,n.start))}),e.j41(1,"div",46),e.nrm(2,"i",47),e.k0s(),e.j41(3,"p"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()}2&a&&(e.R7$(4),e.JRh(e.bMT(5,1,"calendar.evaluate_visit")))}function L(a,o){if(1&a&&(e.j41(0,"div"),e.DNE(1,z,5,3,"div",33)(2,B,6,5,"div",34)(3,U,6,3,"div",35)(4,H,7,4,"div",36)(5,J,6,3,"div",37),e.k0s()),2&a){const i=o.$implicit;e.R7$(),e.Y8G("ngIf","completed"==i.meta.status),e.R7$(),e.Y8G("ngIf","rejected"==i.meta.status||"canceled"==i.meta.status),e.R7$(),e.Y8G("ngIf","pending"==i.meta.status),e.R7$(),e.Y8G("ngIf","accepted"==i.meta.status),e.R7$(),e.Y8G("ngIf","evaluating"==i.meta.status)}}function W(a,o){if(1&a&&(e.j41(0,"div",29)(1,"div",30),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"div",31),e.DNE(5,L,6,5,"div",32),e.k0s()()),2&a){const i=o.day;e.R7$(2),e.JRh(e.i5U(3,2,i.date,"d")),e.R7$(3),e.Y8G("ngForOf",i.events)}}function K(a,o){if(1&a){const i=e.RV6();e.j41(0,"mwl-calendar-week-view",48),e.bIt("eventClicked",function(n){e.eBV(i);const r=e.XpG(2);return e.Njj(r.onEventClick(n))}),e.k0s()}if(2&a){const i=e.XpG(2);e.Y8G("viewDate",i.viewDate)("locale",i.locale)("events",i.weekEvents)}}function Z(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"p"),e.EFF(4),e.k0s()(),e.j41(5,"div",17)(6,"div",18),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.prev())}),e.nrm(7,"i",19),e.k0s(),e.j41(8,"div",20),e.DNE(9,X,5,10,"div",21),e.k0s(),e.j41(10,"div",22),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.next())}),e.nrm(11,"i",23),e.k0s()()(),e.j41(12,"div",24),e.DNE(13,Y,1,4,"mwl-calendar-month-view",25)(14,W,6,5,"ng-template",null,0,e.C5r)(16,K,1,3,"mwl-calendar-week-view",26),e.k0s()()}if(2&a){const i=e.XpG();e.R7$(4),e.JRh(i.formatCurrentDate(i.today)),e.R7$(5),e.Y8G("ngForOf",e.l_i(4,N,i.CalendarView.Month,i.CalendarView.Week)),e.R7$(4),e.Y8G("ngIf",i.view===i.CalendarView.Month),e.R7$(3),e.Y8G("ngIf",i.view===i.CalendarView.Week)}}function Q(a,o){if(1&a&&e.nrm(0,"i",49),2&a){const i=e.XpG();e.Y8G("ngClass",e.l_i(1,O,i.showAcceptedVisits,!i.showAcceptedVisits))}}function q(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",50),e.bIt("click",function(){const n=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.openCalendarEventAction(n.meta.visit,n.start))}),e.j41(1,"p"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",51)(5,"p"),e.EFF(6),e.k0s(),e.j41(7,"div",52),e.nrm(8,"i",43),e.k0s()()()}if(2&a){const i=o.$implicit,t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"calendar.new_visit")),e.R7$(4),e.JRh(t.formatCalendarEventDate(i.start))}}function ee(a,o){if(1&a&&e.nrm(0,"i",49),2&a){const i=e.XpG();e.Y8G("ngClass",e.l_i(1,O,i.showPendingVisits,!i.showPendingVisits))}}function te(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",53),e.bIt("click",function(){const n=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.openCalendarEventAction(n.meta.visit,n.start))}),e.j41(1,"div",54),e.nrm(2,"div",55),e.j41(3,"p"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"div",56)(7,"p"),e.EFF(8),e.k0s(),e.nrm(9,"img",57),e.k0s()()}if(2&a){const i=o.$implicit,t=e.XpG();e.R7$(4),e.Lme("",e.bMT(5,3,"calendar.visit"),": ",t.formatCalendarEventDate(i.start),""),e.R7$(4),e.JRh(t.formatEventTime(i.start,i.end))}}function ne(a,o){if(1&a&&e.nrm(0,"i",49),2&a){const i=e.XpG();e.Y8G("ngClass",e.l_i(1,O,i.showEvaluatingVisits,!i.showEvaluatingVisits))}}function ie(a,o){if(1&a){const i=e.RV6();e.j41(0,"div",58)(1,"div",54)(2,"div",59),e.nrm(3,"i",47),e.k0s(),e.j41(4,"p"),e.EFF(5),e.nI1(6,"translate"),e.k0s()(),e.j41(7,"div",56)(8,"p"),e.EFF(9),e.k0s(),e.nrm(10,"img",57),e.k0s(),e.j41(11,"div",60),e.bIt("click",function(){const n=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.openCalendarEventAction(n.meta.visit,n.start))}),e.j41(12,"p"),e.EFF(13),e.nI1(14,"translate"),e.k0s()()()}if(2&a){const i=o.$implicit,t=e.XpG();e.R7$(5),e.Lme("",e.bMT(6,4,"calendar.visit"),": ",t.formatCalendarEventDate(i.start),""),e.R7$(4),e.JRh(t.formatEventTime(i.start,i.end)),e.R7$(4),e.JRh(e.bMT(14,6,"calendar.evaluate"))}}(0,w.EO)(T);const ae=[{path:"",component:(()=>{var a;class o{constructor(t,n,r,l,d,g){this.headerService=t,this.api=n,this.byvaroState=r,this.modalsService=l,this.toastService=d,this.translate=g,this.view=C.St.Month,this.CalendarView=C.St,this.viewDate=new Date,this.locale="es",this.today=new Date,this.rawEvents=[],this.events=[],this.weekEvents=[],this.acceptedVisits=[],this.pendingConfirmation=[],this.pendingEvaluation=[],this.selectedDay=null,this.loading=!0,this.showAcceptedVisits=!0,this.showPendingVisits=!0,this.showEvaluatingVisits=!0,this.selectedPendingVisitContact=""}openCalendarEventAction(t,n){var r=this;return(0,b.A)(function*(){yield r.modalsService.onShowCalendarEventActionModal(t,n)})()}toggleAcceptedVisits(){this.showAcceptedVisits=!this.showAcceptedVisits}togglePendingVisits(){this.showPendingVisits=!this.showPendingVisits}toggleEvaluatingVisits(){this.showEvaluatingVisits=!this.showEvaluatingVisits}formatValue(t){let n="";return n=t<10?"0"+t:t.toString(),n}formatCurrentDate(t){let n="";return n=this.formatValue(t.getDate())+" "+t.toLocaleString(this.locale,{month:"short"})+" "+t.getFullYear().toString(),n}formatCalendarEventDate(t){let n="",r=t.toString().split("T")[0],l=r.split("-")[0],d=r.split("-")[1];return n=r.split("-")[2]+"/"+d+"/"+l,n}formatEventTime(t,n){let r="",l=t.toString().split("T")[1],d=l.split(":")[0],g=l.split(":")[1],m=n.toISOString().split("T")[1];return r=d+":"+g+" - "+m.split(":")[0]+":"+m.split(":")[1],r}setCalendarEventTime(t){let n="",r=t.toString().split("T")[1],l=r.split(":")[0],d=r.split(":")[1],g=parseInt(l)+1;return n=24==g?l+":"+d+" - 00:"+d:l+":"+d+" - "+g.toString()+":"+d,n}ngOnInit(){var t=this;return(0,b.A)(function*(){t.headerService.setConfig({title:"calendar"}),t.byvaroState.getState().subscribe(function(){var n=(0,b.A)(function*(r){null!=r&&r.user&&(t.currentUser=r.user,console.log("currentUser",t.currentUser),yield t.getData())});return function(r){return n.apply(this,arguments)}}()),t.byvaroState.getRefreshVisitData().subscribe(n=>{n&&(t.getData(),t.byvaroState.setRefreshVisitData(!1))})})()}ionViewWillEnter(){this.currentUser&&this.getData()}setEvaluatingEvents(){var t=this;return(0,b.A)(function*(){for(let n=0;n<t.events.length;n++){let r=t.events[n];new Date(r.meta.visit.date)<new Date((new Date).toISOString())&&("accepted"==r.meta.status||"pending"==r.meta.status)&&(r.meta.status="evaluating",yield t.api.updateVisitById(r.meta.id,{status:"evaluating"}),t.byvaroState.setRefreshVisitData(!0))}})()}onEventClick(t){this.openCalendarEventAction(t.event.meta.visit,t.event.meta.visit.date)}getData(){var t=this;return(0,b.A)(function*(){var n,r;t.loading=!0,t.selectedDay=null;const l={date:{gte:new Date((new Date).getFullYear(),(new Date).getMonth(),1),lte:new Date((new Date).getFullYear(),(new Date).getMonth()+1,1)}},m=yield t.api.getVisit(l,{field:"date",order:"asc"},{page:0,itemsPerPage:1e3});t.rawEvents=null==m||null===(n=m.success)||void 0===n?void 0:n.data,console.log("events",null==m||null===(r=m.success)||void 0===r?void 0:r.data),t.events=t.rawEvents.map(c=>{var f,_,p,h;return{start:c.date,end:c.notes&&c.notes.includes("D\xeda")?void 0:new Date(new Date(c.date).getTime()+36e5),title:c.notes,allDay:c.notes.includes("D\xeda"),color:t.getEventColor(c.status),meta:{id:c.id,notes:c.notes,contactName:null===(f=c.contact)||void 0===f?void 0:f.name,promoterName:(null===(_=c.promoter)||void 0===_?void 0:_.name)||(null===(p=c.agency)||void 0===p?void 0:p.name),propertyName:null===(h=c.property)||void 0===h?void 0:h.reference,status:c.status,visit:c}}}),t.weekEvents=t.rawEvents.map(c=>{var f,_,p,h;return{start:new Date(c.date),end:new Date(new Date(c.date).getTime()+36e5),title:c.notes,allDay:!1,color:t.getEventColor(c.status),meta:{id:c.id,notes:c.notes,contactName:null===(f=c.contact)||void 0===f?void 0:f.name,promoterName:(null===(_=c.promoter)||void 0===_?void 0:_.name)||(null===(p=c.agency)||void 0===p?void 0:p.name),propertyName:null===(h=c.property)||void 0===h?void 0:h.reference,status:c.status,visit:c}}}),t.loading=!1,t.setEvaluatingEvents(),t.pendingConfirmation=t.events.filter(c=>"accepted"==c.meta.status),t.acceptedVisits=t.events.filter(c=>"pending"==c.meta.status),t.pendingEvaluation=t.events.filter(c=>"evaluating"==c.meta.status),t.showPendingVisits=0!=t.pendingConfirmation.length,t.showAcceptedVisits=0!=t.acceptedVisits.length,t.showEvaluatingVisits=0!=t.pendingEvaluation.length,console.log("Week events",t.weekEvents)})()}getEventColor(t){switch(t){case"accepted":case"pending":return{primary:"#3A50E4",secondary:"#EBEBEB"};case"rejected":case"canceled":return{primary:"#F44336",secondary:"#FFCDD2"};case"completed":return{primary:"#00C751",secondary:"#C8F7DC"};default:return{primary:"#9E9E9E",secondary:"#E0E0E0"}}}onHandleVisit(t){var n=this;return(0,b.A)(function*(){var r;console.log("onHandleVisit",t);const l=yield n.modalsService.onShowAcceptRegisterModal(null,t);if(null!=l&&null!==(r=l.data)&&void 0!==r&&r.confirmed){var d;if(null!=l&&null!==(d=l.data)&&void 0!==d&&null!==(d=d.data)&&void 0!==d&&d.confirmVisit){var g,m,c,f;const x={status:"accepted",notes:(null==l||null===(g=l.data)||void 0===g||null===(g=g.data)||void 0===g?void 0:g.notes)||t.notes};"promoter"===(null===(m=n.currentUser)||void 0===m?void 0:m.accountType)?x.promoterResponsableUserId=n.currentUser.id:"agency"===(null===(c=n.currentUser)||void 0===c?void 0:c.accountType)&&(x.responsableUserId=n.currentUser.id);const u=yield n.api.updateVisitById(t.id,x);var _;if(null!=u&&null!==(f=u.error)&&void 0!==f&&f.errorMessage)return n.toastService.showErrorToast(n.translate.instant("calendar.error_accepting_visit")+" "+(null==u||null===(_=u.error)||void 0===_?void 0:_.errorMessage)),null}else{var p,h;const x={status:"rejected",notes:(null==l||null===(p=l.data)||void 0===p||null===(p=p.data)||void 0===p?void 0:p.notes)||t.notes},u=yield n.api.updateVisitById(t.id,x);var k;if(null!=u&&null!==(h=u.error)&&void 0!==h&&h.errorMessage)return n.toastService.showErrorToast(n.translate.instant("calendar.error_accepting_visit")+" "+(null==u||null===(k=u.error)||void 0===k?void 0:k.errorMessage)),null}n.getData()}})()}dayClicked(t){this.selectedDay=this.selectedDay&&this.selectedDay.date.getTime()===t.date.getTime()?null:t,console.log(this.selectedDay)}setView(t){this.view=t}prev(){this.changeDate(-1)}next(){this.changeDate(1)}changeDate(t){this.viewDate=this.view===C.St.Month?new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()+t,1):new Date(this.viewDate.setDate(this.viewDate.getDate()+7*t))}}return(a=o).\u0275fac=function(t){return new(t||a)(e.rXU(R.d),e.rXU(F.i),e.rXU(I.c),e.rXU(G.M),e.rXU($.f),e.rXU(y.c$))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-calendar-screen"]],decls:29,vars:42,consts:[["customMonthCell",""],[3,"fullscreen","scrollY"],[1,"crm-block-content","calendar-space"],["class","crm-block-body-blue-content",4,"ngIf"],[1,"monthly-events-side-panel"],[1,"scrollable-events-list"],[1,"expandable-container","pending-confirmation-container"],[1,"expandable-container-header",3,"click","ngClass"],["class","fas fa-chevron-down fa-2xs",3,"ngClass",4,"ngIf"],[1,"scrollable-visits-container",3,"ngClass"],["class","new-visit-calendar-card",3,"click",4,"ngFor","ngForOf"],[1,"expandable-container"],["class","pending-visits-calendar-card",3,"click",4,"ngFor","ngForOf"],["class","evaluating-visits-calendar-card",4,"ngFor","ngForOf"],[1,"crm-block-body-blue-content"],[1,"toolbar"],[1,"current-date-container"],[1,"calendar-buttons-container"],[1,"nav-button","prev-button",3,"click"],[1,"fas","fa-chevron-left","fa-sm"],[1,"view-toggle"],["class","view-toggle-button",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nav-button","next-button",3,"click"],[1,"fas","fa-chevron-right","fa-sm"],[1,"calendar-container"],[3,"viewDate","locale","events","cellTemplate",4,"ngIf"],[3,"viewDate","locale","events","eventClicked",4,"ngIf"],[1,"view-toggle-button",3,"click","ngClass"],[3,"viewDate","locale","events","cellTemplate"],[1,"custom-cell"],[1,"day-number"],[1,"event-list"],[4,"ngFor","ngForOf"],["class","completed-visit-event",3,"click",4,"ngIf"],["class","rejected-visit-event",3,"click",4,"ngIf"],["class","new-visit-event",3,"click",4,"ngIf"],["class","pending-visit-event",3,"click",4,"ngIf"],["class","evaluating-visit-event",3,"click",4,"ngIf"],[1,"completed-visit-event",3,"click"],[1,"event-marker"],[1,"rejected-visit-event",3,"click"],[1,"new-visit-event",3,"click"],[1,"new-visit-event-calendar-icon"],[1,"far","fa-bell","fa-2xs"],[1,"pending-visit-event",3,"click"],[1,"evaluating-visit-event",3,"click"],[1,"evaluate-visit-event-icon"],[1,"fas","fa-exclamation","fa-2xs"],[3,"eventClicked","viewDate","locale","events"],[1,"fas","fa-chevron-down","fa-2xs",3,"ngClass"],[1,"new-visit-calendar-card",3,"click"],[1,"new-visit-date-container"],[1,"new-visit-notification-icon"],[1,"pending-visits-calendar-card",3,"click"],[1,"pending-visit-info-container"],[1,"pending-visit-icon"],[1,"pending-visit-time-container"],["src","assets/images/avatar.png","alt","user icon"],[1,"evaluating-visits-calendar-card"],[1,"evaluating-visit-icon"],[1,"evaluate-visit-button",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-content",1)(1,"div",2),e.DNE(2,Z,17,7,"div",3),e.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),e.bIt("click",function(){return n.toggleAcceptedVisits()}),e.j41(7,"p"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.DNE(10,Q,1,4,"i",8),e.k0s(),e.j41(11,"div",9),e.DNE(12,q,9,4,"div",10),e.k0s()(),e.j41(13,"div",11)(14,"div",7),e.bIt("click",function(){return n.togglePendingVisits()}),e.j41(15,"p"),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.DNE(18,ee,1,4,"i",8),e.k0s(),e.j41(19,"div",9),e.DNE(20,te,10,5,"div",12),e.k0s()(),e.j41(21,"div",11)(22,"div",7),e.bIt("click",function(){return n.toggleEvaluatingVisits()}),e.j41(23,"p"),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.DNE(26,ne,1,4,"i",8),e.k0s(),e.j41(27,"div",9),e.DNE(28,ie,15,8,"div",13),e.k0s()()()()()()),2&t&&(e.Y8G("fullscreen",!0)("scrollY",!0),e.R7$(2),e.Y8G("ngIf",!n.loading),e.R7$(4),e.Y8G("ngClass",e.eq3(27,M,0==n.acceptedVisits.length)),e.R7$(2),e.Lme("",e.bMT(9,21,"calendar.pending_to_confirm")," (",n.acceptedVisits.length,")"),e.R7$(2),e.Y8G("ngIf",n.acceptedVisits.length>0),e.R7$(),e.Y8G("ngClass",e.l_i(29,P,n.showAcceptedVisits,!n.showAcceptedVisits)),e.R7$(),e.Y8G("ngForOf",n.acceptedVisits),e.R7$(2),e.Y8G("ngClass",e.eq3(32,M,0==n.pendingConfirmation.length)),e.R7$(2),e.Lme("",e.bMT(17,23,"calendar.scheduled_visits")," (",n.pendingConfirmation.length,")"),e.R7$(2),e.Y8G("ngIf",n.pendingConfirmation.length>0),e.R7$(),e.Y8G("ngClass",e.l_i(34,P,n.showPendingVisits,!n.showPendingVisits)),e.R7$(),e.Y8G("ngForOf",n.pendingConfirmation),e.R7$(2),e.Y8G("ngClass",e.eq3(37,M,0==n.pendingEvaluation.length)),e.R7$(2),e.Lme("",e.bMT(25,25,"calendar.pending_to_evaluate")," (",n.pendingEvaluation.length,")"),e.R7$(2),e.Y8G("ngIf",n.pendingEvaluation.length>0),e.R7$(),e.Y8G("ngClass",e.l_i(39,P,n.showEvaluatingVisits,!n.showEvaluatingVisits)),e.R7$(),e.Y8G("ngForOf",n.pendingEvaluation))},dependencies:[w.YU,w.Sq,w.bT,j.W9,C.jD,C.tG,w.vh,y.D9],styles:['@charset "UTF-8";[_nghost-%COMP%]     .cal-month-view{padding:0}[_nghost-%COMP%]     .cal-month-view .cal-header .cal-cell{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;color:#333;border:1px solid #ebebeb;padding:8px;background:#fff;text-align:left;font-weight:400;text-transform:uppercase}[_nghost-%COMP%]     .cal-month-view .cal-header .cal-cell:hover{background:#fff}[_nghost-%COMP%]     .cal-month-view .cal-day-number{float:left;margin:12px 0 0 12px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;color:#333;font-size:18px;opacity:1}[_nghost-%COMP%]     .cal-month-view .cal-day-badge{display:none}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-weekend .cal-day-number{color:#bbb}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today{background-color:#fff;border-radius:6px;box-shadow:0 0 0 2px #3a50e4;border:none}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today .cal-day-number{color:#3a50e4;font-size:18px;font-weight:700}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today .ds-calendar-cell-title{color:#3a50e4;font-weight:700}[_nghost-%COMP%]     .cal-month-view .cal-cell-top{min-height:auto;max-height:auto}[_nghost-%COMP%]     .cal-week-view{padding:0}[_nghost-%COMP%]     .cal-week-view .cal-header .cal-cell{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;color:#333;border-bottom:1px solid #ebebeb;border-right:1px solid #ebebeb;padding:8px;background:#fff;text-transform:uppercase;font-weight:400;text-align:left}[_nghost-%COMP%]     .cal-week-view .cal-header .cal-cell:hover{background:#fff}[_nghost-%COMP%]     .cal-week-view .cal-header .cal-cell:last-child{border-right:none}[_nghost-%COMP%]     .cal-week-view .cal-time-label{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;color:#333;padding:4px 8px;border-right:1px solid #ebebeb;background:#fff}[_nghost-%COMP%]     .cal-week-view .cal-time-segment{border-top:1px solid #ebebeb}[_nghost-%COMP%]     .cal-week-view .cal-body .cal-day-column{border-right:1px solid #ebebeb}[_nghost-%COMP%]     .cal-week-view .cal-body .cal-day-column:last-child{border-right:none}[_nghost-%COMP%]     .cal-week-view .cal-day-column.cal-today{background-color:#fff;box-shadow:inset 0 0 0 2px #3a50e4}.crm-block-body-blue-content[_ngcontent-%COMP%]{height:100%}.calendar-space[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.monthly-events-side-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:325px;height:100vh;background-color:#fff}.scrollable-events-list[_ngcontent-%COMP%]{width:100%;height:95%;overflow-y:auto}.expandable-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;height:-moz-fit-content;height:fit-content;margin:0 auto 25px;border-radius:8px;border:1px solid var(--crm-grey-color-light)}.pending-confirmation-container[_ngcontent-%COMP%]{margin-top:25px!important}.expandable-container-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;margin-top:15px;margin-bottom:15px}.expandable-container-header[_ngcontent-%COMP%]:hover{cursor:pointer}.expandable-container-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--crm-font-size-small);font-family:var(--crm-font-family);color:var(--crm-font-color-light);margin:0 0 0 15px}.expandable-container-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--crm-font-color-light);margin-right:15px}.agent-filter[_ngcontent-%COMP%]{width:85%;margin:25px auto}.agent-filter[_ngcontent-%COMP%]   .crm-input-label[_ngcontent-%COMP%]{font-size:10px}.crm-select-item[_ngcontent-%COMP%]{font-size:var(--crm-input-input-font-size)}.crm-select-item[_ngcontent-%COMP%]   ion-select-option[_ngcontent-%COMP%]{font-size:var(--crm-input-input-font-size)}.crm-block-body-blue-content[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px auto}.view-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;width:-moz-fit-content;width:fit-content;border:1px solid var(--crm-grey-color-light);border-radius:100px;height:35px;margin:0 15px}.view-toggle-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:225px;height:28px;border-radius:100px}.view-toggle-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-font-color-light);font-size:var(--crm-font-size-big);font-weight:500}.view-toggle-button[_ngcontent-%COMP%]:hover{cursor:pointer}.left-view-button[_ngcontent-%COMP%]{margin-left:3px}.right-view-button[_ngcontent-%COMP%]{margin-right:3px}.active-view[_ngcontent-%COMP%]{background-color:var(--crm-primary-color);pointer-events:none}.active-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--crm-white-color)}.current-date-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 auto 15px}.current-date-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.calendar-buttons-container[_ngcontent-%COMP%]{display:flex;align-items:center}.nav-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:25px}.nav-button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--crm-primary-color-light)}.prev-button[_ngcontent-%COMP%]{border-radius:12px 0 0 12px}.next-button[_ngcontent-%COMP%]{border-radius:0 12px 12px 0}.scrollable-visits-container[_ngcontent-%COMP%]{width:100%;overflow-y:auto}.expand-visits[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;height:170px;transition:.3s}.collapse-visits[_ngcontent-%COMP%]{transform:translateY(-20px);opacity:0;visibility:hidden;height:0;transition:.3s}.expanded-visits-container-arrow[_ngcontent-%COMP%]{transform:rotate(180deg);transition:.25s}.collapsed-visits-container-arrow[_ngcontent-%COMP%]{transform:rotate(0);transition:.25s}.new-visit-calendar-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;margin:0 auto 15px;border-radius:8px;background-color:#ecf2ff}.new-visit-calendar-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:var(--crm-font-family);color:var(--crm-primary-color);font-size:var(--crm-font-size-small);font-weight:500;margin:10px 0 0 10px}.new-visit-calendar-card[_ngcontent-%COMP%]:hover{cursor:pointer}.new-visit-date-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:10px;margin-bottom:10px}.new-visit-date-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 10px;font-family:var(--crm-font-family);color:var(--crm-primary-color);font-size:var(--crm-font-size-small);font-weight:500}.new-visit-notification-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:100%;width:22px;height:22px;background-color:var(--crm-primary-color);margin-right:10px}.new-visit-notification-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.disabled-expandable-visits-header[_ngcontent-%COMP%]{pointer-events:none}.pending-visits-calendar-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;margin:0 auto;border-bottom:1px solid var(--crm-grey-color-light)}.pending-visits-calendar-card[_ngcontent-%COMP%]:hover{cursor:pointer}.pending-visit-info-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin:15px 0}.pending-visit-info-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-black-color);font-size:var(--crm-font-size-small)}.pending-visit-icon[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:100%;background-color:#3a50e4;margin-right:5px;margin-left:5px}.evaluating-visit-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:100%;margin-right:5px;margin-left:5px;border:1.25px solid var(--crm-primary-color)}.evaluating-visit-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--crm-primary-color)}.pending-visit-time-container[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between;margin-bottom:15px}.pending-visit-time-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 20px;font-family:var(--crm-font-family);color:var(--crm-black-color);font-size:var(--crm-font-size-small)}.pending-visit-time-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:100%;margin-right:10px;border:1px solid var(--crm-font-color-light)}.evaluate-visit-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:90%;height:40px;border-radius:8px;background-color:var(--crm-primary-color);margin:0 auto 15px}.evaluate-visit-button[_ngcontent-%COMP%]:hover{cursor:pointer}.evaluate-visit-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:var(--crm-font-family);color:var(--crm-white-color);font-size:var(--crm-font-size-big)}.evaluating-visits-calendar-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;margin:0 auto;border-bottom:1px solid var(--crm-grey-color-light)}.custom-cell[_ngcontent-%COMP%]{padding:4px;height:100%;display:flex;flex-direction:column}.custom-week-cell[_ngcontent-%COMP%]{background-color:#fff;border-right:1.25px solid var(--crm-primary-color);border-left:1.25px solid var(--crm-primary-color)}.day-number[_ngcontent-%COMP%]{margin-bottom:4px}.event-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.new-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:95%;height:25px;margin:3px auto;background-color:#ecf2ff;border-radius:8px}.new-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 5px;font-family:var(--crm-font-family);color:var(--crm-primary-color);font-weight:500;font-size:10px}.new-visit-event-calendar-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;background-color:var(--crm-primary-color);border-radius:100%}.new-visit-event-calendar-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.completed-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;margin:3px 0}.completed-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-black-color);font-weight:500;font-size:10px}.completed-visit-event[_ngcontent-%COMP%]   .event-marker[_ngcontent-%COMP%]{display:flex;width:10px;height:10px;border-radius:100%;background-color:#00c751;margin-right:3px}.rejected-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;margin:3px 0}.rejected-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-black-color);font-weight:500;font-size:10px}.rejected-visit-event[_ngcontent-%COMP%]   .event-marker[_ngcontent-%COMP%]{display:flex;width:10px;height:10px;border-radius:100%;background-color:#f44336;margin-right:3px}.pending-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;margin:3px 0}.pending-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-black-color);font-weight:500;font-size:10px}.pending-visit-event[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--crm-font-color-light)}.pending-visit-event[_ngcontent-%COMP%]   .event-marker[_ngcontent-%COMP%]{display:flex;width:10px;height:10px;border-radius:100%;background-color:#3a50e4;margin-right:3px}.evaluating-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--crm-primary-background);border-radius:8px;height:25px;border:1px solid var(--crm-grey-color-light)}.evaluating-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-primary-color);font-weight:500;font-size:10px}.evaluate-visit-event-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:15px;height:15px;border-radius:100%;border:1px solid var(--crm-primary-color);margin-right:3px;margin-left:3px}.evaluate-visit-event-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--crm-primary-color)}']}),o})()}];let re=(()=>{var a;class o{}return(a=o).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[D.iI.forChild(ae),D.iI]}),o})();var oe=v(1163),ce=v(5641);let le=(()=>{var a;class o{}return(a=o).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[w.MD,V.YN,j.bv,re,C.rO.forRoot({provide:C.MJ,useFactory:oe.a}),ce.D,y.h]}),o})()}}]);