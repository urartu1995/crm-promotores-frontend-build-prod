"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[802],{9491:(w,M,g)=>{g.d(M,{j:()=>T});var v=g(177),F=g(9465),k=g(9417),A=g(4646),f=g(68),n=g(3953);let T=(()=>{var y;class j{}return(y=j).\u0275fac=function(R){return new(R||y)},y.\u0275mod=n.$C({type:y}),y.\u0275inj=n.G2t({imports:[v.MD,F.bv,k.YN,k.X1,A.X,f.k]}),j})()},802:(w,M,g)=>{g.r(M),g.d(M,{AgenciesListPageModule:()=>G});var v=g(177),F=g(9417),k=g(9465),A=g(5188),f=g(2465),n=g(3953);const T=[{path:"",component:f.F}];let y=(()=>{var p;class m{}return(p=m).\u0275fac=function(I){return new(I||p)},p.\u0275mod=n.$C({type:p}),p.\u0275inj=n.G2t({imports:[A.iI.forChild(T),A.iI]}),m})();var j=g(3955);let x=(()=>{var p;class m{}return(p=m).\u0275fac=function(I){return new(I||p)},p.\u0275mod=n.$C({type:p}),p.\u0275inj=n.G2t({imports:[v.MD,F.YN,F.X1,k.bv,j.h]}),m})();var R=g(5603),L=g(9491);let G=(()=>{var p;class m{}return(p=m).\u0275fac=function(I){return new(I||p)},p.\u0275mod=n.$C({type:p}),p.\u0275inj=n.G2t({imports:[v.MD,F.YN,k.bv,y,x,R.P,L.j,j.h]}),m})()},2465:(w,M,g)=>{g.d(M,{F:()=>Nn});var v=g(467),F=g(1413),k=g(7944),A=g(7376),f=g(9969),n=g(3953),T=g(5188),y=g(8397),j=g(4501),x=g(9465),R=g(2081),L=g(1213),G=g(5970),p=g(3955),m=g(177),P=g(6552);const I=(i,s)=>({"text-error":i,"text-green-600":s});function Z(i,s){if(1&i&&n.nrm(0,"span",26),2&i){let o;const t=n.XpG().$implicit,e=n.XpG(3);n.HbH(null==(o=e.utils.getLanguageInfo(t))?null:o.flagClass)}}function Q(i,s){if(1&i&&(n.qex(0),n.DNE(1,Z,1,2,"span",25),n.bVm()),2&i){const o=s.index;n.R7$(),n.Y8G("ngIf",o<3)}}function q(i,s){if(1&i&&(n.j41(0,"span",27),n.EFF(1),n.k0s()),2&i){const o=n.XpG(3);n.R7$(),n.SpI(" +",o.agency.languages.length-3," ")}}function nn(i,s){if(1&i&&(n.j41(0,"div",22),n.DNE(1,Q,2,1,"ng-container",23)(2,q,2,1,"span",24),n.k0s()),2&i){const o=n.XpG(2);n.R7$(),n.Y8G("ngForOf",o.agency.languages),n.R7$(),n.Y8G("ngIf",o.agency.languages.length>3)}}function tn(i,s){1&i&&(n.j41(0,"div",28),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"contacts.card.no_languages")," "))}function en(i,s){1&i&&(n.j41(0,"button",19),n.EFF(1),n.nI1(2,"translate"),n.nrm(3,"i",29),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"text.pending")," "))}function on(i,s){1&i&&(n.j41(0,"button",20),n.nrm(1,"i",30),n.EFF(2),n.nI1(3,"translate"),n.k0s()),2&i&&(n.R7$(2),n.SpI(" ",n.bMT(3,1,"text.collaborator")," "))}function an(i,s){if(1&i){const o=n.RV6();n.j41(0,"button",31),n.bIt("click",function(e){n.eBV(o);const a=n.XpG(2);return n.Njj(a.onInviteAgencyClick(e))}),n.nrm(1,"i",32),n.EFF(2),n.nI1(3,"translate"),n.k0s()}2&i&&(n.R7$(2),n.SpI(" ",n.bMT(3,1,"text.invite_agency")," "))}function ln(i,s){1&i&&(n.j41(0,"span",33),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"text.no_contract")," "))}function sn(i,s){if(1&i&&(n.j41(0,"span",34),n.EFF(1),n.k0s()),2&i){const o=n.XpG(3);n.Y8G("ngClass",n.l_i(2,I,null==o.agency?null:o.agency.activeDocumentInfo.expired,!(null!=o.agency&&o.agency.activeDocumentInfo.expired))),n.R7$(),n.SpI(" ",null==o.agency||null==o.agency.activeDocumentInfo?null:o.agency.activeDocumentInfo.dateStr," ")}}function cn(i,s){if(1&i&&n.DNE(0,ln,3,3,"span",33)(1,sn,2,5,"span",34),2&i){const o=n.XpG(2);n.vxM(o.agency.activeDocumentInfo?1:0)}}function rn(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",3),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.onNavigateToAgency())}),n.j41(1,"div",4),n.nrm(2,"img",5),n.j41(3,"div",6)(4,"div",7)(5,"span",8),n.EFF(6),n.k0s()(),n.j41(7,"div",9),n.EFF(8),n.k0s(),n.DNE(9,nn,3,2,"div",10)(10,tn,3,3,"ng-template",null,0,n.C5r),n.k0s()(),n.j41(12,"div",11),n.EFF(13),n.nI1(14,"translate"),n.k0s(),n.nrm(15,"div",12),n.j41(16,"div",13)(17,"div",14),n.nrm(18,"i",15),n.j41(19,"span"),n.EFF(20),n.nI1(21,"translate"),n.k0s()(),n.j41(22,"div",14),n.nrm(23,"i",16),n.j41(24,"span"),n.EFF(25),n.nI1(26,"translate"),n.k0s()(),n.j41(27,"div",14),n.nrm(28,"i",17),n.j41(29,"span"),n.EFF(30),n.nI1(31,"translate"),n.k0s()()(),n.j41(32,"div",18),n.DNE(33,en,4,3,"button",19)(34,on,4,3,"button",20)(35,an,4,3,"button",21)(36,cn,2,1),n.k0s()()}if(2&i){const o=n.sdS(11),t=n.XpG();n.R7$(2),n.FS9("alt",null==t.agency?null:t.agency.name),n.Y8G("src",(null==t.agency?null:t.agency.photoUrl)||"assets/images/building.png",n.B4B),n.R7$(4),n.JRh(null==t.agency?null:t.agency.name),n.R7$(2),n.Lme(" ",(null==t.agency?null:t.agency.city)||"Valencia"," / ",(null==t.agency?null:t.agency.country)||"Spain"," "),n.R7$(),n.Y8G("ngIf",(null==t.agency||null==t.agency.languages?null:t.agency.languages.length)>0)("ngIfElse",o),n.R7$(4),n.E5c(" ",n.bMT(14,17,"contacts.card.shared_promotions"),": ",(null==t.agency||null==t.agency.promotions?null:t.agency.promotions.length)||0," / ",t.promoterPromotions||0," "),n.R7$(7),n.Lme("",n.bMT(21,19,"text.offices"),": ",(null==t.agency||null==t.agency.agencyOffices?null:t.agency.agencyOffices.length)||0,""),n.R7$(5),n.Lme("",n.bMT(26,21,"text.agents"),": ",(null==t.agency||null==t.agency._count?null:t.agency._count.users)||0,""),n.R7$(5),n.JRh(n.bMT(31,23,"text.operations")),n.R7$(3),n.vxM("pending"===(null==t.options?null:t.options.invitationStatus)?33:"collaborator"===(null==t.options?null:t.options.invitationStatus)?34:35),n.R7$(3),n.vxM("promotionAgencies"===t.options.type&&"collaborator"===(null==t.options?null:t.options.invitationStatus)?36:-1)}}function gn(i,s){1&i&&(n.j41(0,"div",2)(1,"div",4),n.nrm(2,"div",35),n.j41(3,"div",6),n.nrm(4,"div",36)(5,"div",37)(6,"div",38),n.k0s()(),n.nrm(7,"div",39)(8,"div",40),n.j41(9,"div",13),n.nrm(10,"div",41)(11,"div",41)(12,"div",41),n.k0s(),n.nrm(13,"div",42),n.k0s())}let dn=(()=>{var i;class s{constructor(t,e){this.router=t,this.utils=e,this.promoterPromotions=0,this.inviteAgencyClick=new n.bkB}ngOnInit(){console.log(this.options)}onInviteAgencyClick(t){t.stopPropagation(),t.preventDefault(),this.inviteAgencyClick.emit({agency:this.agency,options:this.options})}onNavigateToAgency(){this.router.navigate([`/agencies/${this.agency.id}`])}}return(i=s).\u0275fac=function(t){return new(t||i)(n.rXU(T.Ix),n.rXU(P.T))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-card-agency"]],inputs:{agency:"agency",isSkeleton:"isSkeleton",options:"options",promoterPromotions:"promoterPromotions"},outputs:{inviteAgencyClick:"inviteAgencyClick"},decls:2,vars:1,consts:[["noLangs",""],[1,"collaboration-card"],[1,"collaboration-card","collaboration-card--skeleton"],[1,"collaboration-card",3,"click"],[1,"collaboration-card__header"],[1,"collaboration-card__logo",3,"src","alt"],[1,"collaboration-card__info"],[1,"collaboration-card__top-row"],[1,"collaboration-card__name"],[1,"collaboration-card__location"],["class","collaboration-card__languages",4,"ngIf","ngIfElse"],[1,"collaboration-card__shared"],[1,"collaboration-card__divider"],[1,"collaboration-card__meta"],[1,"collaboration-card__meta-item"],[1,"fas","fa-building"],[1,"fas","fa-user"],[1,"fas","fa-chart-line"],[1,"collaboration-card__footer",2,"margin-top","8px"],[1,"collaboration-card__button","collaboration-card__button--pending"],[1,"collaboration-card__button","collaboration-card__button--collaborator"],[1,"crm-button",2,"width","100%","justify-content","center"],[1,"collaboration-card__languages"],[4,"ngFor","ngForOf"],["class","collaboration-card__flag-plus",4,"ngIf"],["class","collaboration-card__flag",3,"class",4,"ngIf"],[1,"collaboration-card__flag"],[1,"collaboration-card__flag-plus"],[1,"collaboration-card__languages-empty"],[1,"fas","fa-clock"],[1,"fas","fa-check-circle"],[1,"crm-button",2,"width","100%","justify-content","center",3,"click"],[1,"fas","fa-add"],[1,"text-[12px]","text-error"],[1,"ml-10","text-[12px]",3,"ngClass"],[1,"collaboration-card__logo","skeleton-block"],[1,"collaboration-card__top-row","skeleton-block"],[1,"collaboration-card__location","skeleton-block"],[1,"collaboration-card__languages","skeleton-block"],[1,"collaboration-card__shared","skeleton-block"],[1,"collaboration-card__divider","skeleton-block"],[1,"collaboration-card__meta-item","skeleton-block"],[1,"collaboration-card__footer","skeleton-block"]],template:function(t,e){1&t&&n.DNE(0,rn,37,25,"div",1)(1,gn,14,0,"div",2),2&t&&n.vxM(e.isSkeleton?1:0)},dependencies:[m.YU,m.Sq,m.bT,p.D9],styles:[".collaboration-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #eaeaea;border-radius:12px;padding:16px;width:340px;box-sizing:border-box;display:flex;flex-direction:column;cursor:pointer;position:relative}.collaboration-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.collaboration-card__logo[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;object-fit:cover;flex-shrink:0}.collaboration-card__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.collaboration-card__top-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.collaboration-card__name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px;color:#111}.collaboration-card__verified[_ngcontent-%COMP%]{font-size:14px;color:#1890ff;display:inline-flex;align-items:center}.collaboration-card__location[_ngcontent-%COMP%]{font-size:14px;color:#888}.collaboration-card__languages[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.collaboration-card__languages[_ngcontent-%COMP%]   .collaboration-card__flag[_ngcontent-%COMP%]{width:20px;height:14px;border-radius:2px;background-size:cover;background-position:center}.collaboration-card__languages[_ngcontent-%COMP%]   .collaboration-card__flag-plus[_ngcontent-%COMP%]{font-size:13px;color:#666}.collaboration-card__languages-empty[_ngcontent-%COMP%]{font-size:13px;color:#999}.collaboration-card__shared[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#333;font-weight:500}.collaboration-card__divider[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#eaeaea;border:none;margin:12px 0}.collaboration-card__meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:12px}.collaboration-card__meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#666}.collaboration-card__meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}.collaboration-card__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;gap:8px;margin-top:auto}.collaboration-card__chip[_ngcontent-%COMP%]{font-size:13px;padding:4px 8px;border-radius:6px;display:inline-flex;align-items:center;gap:4px}.collaboration-card__chip--warning[_ngcontent-%COMP%]{background-color:#fff8e6;color:#e69900;border:1px solid #ffe5b4}.collaboration-card__button[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px;outline:none;cursor:pointer;display:inline-flex;align-items:center;gap:8px;border:1px solid transparent;border-radius:20px}.collaboration-card__button--collaborator[_ngcontent-%COMP%]{background-color:#e5f9ee;color:#00c751}.collaboration-card__button--pending[_ngcontent-%COMP%]{background-color:#fbf4ec;color:#e49d3a}.collaboration-card__button--invite[_ngcontent-%COMP%]{background-color:#1890ff;color:#fff}.collaboration-card--skeleton[_ngcontent-%COMP%]{pointer-events:none}.collaboration-card--skeleton[_ngcontent-%COMP%]   .skeleton-block[_ngcontent-%COMP%]{background-color:#eee;border-radius:4px;width:100%;height:16px}.collaboration-card--skeleton__logo.skeleton-block[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%}.collaboration-card--skeleton__divider.skeleton-block[_ngcontent-%COMP%]{height:1px;margin:12px 0}.collaboration-card--skeleton__footer.skeleton-block[_ngcontent-%COMP%]{height:24px;width:100px}"]}),s})();var pn=g(6580),D=g(9417);const un=["provinceInput"],mn=["cityInput"],$=()=>({standalone:!0}),_n=i=>({"crm-item-tag-active":i});function fn(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",31)(1,"div",32)(2,"div",33),n.nrm(3,"span"),n.k0s(),n.j41(4,"div",34),n.EFF(5),n.k0s()(),n.j41(6,"div",35),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG();return n.Njj(a.onRemoveLanguage(e))}),n.nrm(7,"i",36),n.k0s()()}if(2&i){let o,t;const e=s.$implicit,a=n.XpG();n.R7$(3),n.HbH(null==(o=a.utils.getLanguageInfo(e))?null:o.flagClass),n.R7$(2),n.SpI(" ",null==(t=a.utils.getLanguageInfo(e))?null:t.name," ")}}function vn(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",25)(1,"ion-checkbox",37),n.bIt("ionChange",function(e){const a=n.eBV(o).$implicit,l=n.XpG();return n.Njj(l.onCheckboxChange(a.value,e,"offices"))}),n.k0s(),n.j41(2,"div",27),n.EFF(3),n.k0s()()}if(2&i){const o=s.$implicit,t=n.XpG();n.R7$(),n.Y8G("value",o.value)("checked",t.filterData.offices.includes(o.value)),n.R7$(2),n.JRh(o.label)}}function hn(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",25)(1,"ion-checkbox",37),n.bIt("ionChange",function(e){const a=n.eBV(o).$implicit,l=n.XpG();return n.Njj(l.onCheckboxChange(a.value,e,"agentsCount"))}),n.k0s(),n.j41(2,"div",27),n.EFF(3),n.k0s()()}if(2&i){const o=s.$implicit,t=n.XpG();n.R7$(),n.Y8G("value",o.value)("checked",t.filterData.agentsCount.includes(o.value)),n.R7$(2),n.JRh(o.label)}}function yn(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",25)(1,"ion-checkbox",37),n.bIt("ionChange",function(e){const a=n.eBV(o).$implicit,l=n.XpG();return n.Njj(l.onCheckboxChange(a.value,e,"annualSales"))}),n.k0s(),n.j41(2,"div",27),n.EFF(3),n.k0s()()}if(2&i){const o=s.$implicit,t=n.XpG();n.R7$(),n.Y8G("value",o.value)("checked",t.filterData.annualSales.includes(o.value)),n.R7$(2),n.JRh(o.label)}}function bn(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",38),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG();return n.Njj(a.onTogglePromotion(e))}),n.EFF(1),n.k0s()}if(2&i){const o=s.$implicit,t=n.XpG();n.Y8G("ngClass",n.eq3(2,_n,t.filterData.sharedPromotionsIds.includes(o.id))),n.R7$(),n.SpI(" ",o.projectName," ")}}let Cn=(()=>{var i;class s{constructor(t,e,a,l){this.ngZone=t,this.popoverService=e,this.utils=a,this.api=l,this.onFilter=new n.bkB,this.filterData={country:"Espa\xf1a",province:"",city:"",languages:[],offices:[],agentsCount:[],annualSales:[],hasOperations:!1,hasVisits:!1,sharedPromotionsIds:[]},this.officeOptions=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4 o m\xe1s"}],this.commercialOptions=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4 o m\xe1s"}],this.annualSalesOptions=[{value:2e5,label:"200 k"},{value:4e5,label:"400 k"},{value:6e5,label:"600 k"},{value:1e6,label:"1 M o m\xe1s"}],this.sort=null,this.pagination={page:0,itemsPerPage:25},this.promotions=[]}ngOnInit(){}ngAfterViewInit(){this.getPromotions(),this.provinceAutocomplete=new google.maps.places.Autocomplete(this.provinceInput.nativeElement,{types:["(regions)"],componentRestrictions:{country:"es"},fields:["address_component","geometry"]}),this.provinceAutocomplete.addListener("place_changed",()=>{this.ngZone.run(()=>{var t,e;const a=this.provinceAutocomplete.getPlace(),l=null===(t=a.address_components)||void 0===t?void 0:t.find(c=>c.types.includes("administrative_area_level_2"));l&&(this.filterData.province=l.long_name,this.provinceInput.nativeElement.value=l.long_name),null!==(e=a.geometry)&&void 0!==e&&e.viewport&&this.cityAutocomplete.setBounds(a.geometry.viewport)})}),this.cityAutocomplete=new google.maps.places.Autocomplete(this.cityInput.nativeElement,{types:["locality"],componentRestrictions:{country:"es"},fields:["address_component"]}),this.cityAutocomplete.addListener("place_changed",()=>{this.ngZone.run(()=>{var t;const a=null===(t=this.cityAutocomplete.getPlace().address_components)||void 0===t?void 0:t.find(l=>l.types.includes("locality"));a&&(this.filterData.city=a.long_name,this.cityInput.nativeElement.value=a.long_name)})})}getPromotions(){var t=this;return(0,v.A)(function*(){const e=yield t.api.getPromotions({},t.sort,t.pagination,null);t.promotions=e.success.data||[]})()}onAddLanguage(t){this.popoverService.onShowCountrySelectorPopover(t,{languageSelector:!0,showCountryCode:!1,selectedCodes:this.filterData.languages}).then(a=>{var l;null!=a&&null!==(l=a.data)&&void 0!==l&&l.country&&this.filterData.languages.push(a.data.country.code)})}onRemoveLanguage(t){this.filterData.languages=this.filterData.languages.filter(e=>e!==t)}onCheckboxChange(t,e,a){const l=this.filterData[a],c={offices:this.officeOptions,agentsCount:this.commercialOptions,annualSales:this.annualSalesOptions}[a].map(r=>r.value);if(e.detail.checked)c.filter(r=>r>=t).forEach(r=>{l.includes(r)||l.push(r)});else{const r=l.indexOf(t);r>-1&&l.splice(r,1)}}onTogglePromotion(t){const e=this.filterData.sharedPromotionsIds,a=e.indexOf(t.id);a>-1?e.splice(a,1):e.push(t.id)}onClickFilter(){const t={},e=[];if(this.filterData.province&&(t.province={equals:this.filterData.province}),this.filterData.city&&(t.city={equals:this.filterData.city}),this.filterData.languages.length&&(t.languages={hasSome:this.filterData.languages}),this.filterData.offices.length){const c=this.officeOptions.map(u=>u.value),r=this.buildNumConditions(this.filterData.offices,c);1===r.length?t.officesCount=r[0]:e.push(...r.map(u=>({officesCount:u})))}if(this.filterData.agentsCount.length){const c=this.commercialOptions.map(u=>u.value),r=this.buildNumConditions(this.filterData.agentsCount,c);1===r.length?t.agentsCount=r[0]:e.push(...r.map(u=>({agentsCount:u})))}if(this.filterData.annualSales.length){const c=this.annualSalesOptions.map(u=>u.value),r=this.buildNumConditions(this.filterData.annualSales,c);1===r.length?t.annualSales=r[0]:e.push(...r.map(u=>({annualSales:u})))}e.length&&(t.OR=e),this.filterData.hasOperations&&(t.hasOperations=!0),this.filterData.hasVisits&&(t.hasVisits=!0),console.log("sharedPromotionsIds",this.filterData.sharedPromotionsIds);const l={};this.filterData.sharedPromotionsIds.length&&(l.promotions={apply:!0,filter:{id:{in:this.filterData.sharedPromotionsIds}},onlyCount:!1}),this.filterData.hasVisits&&(l.visits={apply:!0,filter:{},onlyCount:!1}),console.log(this.filterData),console.log(t),console.log("join",l),this.onFilter.emit({filter:t,joinTables:l})}onResetFilters(){this.filterData={country:"Espa\xf1a",province:"",city:"",languages:[],offices:[],agentsCount:[],annualSales:[],hasOperations:!1,hasVisits:!1,sharedPromotionsIds:[]},this.provinceInput.nativeElement.value="",this.cityInput.nativeElement.value="",this.cityAutocomplete.setBounds(void 0),this.onFilter.emit({filter:{},joinTables:{}})}buildNumConditions(t,e){const a=e[e.length-1],c=t.filter(r=>r!==a).map(r=>({equals:r}));return t.includes(a)&&c.push({gte:a}),c}}return(i=s).\u0275fac=function(t){return new(t||i)(n.rXU(n.SKi),n.rXU(G.m),n.rXU(P.T),n.rXU(R.i))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-agencies-filter-block"]],viewQuery:function(t,e){if(1&t&&(n.GBs(un,5),n.GBs(mn,5)),2&t){let a;n.mGM(a=n.lsd())&&(e.provinceInput=a.first),n.mGM(a=n.lsd())&&(e.cityInput=a.first)}},outputs:{onFilter:"onFilter"},decls:73,vars:17,consts:[["provinceInput",""],["cityInput",""],[2,"position","relative","background","white"],["autocomplete","off","novalidate",""],["type","text","autocomplete","username",2,"display","none"],["type","password","autocomplete","new-password",2,"display","none"],[1,"crm-header-modal","crm-header-modal-fixed-top"],[1,"crm-modal-header-title"],[1,"crm-buttons-group"],["type","button",1,"crm-button",3,"click"],["type","button",1,"crm-button-secondary","crm-button-secondary-red",3,"click"],[1,"crm-block-inputs","crm-block-filters-inputs"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input"],["type","text","placeholder","Seleccione provincia","name","province","autocomplete","off","autocorrect","off","spellcheck","false",3,"ngModelChange","ngModel","ngModelOptions"],["type","text","placeholder","Seleccione ciudad","name","city","autocomplete","off","autocorrect","off","spellcheck","false",3,"ngModelChange","ngModel","ngModelOptions"],[1,"crm-input","crm-input-medium"],[1,"crm-section-items"],["class","crm-item-option crm-item-option-lang edit",4,"ngFor","ngForOf"],["type","button",1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"fas","fa-add"],[1,"crm-input-checkboxes",2,"grid-template-columns","1fr"],["class","crm-input-checkbox",4,"ngFor","ngForOf"],[1,"crm-input-checkboxes"],[1,"crm-input-checkbox"],["name","hasOperations",3,"ngModelChange","ngModel","ngModelOptions"],[1,"crm-input-checkbox-label"],["name","hasVisits",3,"ngModelChange","ngModel","ngModelOptions"],[1,"crm-section-tags"],["class","crm-item-tag",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"crm-item-option","crm-item-option-lang","edit"],[1,"crm-item-option-left"],[1,"crm-item-option-flag"],[1,"crm-item-option-label"],[1,"crm-item-option-remove",3,"click"],[1,"fas","fa-trash"],[3,"ionChange","value","checked"],[1,"crm-item-tag",3,"click","ngClass"]],template:function(t,e){if(1&t){const a=n.RV6();n.j41(0,"div",2)(1,"form",3),n.nrm(2,"input",4)(3,"input",5),n.j41(4,"div",6)(5,"div",7),n.EFF(6,"Filtrar"),n.k0s(),n.j41(7,"div",8)(8,"button",9),n.bIt("click",function(){return n.eBV(a),n.Njj(e.onClickFilter())}),n.EFF(9,"Filtrar"),n.k0s(),n.j41(10,"button",10),n.bIt("click",function(){return n.eBV(a),n.Njj(e.onResetFilters())}),n.EFF(11,"Reiniciar"),n.k0s()()(),n.j41(12,"div",11)(13,"div",12)(14,"div",13),n.EFF(15,"Provincia"),n.k0s(),n.j41(16,"div",14)(17,"input",15,0),n.mxI("ngModelChange",function(c){return n.eBV(a),n.DH7(e.filterData.province,c)||(e.filterData.province=c),n.Njj(c)}),n.k0s()()(),n.j41(19,"div",12)(20,"div",13),n.EFF(21,"Ciudad"),n.k0s(),n.j41(22,"div",14)(23,"input",16,1),n.mxI("ngModelChange",function(c){return n.eBV(a),n.DH7(e.filterData.city,c)||(e.filterData.city=c),n.Njj(c)}),n.k0s()()(),n.j41(25,"div",17)(26,"div",13),n.EFF(27,"Idiomas"),n.k0s(),n.j41(28,"div",18),n.DNE(29,fn,8,3,"div",19),n.j41(30,"button",20),n.bIt("click",function(c){return n.eBV(a),n.Njj(e.onAddLanguage(c))}),n.nrm(31,"i",21),n.EFF(32," A\xf1adir idioma "),n.k0s()()(),n.j41(33,"div",12)(34,"div",13),n.EFF(35,"Oficinas"),n.k0s(),n.j41(36,"div",22),n.DNE(37,vn,4,3,"div",23),n.k0s()(),n.j41(38,"div",12)(39,"div",13),n.EFF(40,"Comerciales"),n.k0s(),n.j41(41,"div",22),n.DNE(42,hn,4,3,"div",23),n.k0s()(),n.j41(43,"div",12)(44,"div",13),n.EFF(45,"Facturaci\xf3n anual"),n.k0s(),n.j41(46,"div",22),n.DNE(47,yn,4,3,"div",23),n.k0s()(),n.j41(48,"div",12)(49,"div",13),n.EFF(50,"Agencias con operaciones"),n.k0s(),n.j41(51,"div",24)(52,"div",25)(53,"ion-checkbox",26),n.mxI("ngModelChange",function(c){return n.eBV(a),n.DH7(e.filterData.hasOperations,c)||(e.filterData.hasOperations=c),n.Njj(c)}),n.k0s(),n.j41(54,"div",27),n.EFF(55,"S\xed"),n.k0s()()()(),n.j41(56,"div",12)(57,"div",13),n.EFF(58,"Agencias con visitas"),n.k0s(),n.j41(59,"div",24)(60,"div",25)(61,"ion-checkbox",28),n.mxI("ngModelChange",function(c){return n.eBV(a),n.DH7(e.filterData.hasVisits,c)||(e.filterData.hasVisits=c),n.Njj(c)}),n.k0s(),n.j41(62,"div",27),n.EFF(63,"S\xed"),n.k0s()()()(),n.j41(64,"div",12)(65,"div",13),n.EFF(66,"Promociones compartidas"),n.k0s(),n.j41(67,"div",29),n.DNE(68,bn,2,4,"div",30),n.k0s()(),n.nrm(69,"br")(70,"br")(71,"br")(72,"br"),n.k0s()()()}2&t&&(n.R7$(17),n.R50("ngModel",e.filterData.province),n.Y8G("ngModelOptions",n.lJ4(13,$)),n.R7$(6),n.R50("ngModel",e.filterData.city),n.Y8G("ngModelOptions",n.lJ4(14,$)),n.R7$(6),n.Y8G("ngForOf",e.filterData.languages),n.R7$(8),n.Y8G("ngForOf",e.officeOptions),n.R7$(5),n.Y8G("ngForOf",e.commercialOptions),n.R7$(5),n.Y8G("ngForOf",e.annualSalesOptions),n.R7$(6),n.R50("ngModel",e.filterData.hasOperations),n.Y8G("ngModelOptions",n.lJ4(15,$)),n.R7$(8),n.R50("ngModel",e.filterData.hasVisits),n.Y8G("ngModelOptions",n.lJ4(16,$)),n.R7$(7),n.Y8G("ngForOf",e.promotions))},dependencies:[m.YU,m.Sq,D.qT,D.me,D.BC,D.cb,D.vS,D.cV,x.eY,x.hB]}),s})();const kn=i=>({"crm-block-body-fixed":i}),xn=i=>({"crm-button-secondary-primary":i}),J=(i,s,o,t,e)=>({pageStartIndex:i,pageEndIndex:s,totalCount:o,paginationPage:t,sortField:e}),Pn=i=>({active:i}),Fn=(i,s)=>({"background-color":i,border:s});function An(i,s){if(1&i){const o=n.RV6();n.j41(0,"button",17),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.onInviteAgencies())}),n.nrm(1,"i",18),n.EFF(2),n.nI1(3,"translate"),n.k0s()}2&i&&(n.R7$(2),n.SpI(" ",n.bMT(3,1,"text.invite_agency")," "))}function jn(i,s){1&i&&(n.nrm(0,"i",19),n.EFF(1),n.nI1(2,"translate")),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"contacts.list.close_filters")," "))}function In(i,s){1&i&&(n.nrm(0,"i",20),n.EFF(1),n.nI1(2,"translate")),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"contacts.list.active_filters")," "))}function Mn(i,s){1&i&&(n.nrm(0,"i",20),n.EFF(1),n.nI1(2,"translate")),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"contacts.list.filter")," "))}function Tn(i,s){if(1&i&&n.DNE(0,In,3,3)(1,Mn,3,3),2&i){const o=n.XpG();n.vxM(o.filters?0:1)}}function Rn(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",12)(1,"app-list-pagination-selectors",21),n.bIt("goPreviousPage",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.onGoPreviousPage())})("goNextPage",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.onGoNextPage())})("sort",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.onSort(e))}),n.k0s()()}if(2&i){const o=n.XpG();n.R7$(),n.Y8G("listPaginationConfig",n.s1E(1,J,o.updatePagination().startIndex,o.updatePagination().endIndex,o.allSystemAgenciesCount,o.pagination.page+1,null!=o.sort&&o.sort.field?(null==o.sort?null:o.sort.field)+" "+(null==o.sort?null:o.sort.order):"Fecha de creaci\xf3n"))}}function Dn(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",13)(1,"app-list-pagination-selectors",21),n.bIt("goPreviousPage",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.onGoPreviousPage())})("goNextPage",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.onGoNextPage())})("sort",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.onSort(e))}),n.k0s()()}if(2&i){const o=n.XpG();n.R7$(),n.Y8G("listPaginationConfig",n.s1E(1,J,o.updatePagination().startIndex,o.updatePagination().endIndex,o.allSystemAgenciesCount,o.pagination.page+1,null!=o.sort&&o.sort.field?(null==o.sort?null:o.sort.field)+" "+(null==o.sort?null:o.sort.order):"Fecha de creaci\xf3n"))}}function On(i,s){1&i&&(n.j41(0,"div",15),n.nrm(1,"app-card-agency",22)(2,"app-card-agency",22)(3,"app-card-agency",22),n.k0s()),2&i&&(n.R7$(),n.Y8G("isSkeleton",!0),n.R7$(),n.Y8G("isSkeleton",!0),n.R7$(),n.Y8G("isSkeleton",!0))}function Sn(i,s){if(1&i&&n.EFF(0),2&i){const o=n.XpG().$implicit;n.SpI(" (",null==o?null:o.count,") ")}}function En(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",26),n.bIt("click",function(){const e=n.eBV(o).$implicit,a=n.XpG(2);return n.Njj(a.onClickAgencyRelation(e))}),n.j41(1,"div",27),n.EFF(2),n.DNE(3,Sn,1,1),n.nrm(4,"div",28),n.k0s()()}if(2&i){const o=s.$implicit;n.Y8G("ngClass",n.eq3(4,Pn,null==o?null:o.isSelected)),n.R7$(2),n.SpI(" ",null==o?null:o.title," "),n.R7$(),n.vxM(null!==(null==o?null:o.count)?3:-1),n.R7$(),n.Y8G("ngStyle",n.l_i(6,Fn,null==o?null:o.color,"1px solid "+(null==o?null:o.color)))}}function Gn(i,s){if(1&i){const o=n.RV6();n.j41(0,"app-card-agency",29),n.bIt("inviteAgencyClick",function(e){n.eBV(o);const a=n.XpG(2);return n.Njj(a.onInviteAgencyClick(e))}),n.k0s()}if(2&i){const o=s.$implicit,t=n.XpG(2);n.Y8G("promoterPromotions",t.promoterPromotions)("agency",o)("options",o.agencyCardOptions)}}function $n(i,s){if(1&i&&(n.j41(0,"div",23),n.Z7z(1,En,5,9,"div",24,n.fX1),n.k0s(),n.j41(3,"div",15),n.Z7z(4,Gn,1,3,"app-card-agency",25,n.fX1),n.k0s()),2&i){const o=n.XpG();n.R7$(),n.Dyx(o.agencyRelations),n.R7$(3),n.Dyx(o.agencies)}}function Ln(i,s){if(1&i){const o=n.RV6();n.j41(0,"div",16)(1,"app-agencies-filter-block",30),n.bIt("onFilter",function(e){n.eBV(o);const a=n.XpG();return n.Njj(a.onFilter(e))}),n.k0s()()}2&i&&n.Y8G("@biggerFadeSlideIn",void 0)}let Nn=(()=>{var i;class s{constructor(t,e,a,l,c,r,u,b){this.router=t,this.toastService=e,this.headerService=a,this.modalCtrl=l,this.api=c,this.state=r,this.popoversService=u,this.translate=b,this.promotion=null,this.agenciesAlreadyLinked=[],this.agenciesNotLinked=[],this.agencies=[],this.allSystemAgenciesCount=0,this.searchString="",this.searchSubject=new F.B,this.agencyCardOptions={type:"globalAgencies"},this.aside={type:"filters",visible:!0},this.agencyRelations=[{id:"agencias-colaboradoras",title:"Agencias colaboradoras",subtitle:"",color:"#4CAF50",isSelected:!0,count:0},{id:"agencias-no-colaboradoras",title:"Agencias no colaboradoras",subtitle:"",color:"#FF9800",isSelected:null,count:null}],this.filters=null,this.sort=null,this.pagination={page:0,itemsPerPage:25},this.agencyPrismaFilter={},this.agencyJoinTables={},this.promoterPromotions=0,this.loadingList=!1}ngOnInit(){this.getState(),this.getData()}ionViewWillEnter(){this.promotion?this.agencyCardOptions.type="promotionAgencies":this.headerService.setConfig({title:"agencies"})}getState(){this.state.getState().subscribe(t=>{this.currentUser=t.user,this.currentPromoter=t.promoter})}onInviteAgencies(){var t=this;return(0,v.A)(function*(){yield(yield t.modalCtrl.create({component:k.v,cssClass:"modal-invite-agency"})).present()})()}onSearchInputChange(t){var e=this;let a=t.target.value;this.agencyPrismaFilter={},clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((0,v.A)(function*(){e.agencyPrismaFilter.OR=[{email:{contains:a}},{email1:{contains:a}},{email2:{contains:a}},{email3:{contains:a}},{email4:{contains:a}},{email5:{contains:a}},{nifCif:{contains:a}},{phone1:{contains:a}},{phone2:{contains:a}},{phone3:{contains:a}},{phone4:{contains:a}},{phone5:{contains:a}},{legalName:{contains:a}},{name:{contains:a}}],console.log(e.agencyPrismaFilter),e.getData()}),1e3)}onSearchChanged(t){this.searchString=t}onToggleAside(){this.aside.visible=!this.aside.visible}onFilter(t){Object.keys((null==t?void 0:t.filter)||{}).length||(this.searchString=null),this.agencyPrismaFilter=t.filter,this.agencyJoinTables=t.joinTables,this.pagination.page=0,this.getData()}onGoNextPage(){(this.pagination.page+1)*this.pagination.itemsPerPage<this.allSystemAgenciesCount&&(this.pagination.page++,this.getData())}onGoPreviousPage(){this.pagination.page>0&&(this.pagination.page--,this.getData())}onInviteAgencyClick(t){var e=this;return(0,v.A)(function*(){const{agency:a,options:l}=t;if("globalAgencies"===l.type)yield(yield e.modalCtrl.create({component:k.v,cssClass:"modal-invite-agency",componentProps:{agencyCardOpen:a}})).present();else if("promotionAgencies"===l.type){const c=l.promotion;let r={status:"pending",type:"register",agencyEmail:a.email,agencyId:a.id};const b=(yield e.api.createAgencyInvitationToPromotions(r)).success.data,O=[c.id],C=yield e.api.addPromotionsToAgencyInvitationToPromotions(O,b.id);if(C.error)return void e.toastService.showErrorToast(e.translate.instant("text.invite_agency_error")+C.error.errorMessage);e.toastService.showSuccessToast(e.translate.instant("text.invite_agency_success")),e.getData()}})()}onClickAgencyRelation(t){this.agencyRelations.forEach(e=>{e.isSelected=e.id===t.id}),this.getData()}updatePagination(){return{startIndex:this.pagination.page*this.pagination.itemsPerPage+1,endIndex:Math.min((this.pagination.page+1)*this.pagination.itemsPerPage,this.allSystemAgenciesCount)}}getData(){var t=this;return(0,v.A)(function*(){var e,a,l,c,r,u;let b,O;t.loadingList=!0,t.currentPromoter||(yield new Promise(d=>{setTimeout(d,100)}),t.getData()),t.promotion&&(t.agencyCardOptions.type="promotionAgencies"),console.log(3244324324,t.agencyRelations,"this.agencyRelations");const C=t.agencyRelations.find(d=>"agencias-colaboradoras"===d.id).isSelected,S=t.agencyRelations.find(d=>"agencias-no-colaboradoras"===d.id).isSelected;if(console.log(88888888,C),console.log(999999999,S),!0===C||null===C&&null===S||!1===C&&!1===S){var N;let d={promoters:{apply:!0,filter:{id:{equals:null===(N=t.currentPromoter)||void 0===N?void 0:N.id}},onlyCount:!1}};var B;if(d=t.promotion?{...d,promotions:{apply:!0,filter:{id:{equals:t.promotion.id}},onlyCount:!1}}:{...d,...t.agencyJoinTables},d={...d,users:{apply:!0,filter:{},onlyCount:!0},...t.agencyJoinTables.promotions?{promotions:t.agencyJoinTables.promotions}:{promotions:{apply:!0}}},b=yield t.api.getAgency(t.agencyPrismaFilter,t.sort,t.pagination,d),b.error)return t.toastService.showToast({text:t.translate.instant("text.load_agencies_error")+(null===(B=b.error)||void 0===B?void 0:B.errorMessage),theme:"red",icon:"fas fa-exclamation-triangle",time:1e4}),void(t.loadingList=!1);t.agencyRelations.map(h=>{var _;"agencias-colaboradoras"===h.id&&(h.count=null===(_=b)||void 0===_||null===(_=_.success)||void 0===_?void 0:_.metadata)})}if(!0===S||null===C&&null===S||!1===C&&!1===S){let d={};var V;d=t.promotion?{promotions:{apply:!0,filter:{id:{equals:t.promotion.id}},onlyCount:!1,negativeFiler:!0},agencyInvitationToPromotions:{apply:!0,mode:"include",filter:{status:{equals:"pending"}},onlyCount:!1}}:{promoters:{apply:!0,filter:{id:{equals:null===(V=t.currentPromoter)||void 0===V?void 0:V.id}},onlyCount:!1,negativeFiler:!0}},d={...d,users:{apply:!0,filter:{},onlyCount:!0}},O=yield t.api.getAgency(t.agencyPrismaFilter,t.sort,t.pagination,d)}let X=(null===(e=b)||void 0===e||null===(e=e.success)||void 0===e?void 0:e.data)||[];X=X.map(d=>(d.isLinked=!0,d.agencyCardOptions=A.cloneDeep(t.agencyCardOptions),t.promotion&&(d.agencyCardOptions.promotion=t.promotion,d.agencyCardOptions.invitationStatus="collaborator"),d));let z=(null===(a=O)||void 0===a||null===(a=a.success)||void 0===a?void 0:a.data)||[];if(z=z.map(d=>{if(d.agencyCardOptions=A.cloneDeep(t.agencyCardOptions),t.promotion){d.agencyCardOptions.promotion=t.promotion;for(const h of d.agencyInvitationToPromotions)h.promotions.find(_=>_.id===t.promotion.id)&&"pending"===h.status&&(d.agencyCardOptions.invitationStatus="pending")}return d}),t.agencies=X.concat((null===(l=O)||void 0===l||null===(l=l.success)||void 0===l?void 0:l.data)||[]),"promoter"===t.currentUser.accountType&&t.agencies.length){const h=t.agencies.map(_=>{var Y;let K=null;if(null!==(Y=_.documents)&&void 0!==Y&&Y.length){const Xn=new Date(_.documents[_.documents.length-1].toDate),Yn=new Date,Un=Xn.getTime()-Yn.getTime(),E=Math.floor(Un/864e5);if(E<60){let U="";E<0?U="Expirado":E<=60&&(U=t.translate.instant("text.expires_in_days",{days:E})),K={dateStr:U,expired:E<0}}}return{..._,activeDocumentInfo:K}});t.agencies=h}t.allSystemAgenciesCount=((null===(c=b)||void 0===c||null===(c=c.success)||void 0===c||null===(c=c.metadata)||void 0===c?void 0:c.count)||0)+((null===(r=O)||void 0===r||null===(r=r.success)||void 0===r||null===(r=r.metadata)||void 0===r?void 0:r.count)||0),t.pagination.page=0,t.updatePagination(),t.loadingList=!1;const W=yield t.api.getPromotions({},null,{page:0,itemsPerPage:1e3},null);console.log("ELL RESULT DE OTTES LES PROMOCIONS",W),t.promoterPromotions=W.success.data.length,t.promotion&&(t.agencyJoinTables.promotions={apply:!0,filter:{id:{equals:t.promotion.id}},onlyCount:!1});let Bn={promoters:{apply:!0,filter:{id:{equals:t.currentPromoter.id}},onlyCount:!1},promotions:{apply:!0},...t.agencyJoinTables};const H=(null===(u=yield t.api.getAgency(t.agencyPrismaFilter,t.sort,t.pagination,Bn))||void 0===u||null===(u=u.success)||void 0===u?void 0:u.data)||[];console.log("AGENCIES",JSON.parse(JSON.stringify(H))),t.agencies=t.agencies.map(d=>{const h=H.find(_=>_.id===d.id);return console.log("LA AGENCY WITH PROMOTIONS",h),h&&(d.promotions=h.promotions),d})})()}onSort(t){var e=this;return(0,v.A)(function*(){const a=yield e.popoversService.onShowMenuPopover(t,"list-order");if(console.log("Popover result:",a),null!=a&&a.data){const l=a.data;if(l.includes("_")){const c=l.split("_")[0],r=l.split("_")[1];e.sort={field:c,order:r}}else e.sort={field:l,order:"asc"};e.getData()}})()}}return(i=s).\u0275fac=function(t){return new(t||i)(n.rXU(T.Ix),n.rXU(y.f),n.rXU(j.d),n.rXU(x.W3),n.rXU(R.i),n.rXU(L.c),n.rXU(G.m),n.rXU(p.c$))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-agencies-list"]],inputs:{promotion:"promotion"},decls:30,vars:18,consts:[[3,"fullscreen","scrollY"],[1,"crm-block-content",2,"padding-top","10px","background","#F9F9F9"],[1,"crm-block-body"],[3,"ngClass"],[1,"crm-header-modal"],[1,"crm-input"],[1,"crm-input-input","crm-input-input-searchbar"],[1,"fas","fa-search"],["type","text",3,"input","value","placeholder"],[1,"crm-buttons-group"],[1,"crm-button"],[1,"crm-button-secondary",3,"click","ngClass"],[2,"background","white"],[1,"crm-block-body-fixed","crm-block-body-fixed-padding-bigger"],[1,"crm-block-body-blue-content"],[1,"crm-section-inline-cards"],[1,"crm-block-content-aside"],[1,"crm-button",3,"click"],[1,"fas","fa-envelope"],[1,"fa","fa-times"],[1,"fa","fa-filter"],[3,"goPreviousPage","goNextPage","sort","listPaginationConfig"],[3,"isSkeleton"],[1,"crm-section-operations-list-buttons",2,"padding","0"],[1,"crm-operations-list-pipe-button",3,"ngClass"],[3,"promoterPromotions","agency","options"],[1,"crm-operations-list-pipe-button",3,"click","ngClass"],[1,"crm-operations-list-pipe-button-subtitle"],[1,"crm-dot","success",3,"ngStyle"],[3,"inviteAgencyClick","promoterPromotions","agency","options"],[3,"onFilter"]],template:function(t,e){1&t&&(n.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),n.nrm(7,"i",7),n.j41(8,"input",8),n.nI1(9,"translate"),n.bIt("input",function(l){return e.onSearchInputChange(l)}),n.k0s()()(),n.j41(10,"div",9),n.DNE(11,An,4,3,"button",10),n.j41(12,"button",11),n.bIt("click",function(){return e.onToggleAside()}),n.DNE(13,jn,3,3)(14,Tn,2,1),n.k0s()()(),n.DNE(15,Rn,2,7,"div",12),n.k0s(),n.DNE(16,Dn,2,7,"div",13),n.j41(17,"div",14),n.DNE(18,On,4,3,"div",15)(19,$n,6,0),n.nrm(20,"br")(21,"br")(22,"br")(23,"br")(24,"br")(25,"br")(26,"br")(27,"br")(28,"br"),n.k0s()(),n.DNE(29,Ln,2,1,"div",16),n.k0s()()),2&t&&(n.Y8G("fullscreen",!0)("scrollY",!1),n.R7$(3),n.Y8G("ngClass",n.eq3(14,kn,!e.promotion)),n.R7$(5),n.Y8G("value",e.searchString)("placeholder",n.bMT(9,12,"text.search_agency")),n.R7$(3),n.vxM(e.promotion?-1:11),n.R7$(),n.Y8G("ngClass",n.eq3(16,xn,!(null!=e.aside&&e.aside.visible)&&e.filters)),n.R7$(),n.vxM(null!=e.aside&&e.aside.visible?13:14),n.R7$(2),n.vxM(e.promotion?-1:15),n.R7$(),n.vxM(e.promotion?16:-1),n.R7$(2),n.vxM(e.loadingList?18:19),n.R7$(11),n.vxM(null!=e.aside&&e.aside.visible?29:-1))},dependencies:[m.YU,m.B3,x.W9,dn,pn.k,Cn,p.D9],data:{animation:[(0,f.hZ)("fadeSlideIn",[(0,f.kY)(":enter",[(0,f.iF)({opacity:0,transform:"translateX(30px)"}),(0,f.i0)("150ms ease-out",(0,f.iF)({opacity:1,transform:"translateX(0)"}))])]),(0,f.hZ)("biggerFadeSlideIn",[(0,f.kY)(":enter",[(0,f.iF)({opacity:0,transform:"translateX(150px)"}),(0,f.i0)("100ms ease-out",(0,f.iF)({opacity:1,transform:"translateX(0)"}))])])]}}),s})()}}]);